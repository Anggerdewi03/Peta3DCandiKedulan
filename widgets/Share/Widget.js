// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/shareUtils":function(){define("dojo/_base/lang esri/request dojo/promise/all jimu/shared/basePortalUrlUtils dojo/Deferred jimu/portalUtils jimu/utils esri/core/urlUtils".split(" "),function(u,A,z,t,f,h,k,l){var d={getBaseHrefUrl:function(b){var c="";window.isXT?c=window.location.protocol+"//"+window.location.host+window.appInfo.appPath:(c=k.urlToObject(window.location.href).query||{},c=c.appid?b+"apps/webappviewer3d/index.html?appid\x3d"+c.appid:c.id?b+"apps/webappviewer3d/index.html?id\x3d"+
c.id:k.getAppHref());return c},addQueryParamToUrl:function(b,c,m,g){b=l.urlToObject(b);b.query||(b.query={});b.query[c]=m;c=b.path;for(var q in b.query)m=b.query[q],!0===g&&(m=encodeURIComponent(m)),c=c===b.path?c+"?"+q+"\x3d"+m:c+"\x26"+q+"\x3d"+m;return c},removeQueryParamFromUrl:function(b,c,m){b=l.urlToObject(b);b.query&&delete b.query[c];c=b.path;for(var g in b.query){var q=b.query[g];!0===m&&(q=encodeURIComponent(q));c=c===b.path?c+"?"+g+"\x3d"+q:c+"\x26"+g+"\x3d"+q}return c},getShareUrlContent:function(b){return"\x3cdiv class\x3d'marker-feature-action-popup'\x3e\x3cdiv class\x3d'item'\x3e\x3cspan class\x3d'sub-title jimu-float-leading'\x3e"+
window.jimuNls.common.url+"\x3c/span\x3e\x3cinput type\x3d'text' class\x3d'jimu-float-leading' readonly\x3d'readonly' value\x3d"+b+"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e"},getShareUrl:function(b,c,m){var g=d.getBaseHrefUrl(window.portalUrl),q="";if(c)if(c.longitude&&c.latitude){var v=c.longitude;var O=c.latitude;q=c.longitude+","+c.latitude+","}else if(c.x&&c.y&&c.spatialReference&&c.spatialReference.wkid){var P=c.x;var Q=c.y;var S=c.spatialReference.wkid;q=c.x+","+c.y+","+c.spatialReference.wkid}g=
d.addQueryParamToUrl(g,"marker",q,!0);g=d.addQueryParamToUrl(g+",,,","markertemplate",encodeURIComponent(JSON.stringify({title:c.title,x:P,y:Q,wkid:S,longitude:v,latitude:O,isIncludeShareUrl:m})));c=b.getLevel();return g="number"===typeof c&&-1!==c?d.addQueryParamToUrl(g,"level",b.getLevel(),!0):d.addQueryParamToUrl(g,"scale",b.getScale(),!0)},getXyContent:function(b){var c="\x3cdiv class\x3d'marker-feature-action-popup'\x3e";b.longitude&&b.latitude?c+="\x3cdiv class\x3d'item clearFix'\x3e\x3cspan class\x3d'sub-title'\x3e"+
window.jimuNls.common.longitude+"\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+k.localizeNumber(parseFloat(b.longitude).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d'item clearFix'\x3e\x3cspan class\x3d'sub-title'\x3e"+window.jimuNls.common.latitude+"\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+k.localizeNumber(parseFloat(b.latitude).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e":b.x&&b.y&&(c+="\x3cdiv class\x3d'item clearFix'\x3e\x3cspan class\x3d'sub-title'\x3ex\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+
k.localizeNumber(parseFloat(b.x).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d'item'\x3e\x3cspan class\x3d'sub-title'\x3ey\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+k.localizeNumber(parseFloat(b.y).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e");return c+"\x3c/div\x3e"},_isUserOwnTheApp:function(b){return b&&b.username&&b.username===window.appInfo.appOwner?!0:!1},getItemByUserAndItemId:function(b,c,m,g){var q=new f;g=t.getStandardPortalUrl(g);g=g+"/sharing/rest/content/users/"+(c?c.username?c.username:
c.email:m.email);if(void 0!==b.folderId&&null!==b.folderId&&"/"!==b.folderId||void 0!==b.ownerFolder&&null!==b.ownerFolder&&"/"!==b.ownerFolder)g+="/"+(b.folderId||b.ownerFolder);g+="/items/"+b.id;A({url:g,handleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(u.hitch(this,function(v){q.resolve(v)}),u.hitch(this,function(v){console.error(v);q.reject(v)}));return q},_getProfile:function(b,c){var m=new f;b=t.getUserUrl(c,b.owner);A({url:b,handleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(u.hitch(this,
function(g){m.resolve(g)}),u.hitch(this,function(g){console.error(g);m.reject(g)}));return m},_unshareItemById:function(b,c,m){var g=new f;m=t.getStandardPortalUrl(m);m+="/sharing/rest/content/items/"+c+"/unshare";c={f:"json"};c=u.mixin(c,b);A({url:m,handleAs:"json",content:c,callbackParamName:"callback"},{usePost:!0}).then(u.hitch(this,function(q){g.resolve(q)}),u.hitch(this,function(q){console.error(q);g.reject(q)}));return g},canSharePublic:function(b){return!b.selfUrl||!0!==b.canSharePublic&&
!1!==b.canSharePublic?!0:b.canSharePublic},unshareItemsByUser:function(b,c,m){var g=new f;m=t.getStandardPortalUrl(m);m+="/sharing/rest/content/users/"+b+"/unshareItems";b={f:"json"};b=u.mixin(b,c);A({url:m,handleAs:"json",content:b,callbackParamName:"callback"},{usePost:!0}).then(u.hitch(this,function(q){g.resolve(q)}),u.hitch(this,function(q){console.error(q);g.reject(q)}));return g},unshareItems:function(b,c,m){var g=new f;m=t.getStandardPortalUrl(m);m+="/sharing/rest/content/users/"+(c.owner||
b.email)+"/unshareItems";b={f:"json"};b=u.mixin(b,c);A({url:m,handleAs:"json",content:b,callbackParamName:"callback"},{usePost:!0}).then(u.hitch(this,function(q){g.resolve(q)}),u.hitch(this,function(q){console.error(q);g.reject(q)}));return g},shareItemsByUser:function(b,c,m){var g=new f;m=t.getStandardPortalUrl(m);m+="/sharing/rest/content/users/"+b+"/shareItems";b={f:"json"};b=u.mixin(b,c);A({url:m,handleAs:"json",content:b,callbackParamName:"callback"},{usePost:!0}).then(u.hitch(this,function(q){g.resolve(q)}),
u.hitch(this,function(q){console.error(q);g.reject(q)}));return g},shareItems:function(b,c,m){var g=new f;m=t.getStandardPortalUrl(m);m+="/sharing/rest/content/users/"+(c.owner||b.email)+"/shareItems";b={f:"json"};b=u.mixin(b,c);A({url:m,handleAs:"json",content:b,callbackParamName:"callback"},{usePost:!0}).then(u.hitch(this,function(q){g.resolve(q)}),u.hitch(this,function(q){console.error(q);g.reject(q)}));return g},getItemsGroups:function(b,c){var m=new f;c=t.getStandardPortalUrl(c);c+="/sharing/rest/content/items/"+
b.id+"/groups";A({url:c,handleAs:"json",content:{f:"json"},callbackParamName:"callback"},{usePost:!0}).then(u.hitch(this,function(g){m.resolve(g)}),u.hitch(this,function(g){console.error(g);m.reject(g)}));return m},isSharedToPublic:function(b){return window.isXT?!1:null===b?!0:"undefined"!==typeof b&&"undefined"!==typeof b.item&&"undefined"!==typeof b.item.access&&"public"===b.item.access?!0:!1},isShowSocialMediaLinks:function(b){return window.isXT?!0:null===b?!0:"undefined"!==typeof b&&"undefined"!==
typeof b.item&&"undefined"!==typeof b.item.access&&"private"===b.item.access?!1:!0},getItemShareInfo:function(b){var c=new f,m="";if(window.isXT)return c.resolve(null);m=k.urlToObject(k.getAppHref()).query||{};m=m.id||m.appid;if("undefined"===typeof m||""===m)return c.resolve(null);h.getPortal(b).getItemById(m).then(u.hitch(this,function(g){var q={};q.item=g;q.item&&"undefined"===typeof q.item.sharing&&q.item.access&&(q.item.sharing={access:q.item.access});c.resolve(q)}),u.hitch(this,function(g){console.log(g);
c.resolve(null)}));return c},getShareInfo:function(b){var c=h.getPortal(b),m=new f,g="";if(window.isXT)return m.resolve(null);g=k.urlToObject(k.getAppHref()).query||{};g=g.id||g.appid;if("undefined"===typeof g||""===g)return m.resolve(null);z({getUser:c.getUser(),loadSelfInfo:c.loadSelfInfo(),getItem:c.getItemById(g)}).then(u.hitch(this,function(q){var v={};v.item=q.getItem;v.item&&v.item.ownerFolder&&v.item.ownerFolder.length&&"/"!==v.item.ownerFolder&&(v.item.folderId=v.item.ownerFolder);"undefined"===
typeof v.item.sharing&&v.item.access&&(v.item.sharing={access:v.item.access});v.user=q.getUser;d._setUserRole(q.loadSelfInfo,v);v.currentUser=v.user;v.isAdmin=!1;v.userRole&&(v.userRole.isAdmin()||v.userRole.isCustom()&&v.userRole.canUpdateOrgItems())?(v.isAdmin=!0,v.item.owner!==v.currentUser.name?d._getProfile(v.item,b).then(u.hitch(this,function(O){v.itemUser=O;v.itemUser.orgId!==v.currentUser.orgId&&(v.isAdmin=!1);m.resolve(v)})):(v.itemUser=v.currentUser,m.resolve(v))):(v.currentUser&&(v.itemUser=
v.currentUser),m.resolve(v))}),u.hitch(this,function(q){console.log(q);m.resolve(null)}));return m},_setUserRole:function(b,c){c.userPortalUrl=b.urlKey?b.urlKey+"."+b.customBaseUrl:this.portalUrl;!b||b.code||b.message||(c.organization=b);if(b&&b.user)c.userRole=new Role({id:b.user.roleId?b.user.roleId:b.user.role,role:b.user.role}),c._isCustomRole=c.userRole.isCustom(),c._roleCanShareToGroup=c._isCustomRole&&c.userRole.canShareItemToGroup(),c._roleCanShareToOrg=c._isCustomRole&&c.userRole.canShareItemToOrg(),
c._roleCanSharePublic=c._isCustomRole&&c.userRole.canShareItemToPublic(),c._roleCanShare=c._roleCanShareToGroup||c._roleCanShareToOrg||c._roleCanShareToPublic,c._roleCanUpdateItems=c._isCustomRole&&c.userRole.canUpdateOrgItems(),c._roleCanShareOthersItemsToGroup=c._isCustomRole&&c.userRole.canShareOthersItemsToGroup(),c._roleCanShareOthersItemsToOrg=c._isCustomRole&&c.userRole.canShareOthersItemsToOrg(),c._roleCanShareOthersItemsToPublic=c._isCustomRole&&c.userRole.canShareOthersItemsToPublic(),c._roleCanShareOthersItems=
c._isCustomRole&&(c.userRole.canShareOthersItemsToGroup()||c.userRole.canShareOthersItemsToOrg()||c._roleCanShareOthersItemsToPublic),c._orgUserCanSharePublicOrOverride=c.organization&&(!0===c.organization.canSharePublic&&(!c._isCustomRole||c._roleCanSharePublic||c._roleCanShareOthersItemsToPublic)||c.userRole.isAdmin());else return!1},getItemById:function(b,c){var m=new f;c=t.getStandardPortalUrl(c);c+="/sharing/rest/content/items/"+b.id;A({url:c,handleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(u.hitch(this,
function(g){m.resolve(g)}),u.hitch(this,function(g){console.error(g);m.reject(g)}));return m},disableWebMapPopup:function(b){b&&b.setInfoWindowOnClick&&b.setInfoWindowOnClick(!1)},enableWebMapPopup:function(b){b&&b.setInfoWindowOnClick&&b.setInfoWindowOnClick(!0)}};return d})},"jimu/dijit/ShareLink":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/array dojo/dom-class dojo/_base/html dojo/on dojo/topic dojo/query jimu/utils jimu/shareUtils dojo/text!./templates/ShareLink.html dojo/string dijit/form/Select dijit/form/NumberTextBox dojo/dom-attr dojo/Deferred esri/request esri/layers/GraphicsLayer dijit/form/TextBox dijit/form/Textarea dijit/form/RadioButton dijit/form/Select dijit/form/CheckBox dijit/form/NumberTextBox dijit/form/SimpleTextarea dijit/form/ValidationTextBox".split(" "),
function(u,A,z,t,f,h,k,l,d,b,c,m,g,q,v,O,P,Q,S,T,p){return u([A,z,t],{templateString:q,declaredClass:"jimu.dijit.ShareLink",bitlyUrl:"https://arcg.is/prod/shorten",share:{shareEmailSubject:"",shareTwitterTxt:"",languages:"ar bg bs cs da de en el es et fi fr he hr hu it id ja ko lt lv nb nl pl pt-br pt-pt ro ru sk sl sr sv th tr uk vi zh-cn zh-hk zh-tw".split(" "),DEFAULT_MOBILE_LAYOUT:600},_hasZoomLevelMarkerAdded:!1,_hasMapScaleMarkerAdded:!1,_hasAddMarkerMarkerAdded:!1,HAS_INIT_URL:!1,postMixInProperties:function(){this.inherited(arguments);
this.nls=window.jimuNls.shareLink;this.nls.symbol=window.jimuNls.common.symbol;this.nls.label=window.jimuNls.common.label;this.nls.WKID=window.jimuNls.common.wkid||"wkid";this.nls.popupTitle=window.jimuNls.shareLink.popupTitle||"Pop-up title";this.nls.zoomLevel=window.jimuNls.shareLink.zoomLevel||"Zoom level";this.share.shareEmailSubject=this.nls.shareEmailSubject+" ${appTitle} ";this.share.shareTwitterTxt=this.nls.shareEmailSubject+"${appTitle}\n"},postCreate:function(){this.inherited(arguments);
this._initUI();this._initMap();this._showSocialMediaLinksByConfig()},constructor:function(a){a&&(this._portalUrl=a.portalUrl,this._isOnline=a.isOnline,this._appTitle=a.appTitle,this._isShowBackBtn=a.isShowBackBtn,this._isShowSocialMediaLinks=a.isShowSocialMediaLinks,this._isSharedToPublic=a.isSharedToPublic,this._isShowFindLocation=a.isShowFindLocation,this._config=a.config)},startup:function(){this.baseHrefUrl=g.getBaseHrefUrl(this._portalUrl);"undefined"===typeof this.optionSrc&&(this.optionSrc=
"currentMapExtent");this.updateUrl(null);this._initOptionsEvent()},destroy:function(){this._cleanMarkerStatus();this._mapClickHandler&&(this._mapClickHandler=null);this.inherited(arguments)},onShareToPublicChanged:function(a){this._isSharedToPublic=a;this.updateUrl(null);this._isSharedToPublic?k.add(this.shareTips,"displaynone"):k.remove(this.shareTips,"displaynone")},onCloseContainer:function(){this._cleanMarkerStatus()},updateShareLinkOptionsUI:function(a){a&&"undefined"!==typeof a.isShowFindLocation&&
this.findLocationRow&&(!1===a.isShowFindLocation?k.add(this.findLocationRow,"displaynone"):!0===a.isShowFindLocation&&k.remove(this.findLocationRow,"displaynone"))},_initMap:function(){window.isBuilder?(this.own(b.subscribe("app/mapLoaded",f.hitch(this,this._onMapLoaded))),this.own(b.subscribe("app/mapChanged",f.hitch(this,this._onMapLoaded)))):(this.own(b.subscribe("mapLoaded",f.hitch(this,this._onMapLoaded))),this.own(b.subscribe("mapChanged",f.hitch(this,this._onMapLoaded))));window._widgetManager.sceneView&&
(this.map=window._widgetManager.sceneView)},_onMapLoaded:function(a){this.map=a;this._mapEventUpdateUrls();this._addGraphicsLayer()},_mapEventUpdateUrls:function(){this.map&&this.own(this.map.watch("extent",f.hitch(this,this._mapEventHandler)))},_mapEventHandler:function(){this._isShareLinkOptionsShow()&&this.updateUrl()},_showSocialMediaLinksByConfig:function(){this._config&&this._config.socialMedias&&("undefined"!==typeof this._config.socialMedias.email&&!1===this._config.socialMedias.email&&k.add(this.emailShare,
"displaynone"),"undefined"!==typeof this._config.socialMedias.facebook&&!1===this._config.socialMedias.facebook&&k.add(this.FacebookShare,"displaynone"),"undefined"!==typeof this._config.socialMedias.twitter&&!1===this._config.socialMedias.twitter&&k.add(this.TwitterShare,"displaynone"),"undefined"!==typeof this._config.socialMedias.googlePlus&&!1===this._config.socialMedias.googlePlus&&k.add(this.googlePlusShare,"displaynone"))},_initUI:function(){this._isShowBackBtn?(Q.set(this.backBtn,"title",
window.jimuNls.common.back),this.own(d(this.backBtn,"click",f.hitch(this,this._toggleLinkOptions))),this.own(d(this.linkOptions,"click",f.hitch(this,this._toggleLinkOptions)))):(k.add(this.backBtn,"displaynone"),k.add(this.linkOptions,"displaynone"));!1===this._isShowSocialMediaLinks&&k.toggle(this.socialNetworkLinks,"displaynone");!0===this._isSharedToPublic&&k.toggle(this.shareTips,"displaynone");this._setInputsClicktoSelect(this._linkUrlTextBox);this.own(d(this.googlePlusShare,"click",f.hitch(this,
this._toGooglePlus)));this._setInputsClicktoSelect(this._embedCodeTextArea);this._sizeOptions=new O({options:[{label:this.nls.smallSize,value:"small",selected:!0},{label:this.nls.mediumSize,value:"medium",selected:!1},{label:this.nls.largeSize,value:"large",selected:!1},{label:this.nls.customSize,value:"custom",selected:!1}],"class":"sizeOptionsSelect"});this._sizeOptions.placeAt(this.SizeSelect);this.own(d(this._sizeOptions,"change",function(a){switch(a){case "small":this._widthTextBox.set("value",
300);this._heightTextBox.set("value",200);k.add(this.CustomSizeContainer,"disable");this._updateEmbedCodeFrameSize();break;case "medium":this._widthTextBox.set("value",800);this._heightTextBox.set("value",600);k.add(this.CustomSizeContainer,"disable");this._updateEmbedCodeFrameSize();break;case "large":this._widthTextBox.set("value",1080);this._heightTextBox.set("value",720);k.add(this.CustomSizeContainer,"disable");this._updateEmbedCodeFrameSize();break;case "custom":k.remove(this.CustomSizeContainer,
"disable")}}.bind(this)));this._widthTextBox=new P({"class":"sizeTextBox inputsText",value:300,constraints:{pattern:"#",places:0}});this._widthTextBox.placeAt(this.CustomSizeContainer,1);this.own(d(this._widthTextBox,"change",function(a){200>a?this._widthTextBox.set("value",200>a?200:a):this._updateEmbedCodeFrameSize()}.bind(this)));this._heightTextBox=new P({"class":"sizeTextBox inputsText",value:200,constraints:{pattern:"#",places:0}});this._heightTextBox.placeAt(this.CustomSizeContainer,3);this.own(d(this._heightTextBox,
"change",function(a){200>a?this._heightTextBox.set("value",200>a?200:a):this._updateEmbedCodeFrameSize()}.bind(this)));this.mobileLayout.set("value",this.share.DEFAULT_MOBILE_LAYOUT);this.updateShareLinkOptionsUI({isShowFindLocation:this._isShowFindLocation});this._setInputsClicktoSelect(this.preview)},_setLinkUrl:function(a){this._linkUrlTextBox.set("value",a);Q.set(this._linkUrlTextBox.domNode,"data-old",a)},_setEmbedCode:function(a){this._embedCodeTextArea.set("value",'\x3ciframe width\x3d"'+this._widthTextBox.value+
'" height\x3d"'+this._heightTextBox.value+'" frameborder\x3d"0" scrolling\x3d"no" allowfullscreen src\x3d"'+a+'"\x3e\x3c/iframe\x3e');Q.set(this._embedCodeTextArea.domNode,"data-old-shortened",a)},_updateEmbedCodeFrameSize:function(a){a=this._embedCodeTextArea.get("value");a=a.replace(/width="[0-9]*"/i,'width\x3d"'+this._widthTextBox.value+'"');a=a.replace(/height="[0-9]*"/i,'height\x3d"'+this._heightTextBox.value+'"');this._embedCodeTextArea.set("value",a)},_initOptionsEvent:function(){var a=m.has("ie")||
m.has("edge")?"change":"KeyUp",e=c(".shareRadios",this.domNode);this.own(d(e,"click",f.hitch(this,function(n){this.optionSrc=Q.get(n.srcElement||n.target,"data-id");this.updateUrl()})));e=c(".shareCheckBoxes",this.domNode);this.own(d(e,"click",f.hitch(this,function(){this.updateUrl()})));this.own(d(this.chooseCenterWithLevel_levels,"change",f.hitch(this,function(){this.updateUrl()})));this.own(d(this.chooseCenterWithScale_scales,"change",f.hitch(this,function(){this.updateUrl()})));this.own(d(this.setlanguage_languages,
"change",f.hitch(this,function(){this.updateUrl()})));this.own(d(this.findLocation_input,a,f.hitch(this,this.updateUrl)));this.own(d(this.queryFeature_field,"change",f.hitch(this,this._updateQueryFeature_Value)));this.own(d(this.queryFeature_value,"change",f.hitch(this,this.updateUrl)));this.own(d(this.mobileLayout,a,f.hitch(this,this.updateUrl)));this.own(d(this.authtoken,a,f.hitch(this,this.updateUrl)));this.own(d(this.addMarker_marker,"click",f.hitch(this,function(n){this._onMarkersClick(n)})));
this.own(d(this.addMarker_spatialReference,"change",f.hitch(this,this.updateUrl)));this.own(d(this.addMarker_title,a,f.hitch(this,this.updateUrl)));this.own(d(this.addMarker_symbolURL,a,f.hitch(this,this.updateUrl)));this.own(d(this.addMarker_label,a,f.hitch(this,this.updateUrl)));this.own(d(this.addMarker_level,"change",f.hitch(this,this.updateUrl)));this.own(d(this.chooseCenterWithLevel_marker,"click",f.hitch(this,function(n){this._onMarkersClick(n)})));this.own(d(this.chooseCenterWithScale_marker,
"click",f.hitch(this,function(n){this._onMarkersClick(n)})))},_onMarkersClick:function(a){g.disableWebMapPopup(this.map);this._unselectMarkerBtn();this._selectMarkerBtn(a);this._hidePopup();this._removeGraphicsLayer();this._mapClickHandler=d.once(this.map,"click",f.hitch(this,this._onMapClick))},_onMapClick:function(a){var e=a.mapPoint;this._addGraphicsLayerMarker(a);"chooseCenterWithLevel"===this.optionSrc?this._hasZoomLevelMarkerAdded=!1:"chooseCenterWithScale"===this.optionSrc?this._hasMapScaleMarkerAdded=
!1:"addMarker"===this.optionSrc&&(this._hasAddMarkerMarkerAdded=!1);this._unselectMarkerBtn();this.updateUrl(e);this._showPopup();g.enableWebMapPopup(this.map)},_hidePopup:function(){b.publish("ShareLink/onHideContainer")},_showPopup:function(){b.publish("ShareLink/onShowContainer")},_updateResUrls:function(a){"currentMapExtent"===this.optionSrc?this.resultUrl=this.baseHrefUrl:"chooseCenterWithLevel"===this.optionSrc?(!1===this._hasZoomLevelMarkerAdded&&(this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,
"center",this.getMapCenter(this.map,a),!0),a&&a.x&&a.y&&(this._hasZoomLevelMarkerAdded=!0)),this.resultUrl=g.addQueryParamToUrl(this.resultUrl,"level",this._getMapLevel(),!0)):"chooseCenterWithScale"===this.optionSrc?(!1===this._hasMapScaleMarkerAdded&&(this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,"center",this.getMapCenter(this.map,a),!0),a&&a.x&&a.y&&(this._hasMapScaleMarkerAdded=!0)),this.resultUrl=g.addQueryParamToUrl(this.resultUrl,"scale",this._getMapScale(),!0)):"findLocation"===this.optionSrc?
(a=this.findLocation_input.get("value"),this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,"find",a,!0)):"queryFeature"===this.optionSrc?this._updateUrlByQueryFeatures():"addMarker"===this.optionSrc&&(!1===this._hasAddMarkerMarkerAdded?(this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,"marker",this.getMapCenter(this.map,a,null,this._getWkid()),!0),this.resultUrl+=",",a&&a.x&&a.y&&(this._hasAddMarkerMarkerAdded=!0,this._lastAddMarkerParamObj=a)):(this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,
"marker",this.getMapCenter(this.map,this._lastAddMarkerParamObj,null,this._getWkid()),!0),this.resultUrl+=","),this.resultUrl+=encodeURIComponent(this.addMarker_title.get("value")||""),this.resultUrl+=",",this.resultUrl+=encodeURIComponent(this.addMarker_symbolURL.get("value")||""),this.resultUrl+=",",this.resultUrl+=encodeURIComponent(this.addMarker_label.get("value")||""),a=this._getMapLevel(),this.resultUrl="number"===typeof a&&-1!==a?g.addQueryParamToUrl(this.resultUrl,"level",this._getMapLevel(),
!0):g.addQueryParamToUrl(this.resultUrl,"scale",this._getMapScale(),!0));this.resultUrl=g.removeQueryParamFromUrl(this.resultUrl,"mobileBreakPoint",!0);this.resultUrl=g.removeQueryParamFromUrl(this.resultUrl,"locale",!0);this.resultUrl=g.removeQueryParamFromUrl(this.resultUrl,"token",!0);this.overwirteMobileLayout.checked&&(this.resultUrl=g.addQueryParamToUrl(this.resultUrl,"mobileBreakPoint",this.mobileLayout.getValue(),!0));this.setlanguage.checked&&(this.resultUrl=g.addQueryParamToUrl(this.resultUrl,
"locale",this.setlanguage_languages.getValue(),!0));this.auth.checked&&(this.resultUrl=g.addQueryParamToUrl(this.resultUrl,"token",this.authtoken.getValue(),!0))},_updateUrlByQueryFeatures:function(){var a=this._getIdFromLayerChoose()||"",e=this.queryFeature_field.get("value"),n=this.queryFeature_value.get("value");this.resultUrl=g.addQueryParamToUrl(this.baseHrefUrl,"query",a,!0);e&&(this.resultUrl+=",",this.resultUrl+=e,n&&(this.resultUrl+=",",this.resultUrl+=n))},_updateQueryFeature_Layer:function(){this._updateUrlByQueryFeatures();
this._updateQueryFeature_Field();this._updateQueryFeature_Value();this.updateUrl()},_updateQueryFeature_Field:function(){var a=this._getFieldsFromLayerChoose(),e=[];this.queryFeature_field.removeOption(this.queryFeature_field.getOptions());h.forEach(a,f.hitch(this,function(n){-1<"esriFieldTypeString esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble".split(" ").indexOf(n.type)&&e.push({label:n.name,value:n.name})}));this.queryFeature_field.addOption(e);
this._updateUrlByQueryFeatures();this._updateQueryFeature_Value();this.updateUrl()},_updateQueryFeature_Value:function(){var a=[],e=this.queryFeature_field.get("value");a.push(e);this._query(a,this._getUrlFromLayerChoose(),this.map).then(f.hitch(this,function(n){var r=[];r=this._getQueryedValues(e,n);this.queryFeature_value.removeOption(this.queryFeature_value.getOptions());this.queryFeature_value.addOption(r);this._updateUrlByQueryFeatures();this.updateUrl()}))},_getIdFromLayerChoose:function(){var a=
null,e=this.layerChooserFromMapWithDropbox.getSelectedItem();e&&e.layerInfo&&e.layerInfo.id&&(a=e.layerInfo.id);return a},_getFieldsFromLayerChoose:function(){var a=[],e=this.layerChooserFromMapWithDropbox.getSelectedItem();e&&e.layerInfo&&e.layerInfo.layerObject&&e.layerInfo.layerObject.fields&&(a=e.layerInfo.layerObject.fields);return a},_getUrlFromLayerChoose:function(){var a="",e=this.layerChooserFromMapWithDropbox.getSelectedItem();e&&e.url&&(a=e.url);return a},_updateLinkOptionsUI:function(){c(".optionsMore",
this.domNode).style("display","none");c("."+this.optionSrc+"_optionsMore",this.domNode).style("display","block");this.overwirteMobileLayout.checked&&c(".share-options-overwirteMobileLayout_optionsMore",this.domNode).style("display","block");this.setlanguage.checked&&c(".share-options-language_optionsMore",this.domNode).style("display","block");this.auth.checked&&c(".share-options-auth_optionsMore",this.domNode).style("display","block")},_fixUrlIfIsOnline:function(a){if(this._isOnline&&this._isSharedToPublic){var e=
"";e=window.isBuilder?window.top.location.protocol:window.location.protocol;var n=this._getUrlQueryString(a);a=this._getOnlinePublicUrl(a);a=e+"//"+a+"/apps/webappviewer3d/index.html"+n}return a},updateUrl:function(a){this._updateResUrls(a);this._updateLinkOptionsUI();!0!==this.config.useOrgUrl&&(this.resultUrl=this._fixUrlIfIsOnline(this.resultUrl));this.preview.set("value",this.resultUrl);null===a&&this._generateShortenUrl();this._updateEmailHref()},_generateShortenUrl:function(){var a=this.preview.get("value");
try{this.isUseShortenUrl()?this.shortenUrl(a,this.bitlyUrl).then(f.hitch(this,function(e){this._useShortenUrl(e);this.HAS_INIT_URL=!0}),f.hitch(this,function(e){this._useLengthenUrl(a,e);this.HAS_INIT_URL=!0})):(this._useLengthenUrl(a),this.HAS_INIT_URL=!0)}catch(e){console.error(e),this.HAS_INIT_URL=!0}},_useShortenUrl:function(a){this.shortenedUrl=a;this._setLinkUrl(a);this._setEmbedCode(a)},_useLengthenUrl:function(a){a=a||"";this._setLinkUrl(a);this._setEmbedCode(a)},_toFacebook:function(){var a=
"http://www.facebook.com/sharer/sharer.php?u\x3d"+encodeURIComponent(this._linkUrlTextBox.get("value"))+"\x26t\x3d"+encodeURIComponent(m.stripHTML(this.socialNetworkTitle(this._appTitle)));window.open(a,"","toolbar\x3d0,status\x3d0,width\x3d626,height\x3d436")},_toTwitter:function(){var a=v.substitute(this.share.shareTwitterTxt,{appTitle:m.stripHTML(this._appTitle)}),e=this._linkUrlTextBox.get("value");window.open("http://twitter.com/home?status\x3d"+encodeURIComponent(a+e+"\n@ArcGISOnline"),"","toolbar\x3d0,status\x3d0,width\x3d626,height\x3d436")},
_updateEmailHref:function(){var a="mailto:?subject\x3d"+v.substitute(this.share.shareEmailSubject,{appTitle:m.stripHTML(this._appTitle)}),e=this.preview.get("value");a+="\x26body\x3d"+encodeURIComponent(this.nls.shareEmailTxt1)+"%0D%0A%0D%0A"+m.stripHTML(this._appTitle);a+="%0D%0A"+encodeURIComponent(e);a+="%0D%0A%0D%0A"+encodeURIComponent(this.nls.shareEmailTxt2);a+="%0D%0A%0D%0A"+encodeURIComponent(this.nls.shareEmailTxt3);l.setAttr(this.emailShare,"href",a)},_toGooglePlus:function(){var a=this._linkUrlTextBox.get("value");
a="http://plus.google.com/share?url\x3d"+encodeURIComponent(a);window.open(a,"","toolbar\x3d0,status\x3d0,width\x3d626,height\x3d436")},_toggleLinkOptions:function(){g.enableWebMapPopup(this.map);var a=c(".shareOptionsWrapper",this.domNode.parentNode||this.domNode.parentElement),e=c(".shareUrlsWrapper",this.domNode),n=c(".shareLinkOptionsWrapper",this.domNode);this._isShareLinkOptionsShow()?(b.publish("ShareLink/onHideLinkOptions"),this._cleanMarkerStatus(),this._generateShortenUrl()):b.publish("ShareLink/onShowLinkOptions");
a&&a[0]&&k.toggle(a[0],"displaynone");k.toggle(e[0],"displaynone");k.toggle(n[0],"displaynone")},_moreOptionsExpandCollapse:function(){k.toggle(this.MoreOptionsContainer,"displaynone");k.toggle(this.MoreOptionsIcon,"rotate")},_setInputsClicktoSelect:function(a){Q.set(a,"onclick","this.select()");Q.set(a,"onmouseup","return false;")},isUseShortenUrl:function(){return location.hostname.endWith("esri.com")||location.hostname.endWith("arcgis.com")?!0:!1},shortenUrl:function(a,e){var n=new S;a=g.addQueryParamToUrl(e,
"longUrl",a,!0);a=g.addQueryParamToUrl(a,"format","json",!0);T(a,{responseType:"json",callbackParamName:"callback",query:{f:"json"}}).then(f.hitch(this,function(r){r&&r.data&&200===r.data.status_code&&r.data.data&&r.data.data.url&&0<r.data.data.url.length?n.resolve(r.data.data.url):n.reject(r)}),f.hitch(this,function(r){console.log("can't fetch shortenUrl "+r);n.reject(r)}));return n},socialNetworkTitle:function(a){100<a.length&&(a=a.substring(0,97)+"...");return a},getMapExtent:function(a){a=a.extent;
var e="";a.spatialReference.wkid?e=a.spatialReference.wkid:!a.spatialReference.wkid&&a.spatialReference.wkt&&(e="wkt\x3d"+a.spatialReference.wkt);return null!==a?this._roundValue(a.xmin,1E4)+","+this._roundValue(a.ymin,1E4)+","+this._roundValue(a.xmax,1E4)+","+this._roundValue(a.ymax,1E4)+","+e:""},_roundValue:function(a,e){return Math.round(a*e)/e},getMapCenter:function(a,e,n,r){n=n?n:",";var w=null;e&&e.x&&e.y?w=e:a.extent.getCenter()&&(w=a.extent.getCenter());a=r||w.spatialReference.wkid;return null!==
w?this._roundValue(w.x,1E4)+n+this._roundValue(w.y,1E4)+n+a:""},_getMapLevel:function(){return this.map.getLevel()},_getMapScale:function(){return this.map.getScale()},_getWkid:function(){return this.addMarker_spatialReference.get("value")||""},_query:function(){},_getQueryedValues:function(a,e){var n=[];h.forEach(e.features,f.hitch(this,function(r){r=r.attributes[a]+"";n.push({label:r,value:r})}));return n},_addGraphicsLayer:function(){window.isBuilder||"undefined"!==typeof this._graphicsLayer||
(this._graphicsLayer=new p,this.map.addLayer(this._graphicsLayer))},_removeGraphicsLayer:function(){window.isBuilder||"undefined"===typeof this._graphicsLayer||(this._graphicsLayer.remove(this._markerGraphic),this._markerGraphic=null)},_addGraphicsLayerMarker:function(a){window.isBuilder||"undefined"===typeof this._graphicsLayer||(this._markerGraphic=this._getMarkerGraphic(a.mapPoint),this._graphicsLayer.add(this._markerGraphic))},_getMarkerGraphic:function(){},_unselectMarkerBtn:function(){for(var a=
c(".markers",this.domNode),e=0,n=a.length;e<n;e++)k.remove(a[e],"selected")},_selectMarkerBtn:function(a){k.add(a.srcElement||a.target,"selected")},_cleanMarkerStatus:function(){this._mapClickHandler&&this._mapClickHandler.remove&&this._mapClickHandler.remove();this._unselectMarkerBtn();this._removeGraphicsLayer()},_isShareLinkOptionsShow:function(){var a=c(".shareLinkOptionsWrapper",this.domNode);return!k.contains(a[0],"displaynone")},_getUrlQueryString:function(a){var e="";-1!==a.indexOf("?")&&
(e=a.substring(a.indexOf("?")));return e},_getOnlinePublicUrl:function(){var a="www.arcgis.com",e=this._portalUrl;e&&"string"===typeof e&&(-1<e.indexOf("devext.arcgis.com")?a="devext.arcgis.com":-1<e.indexOf("qaext.arcgis.com")&&(a="qaext.arcgis.com"));return a}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(u,A,z,t,f){return z("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,
_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var h=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);f.parse(h,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(t.hitch(this,function(k){this._startupWidgets=k;for(var l=0;l<k.length;l++)this._processTemplateNode(k[l],function(d,b){return d[b]},
function(d,b,c){return b in d?d.connect(d,b,c):d.on(b,c,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(h,k,l){return k(h,"dojoType")||k(h,"data-dojo-type")?!0:this.inherited(arguments)},
startup:function(){u.forEach(this._startupWidgets,function(h){h&&!h._started&&h.startup&&h.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(u,A,z,t,f,h,k,l,d,b,c,m,g,q,v,O){function P(p){return eval("("+p+")")}function Q(p){var a=p._nameCaseMap,e=p.prototype;
if(!a||a._extendCnt<T){a=p._nameCaseMap={};for(var n in e)"_"!==n.charAt(0)&&(a[n.toLowerCase()]=n);a._extendCnt=T}return a}function S(p,a){a||(a=u);var e=a._dojoParserCtorMap||(a._dojoParserCtorMap={}),n=p.join();if(!e[n]){for(var r=[],w=0,E=p.length;w<E;w++){var H=p[w];r[r.length]=e[H]=e[H]||z.getObject(H)||~H.indexOf("/")&&a(H)}p=r.shift();e[n]=r.length?p.createSubclass?p.createSubclass(r):p.extend.apply(p,r):p}return e[n]}new Date("X");var T=0;d.after(z,"extend",function(){T++},!0);g={_clearCache:function(){T++;
_ctorMap={}},_functionFromScript:function(p,a){var e="",n="",r=p.getAttribute(a+"args")||p.getAttribute("args");a=p.getAttribute("with");r=(r||"").split(/\s*,\s*/);a&&a.length&&t.forEach(a.split(/\s*,\s*/),function(w){e+="with("+w+"){";n+="}"});return new Function(r,e+p.innerHTML+n)},instantiate:function(p,a,e){a=a||{};e=e||{};var n=(e.scope||A._scopeName)+"Type",r="data-"+(e.scope||A._scopeName)+"-",w=r+"type",E=r+"mixins",H=[];t.forEach(p,function(G){var I=n in a?a[n]:G.getAttribute(w)||G.getAttribute(n);
if(I){var B=G.getAttribute(E);I=B?[I].concat(B.split(/\s*,\s*/)):[I];H.push({node:G,types:I})}});return this._instantiate(H,a,e)},_instantiate:function(p,a,e,n){function r(w){a._started||e.noStart||t.forEach(w,function(E){"function"!==typeof E.startup||E._started||E.startup()});return w}p=t.map(p,function(w){var E=w.ctor||S(w.types,e.contextRequire);if(!E)throw Error("Unable to resolve constructor for: '"+w.types.join()+"'");return this.construct(E,w.node,a,e,w.scripts,w.inherited)},this);return n?
b(p).then(r):r(p)},construct:function(p,a,e,n,r,w){function E(R){K&&z.setObject(K,R);for(y=0;y<F.length;y++)d[F[y].advice||"after"](R,F[y].method,z.hitch(R,F[y].func),!0);for(y=0;y<M.length;y++)M[y].call(R);for(y=0;y<N.length;y++)R.watch(N[y].prop,N[y].func);for(y=0;y<U.length;y++)v(R,U[y].event,U[y].func);return R}var H=p&&p.prototype;n=n||{};var G={};n.defaults&&z.mixin(G,n.defaults);w&&z.mixin(G,w);var I=a.attributes;var B=n.scope||A._scopeName;w="data-"+B+"-";var x={};"dojo"!==B&&(x[w+"props"]=
"data-dojo-props",x[w+"type"]="data-dojo-type",x[w+"mixins"]="data-dojo-mixins",x[B+"type"]="dojotype",x[w+"id"]="data-dojo-id");var y=0,C;B=[];for(var K,L;C=I[y++];){var J=C.name,D=J.toLowerCase();C=C.value;switch(x[D]||D){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":L=C;break;case "data-dojo-id":case "jsid":K=C;break;case "data-dojo-attach-point":case "dojoattachpoint":G.dojoAttachPoint=C;break;case "data-dojo-attach-event":case "dojoattachevent":G.dojoAttachEvent=
C;break;case "class":G["class"]=a.className;break;case "style":G.style=a.style&&a.style.cssText;break;default:if(J in H||(J=Q(p)[D]||J),J in H)switch(typeof H[J]){case "string":G[J]=C;break;case "number":G[J]=C.length?Number(C):NaN;break;case "boolean":G[J]="false"!=C.toLowerCase();break;case "function":""===C||-1!=C.search(/[^\w\.]+/i)?G[J]=new Function(C):G[J]=z.getObject(C,!1)||new Function(C);B.push(J);break;default:D=H[J],G[J]=D&&"length"in D?C?C.split(/\s*,\s*/):[]:D instanceof Date?""==C?new Date(""):
"now"==C?new Date:c.fromISOString(C):D instanceof l?A.baseUrl+C:P(C)}else G[J]=C}}for(I=0;I<B.length;I++)x=B[I].toLowerCase(),a.removeAttribute(x),a[x]=null;if(L)try{L=P.call(n.propsThis,"{"+L+"}"),z.mixin(G,L)}catch(R){throw Error(R.toString()+" in data-dojo-props\x3d'"+L+"'");}z.mixin(G,e);r||(r=p&&(p._noScript||H._noScript)?[]:q("\x3e script[type^\x3d'dojo/']",a));var F=[],M=[],N=[],U=[];if(r)for(y=0;y<r.length;y++)x=r[y],a.removeChild(x),e=x.getAttribute(w+"event")||x.getAttribute("event"),n=
x.getAttribute(w+"prop"),L=x.getAttribute(w+"method"),B=x.getAttribute(w+"advice"),I=x.getAttribute("type"),x=this._functionFromScript(x,w),e?"dojo/connect"==I?F.push({method:e,func:x}):"dojo/on"==I?U.push({event:e,func:x}):G[e]=x:"dojo/aspect"==I?F.push({method:L,advice:B,func:x}):"dojo/watch"==I?N.push({prop:n,func:x}):M.push(x);p=(r=p.markupFactory||H.markupFactory)?r(G,a,p):new p(G,a);return p.then?p.then(E):E(p)},scan:function(p,a){function e(D){if(!D.inherited){D.inherited={};var F=D.node,M=
e(D.parent);F={dir:F.getAttribute("dir")||M.dir,lang:F.getAttribute("lang")||M.lang,textDir:F.getAttribute(I)||M.textDir};for(var N in F)F[N]&&(D.inherited[N]=F[N])}return D.inherited}var n=[],r=[],w={},E=(a.scope||A._scopeName)+"Type",H="data-"+(a.scope||A._scopeName)+"-",G=H+"type",I=H+"textdir";H+="mixins";var B=p.firstChild,x=a.inherited;if(!x){x=function N(F,M){return F.getAttribute&&F.getAttribute(M)||F.parentNode&&N(F.parentNode,M)};x={dir:x(p,"dir"),lang:x(p,"lang"),textDir:x(p,I)};for(var y in x)x[y]||
delete x[y]}y={inherited:x};for(var C,K;;)if(B)if(1!=B.nodeType)B=B.nextSibling;else if(C&&"script"==B.nodeName.toLowerCase())(x=B.getAttribute("type"))&&/^dojo\/\w/i.test(x)&&C.push(B),B=B.nextSibling;else if(K)B=B.nextSibling;else if(x=B.getAttribute(G)||B.getAttribute(E),p=B.firstChild,x||p&&(3!=p.nodeType||p.nextSibling)){K=null;if(x){var L=B.getAttribute(H);C=L?[x].concat(L.split(/\s*,\s*/)):[x];try{K=S(C,a.contextRequire)}catch(D){}K||t.forEach(C,function(D){~D.indexOf("/")&&!w[D]&&(w[D]=!0,
r[r.length]=D)});L=K&&!K.prototype._noScript?[]:null;y={types:C,ctor:K,parent:y,node:B,scripts:L};y.inherited=e(y);n.push(y)}else y={node:B,scripts:C,parent:y};C=L;K=B.stopParser||K&&K.prototype.stopParser&&!a.template;B=p}else B=B.nextSibling;else{if(!y||!y.node)break;B=y.node.nextSibling;K=!1;y=y.parent;C=y.scripts}var J=new m;r.length?(a.contextRequire||u)(r,function(){J.resolve(t.filter(n,function(D){if(!D.ctor)try{D.ctor=S(D.types,a.contextRequire)}catch(N){}for(var F=D.parent;F&&!F.types;)F=
F.parent;var M=D.ctor&&D.ctor.prototype;D.instantiateChildren=!(M&&M.stopParser&&!a.template);D.instantiate=!F||F.instantiate&&F.instantiateChildren;return D.instantiate}))}):J.resolve(n);return J.promise},_require:function(p,a){p=P("{"+p.innerHTML+"}");var e=[],n=[],r=new m;a=a&&a.contextRequire||u;for(var w in p)e.push(w),n.push(p[w]);a(n,function(){for(var E=0;E<e.length;E++)z.setObject(e[E],arguments[E]);r.resolve(arguments)});return r.promise},_scanAmd:function(p,a){var e=new m,n=e.promise;e.resolve(!0);
var r=this;q("script[type\x3d'dojo/require']",p).forEach(function(w){n=n.then(function(){return r._require(w,a)});w.parentNode.removeChild(w)});return n},parse:function(p,a){!p||"string"==typeof p||"nodeType"in p||(a=p,p=a.rootNode);var e=p?h.byId(p):k.body();a=a||{};var n=a.template?{template:!0}:{},r=[],w=this;p=this._scanAmd(e,a).then(function(){return w.scan(e,a)}).then(function(E){return w._instantiate(E,n,a,!0)}).then(function(E){return r=r.concat(E)}).otherwise(function(E){console.error("dojo/parser::parse() error",
E);throw E;});z.mixin(r,p);return r}};A.parser=g;f.parseOnLoad&&O(100,g,"parse");return g})},"dojo/_base/url":function(){define(["./kernel"],function(u){var A=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,z=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,t=function(){for(var f=arguments,h=[f[0]],k=1;k<f.length;k++)if(f[k]){var l=new t(f[k]+"");h=new t(h[0]+"");if(""==l.path&&!l.scheme&&!l.authority&&!l.query)null!=l.fragment&&(h.fragment=l.fragment),l=h;else if(!l.scheme&&
(l.scheme=h.scheme,!l.authority&&(l.authority=h.authority,"/"!=l.path.charAt(0)))){h=(h.path.substring(0,h.path.lastIndexOf("/")+1)+l.path).split("/");for(var d=0;d<h.length;d++)"."==h[d]?d==h.length-1?h[d]="":(h.splice(d,1),d--):0<d&&(1!=d||""!=h[0])&&".."==h[d]&&".."!=h[d-1]&&(d==h.length-1?(h.splice(d,1),h[d-1]=""):(h.splice(d-1,2),d-=2));l.path=h.join("/")}h=[];l.scheme&&h.push(l.scheme,":");l.authority&&h.push("//",l.authority);h.push(l.path);l.query&&h.push("?",l.query);l.fragment&&h.push("#",
l.fragment)}this.uri=h.join("");f=this.uri.match(A);this.scheme=f[2]||(f[1]?"":null);this.authority=f[4]||(f[3]?"":null);this.path=f[5];this.query=f[7]||(f[6]?"":null);this.fragment=f[9]||(f[8]?"":null);null!=this.authority&&(f=this.authority.match(z),this.user=f[3]||null,this.password=f[4]||null,this.host=f[6]||f[7],this.port=f[9]||null)};t.prototype.toString=function(){return this.uri};return u._Url=t})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(u,A){var z=
{};u.setObject("dojo.date.stamp",z);z.fromISOString=function(t,f){z._isoRegExp||(z._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var h=z._isoRegExp.exec(t);t=null;if(h){h.shift();h[1]&&h[1]--;h[6]&&(h[6]*=1E3);f&&(f=new Date(f),A.forEach(A.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(d){return f["get"+d]()}),function(d,b){h[b]=h[b]||d}));t=new Date(h[0]||1970,h[1]||0,h[2]||1,h[3]||0,h[4]||
0,h[5]||0,h[6]||0);100>h[0]&&t.setFullYear(h[0]||1970);var k=0,l=h[7]&&h[7].charAt(0);"Z"!=l&&(k=60*(h[8]||0)+(Number(h[9])||0),"-"!=l&&(k*=-1));l&&(k-=t.getTimezoneOffset());k&&t.setTime(t.getTime()+6E4*k)}return t};z.toISOString=function(t,f){var h=function(b){return 10>b?"0"+b:b};f=f||{};var k=[],l=f.zulu?"getUTC":"get",d="";"time"!=f.selector&&(d=t[l+"FullYear"](),d=["0000".substr((d+"").length)+d,h(t[l+"Month"]()+1),h(t[l+"Date"]())].join("-"));k.push(d);"date"!=f.selector&&(d=[h(t[l+"Hours"]()),
h(t[l+"Minutes"]()),h(t[l+"Seconds"]())].join(":"),l=t[l+"Milliseconds"](),f.milliseconds&&(d+="."+(100>l?"0":"")+h(l)),f.zulu?d+="Z":"time"!=f.selector&&(t=t.getTimezoneOffset(),f=Math.abs(t),d+=(0<t?"-":"+")+h(Math.floor(f/60))+":"+h(f%60)),k.push(d));return k.join("T")};return z})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(u,A,z,t){return u("dijit.form.Textarea",[t,z],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",
cols:"",buildRendering:function(){this.inherited(arguments);A.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(u,A,z,t,f,h,k){z.add("textarea-needs-help-shrinking",function(){var l=h.body(),d=A.create("textarea",
{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},l,"last"),b=d.scrollHeight>=d.clientHeight;l.removeChild(d);return b});return u("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);
var l=this.textbox;l.style.overflowY="hidden";this.own(f(l,"focus, resize",t.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(k.on("resize",t.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(l){this.inherited(arguments);this.resize()},_estimateHeight:function(){var l=this.textbox;l.rows=(l.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function l(){var O=!1;""===d.value&&(d.value=" ",O=!0);var P=
d.scrollHeight;O&&(d.value="");return P}var d=this.textbox;"hidden"==d.style.overflowY&&(d.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(l()||d.offsetHeight){var b=l()+Math.max(d.offsetHeight-d.clientHeight,0),c=b+"px";c!=d.style.height&&(d.style.height=c,d.rows=1);if(z("textarea-needs-help-shrinking")){var m=l(),g=d.style.minHeight,q=4,v=d.scrollTop;d.style.minHeight=c;for(d.style.height="auto";0<b;){d.style.minHeight=Math.max(b-q,4)+"px";c=l();m-=c;b-=m;if(m<q)break;m=c;q<<=1}d.style.height=
b+"px";d.style.minHeight=g;d.scrollTop=v}d.style.overflowY=l()>d.clientHeight?"auto":"hidden";"hidden"==d.style.overflowY&&(d.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(u,A,z,t){return u("dijit.form.SimpleTextarea",t,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",
postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);z("ie")&&this.cols&&A.add(this.textbox,"dijitTextAreaCols")},filter:function(f){f&&(f=f.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(f){if(this.maxLength){var h=parseInt(this.maxLength),k=this.textbox.value.replace(/\r/g,"");h=k.length-h;if(0<h){var l=this.textbox;if(l.selectionStart){var d=l.selectionStart,
b=0;z("opera")&&(b=(this.textbox.value.substring(0,d).match(/\r/g)||[]).length);this.textbox.value=k.substring(0,d-h-b)+k.substring(d-b);l.setSelectionRange(d-h,d-h)}else this.ownerDocument.selection&&(l.focus(),k=this.ownerDocument.selection.createRange(),k.moveStart("character",-h),k.text="",k.select())}}this.inherited(arguments)}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(u,A,z){return u("dijit.form.RadioButton",[A,z],{baseClass:"dijitRadio"})})},
"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),function(u,A,z,t,f,h){return A("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var k=[];f("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(t.hitch(this,function(l){l.name==this.name&&l.form==this.focusNode.form&&(l=h.getEnclosingWidget(l))&&k.push(l)}));return k},_setCheckedAttr:function(k){this.inherited(arguments);
this._created&&k&&u.forEach(this._getRelatedWidgets(),t.hitch(this,function(l){l!=this&&l.checked&&l.set("checked",!1)}))},_getSubmitValue:function(k){return null==k?"on":k},_onClick:function(k){if(this.checked||this.disabled)return k.stopPropagation(),k.preventDefault(),!1;if(this.readOnly)return k.stopPropagation(),k.preventDefault(),u.forEach(this._getRelatedWidgets(),t.hitch(this,function(b){z.set(this.focusNode||this.domNode,"checked",b.checked)})),!1;var l=!1,d;u.some(this._getRelatedWidgets(),
function(b){return b.checked?(d=b,!0):!1});this.checked=!0;d&&(d.checked=!1);if(!1===this.onClick(k)||k.defaultPrevented)l=!0;this.checked=!1;d&&(d.checked=!0);l?k.preventDefault():this.set("checked",!0);return!l}})})},"widgets/Share/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/ShareLink.html":'\x3cdiv class\x3d"shareLink"\x3e\r\n  \x3cdiv class\x3d"shareLinkOptionsWrapper displaynone"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"backBtn" class\x3d"backBtn"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"linkOptionsTitle"\x3e${nls.linkOptions}\x3c/div\x3e\r\n    \x3cdiv class\x3d"subTitle"\x3e${nls.linkOptionsUrlParameters}\x3c/div\x3e\r\n    \x3cform data-id\x3d"shareOptionsRadios" data-dojo-attach-point\x3d"shareOptionsRadios"\x3e\r\n      \x3cfieldset\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"currentMapExtent" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"currentMapExtent" data-dojo-type\x3d"dijit.form.RadioButton" data-dojo-props\x3d\'checked:true\' checked\x3e\r\n          \x3cdiv class\x3d"labels" data-forid\x3d"currentMapExtent"\x3e${nls.currentMapExtent}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow" data-dojo-attach-point\x3d"chooseCenterWithLevelRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"chooseCenterWithLevel" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"chooseCenterWithLevel" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels" data-forid\x3d"chooseCenterWithLevel"\x3e${nls.chooseCenterWithLevel}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore chooseCenterWithLevel_optionsMore"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"chooseCenterWithLevel_marker" class\x3d"markers"\x3e\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"chooseCenterWithLevel_levels" class\x3d"shareSelects" style\x3d"display: none !important;" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"chooseCenterWithScale" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"chooseCenterWithScale" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.chooseCenterWithScale}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore chooseCenterWithScale_optionsMore"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"chooseCenterWithScale_marker" class\x3d"markers"\x3e\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"chooseCenterWithScale_scales" class\x3d"shareSelects" style\x3d"display: none !important;" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"optionsRow" data-dojo-attach-point\x3d"findLocationRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"findLocation" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"findLocation" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.findLocation}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore findLocation_optionsMore"\x3e\r\n            \x3cdiv class\x3d"moreOptions"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"findLocation_input" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.findLocation_inputPlaceholder}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"queryFeature" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"queryFeature" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.queryFeature}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore queryFeature_optionsMore"\x3e\r\n            \x3cdiv class\x3d"moreOptions"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"queryFeature_layer" name\x3d"queryFeature_layer" class\x3d"queryFeature_layer"\x3e\x3c/div\x3e\r\n              \x3cselect data-dojo-attach-point\x3d"queryFeature_field" name\x3d"queryFeature_field" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n              \x3cselect data-dojo-attach-point\x3d"queryFeature_value" name\x3d"queryFeature_value" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"addMarker" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"addMarker" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.addMarker}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore addMarker_optionsMore"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"addMarker_marker" class\x3d"markers"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"moreOptions addMarker_moreOptions"\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.WKID}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_spatialReference" name\x3d"spatialReference" data-dojo-type\x3d"dijit.form.TextBox"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.popupTitle}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_title" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.addMarker_titlePlaceholder}"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.symbol}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_symbolURL" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.addMarker_symbolURL}"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.label}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_label" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.addMarker_label}"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow displaynone"\x3e\r\n                \x3clabel\x3e${nls.zoomLevel}\x3c/label\x3e\r\n                \x3cdiv class\x3d"table-for-select"\x3e\r\n                  \x3cselect data-dojo-attach-point\x3d"addMarker_level" name\x3d"addMarker_level" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/fieldset\x3e\r\n    \x3c/form\x3e\r\n\r\n    \x3cfieldset\x3e\r\n      \x3cdiv class\x3d"optionsRow shareClearFix"\x3e\r\n        \x3cinput data-id\x3d"share-options-overwirteMobileLayout" data-dojo-attach-point\x3d"overwirteMobileLayout" class\x3d"shareCheckBoxes jimu-float-leading" data-dojo-type\x3d"dijit.form.CheckBox" type\x3d"checkbox"\x3e\r\n        \x3cdiv class\x3d"labels"\x3e${nls.overwirteMobileLayout}\x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsMore share-options-overwirteMobileLayout_optionsMore"\x3e\r\n          \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d"true"\r\n                 data-dojo-attach-point\x3d"mobileLayout" data-dojo-props\x3d\'style:{width:"100px"}, constraints:{min:300}\'/\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"optionsRow shareClearFix"\x3e\r\n        \x3cinput data-id\x3d"share-options-language" data-dojo-attach-point\x3d"setlanguage" class\x3d"shareCheckBoxes jimu-float-leading" data-dojo-type\x3d"dijit.form.CheckBox" type\x3d"checkbox"\x3e\r\n        \x3cdiv class\x3d"labels"\x3e${nls.language}\x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsMore share-options-language_optionsMore"\x3e\r\n          \x3cselect data-dojo-attach-point\x3d"setlanguage_languages" class\x3d"shareSelects" style\x3d"display:inline-block;" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"optionsRow shareClearFix" style\x3d"display: none;"\x3e\r\n        \x3cinput data-id\x3d"share-options-auth" data-dojo-attach-point\x3d"auth" class\x3d"shareCheckBoxes jimu-float-leading" data-dojo-type\x3d"dijit.form.CheckBox" type\x3d"checkbox"\x3e\r\n        \x3cdiv class\x3d"labels"\x3e${nls.auth}\x3c/div\x3e\r\n        \x3cdiv  class\x3d"optionsMore share-options-auth_optionsMore"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"authtoken" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true\'/\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \r\n      \x3cdiv class\x3d"optionsRow shareClearFix"\x3e\r\n        \x3cdiv class\x3d"subTitle"\x3e${nls.linkPreview}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"preview" class\x3d"preview inputsText" data-dojo-type\x3d"dijit/form/SimpleTextarea" data-dojo-props\x3d\'required:true,readOnly:true\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"shareUrlsWrapper"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"Text"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"linkShare" data-dojo-attach-point\x3d"LinkShareContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"LinkText" class\x3d"subTitle linkToApp"\x3e${nls.shareLinkText}\x3c/div\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"_linkUrlTextBox" class\x3d"shareLinkUrl inputsText" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d\'required:true,readOnly:true\'/\x3e\r\n      \x3cdiv class\x3d"shareClearFix"\x3e\r\n        \x3cspan class\x3d"optionsText jimu-float-leading" data-dojo-attach-point\x3d"linkOptions"\x3e${nls.linkOptions}\x3c/span\x3e\r\n        \x3cdiv class\x3d"shareLinkIcons jimu-float-trailing" data-dojo-attach-point\x3d"socialNetworkLinks"\x3e\r\n            \x3ca class\x3d"socialNetworkIcons email" data-dojo-attach-point\x3d"emailShare" title\x3d"${nls.shareEmail}"\x3e\x3c/a\x3e\r\n          \x3cdiv class\x3d"socialNetworkIcons facebook" data-dojo-attach-event\x3d"click:_toFacebook" data-dojo-attach-point\x3d"FacebookShare" title\x3d"${nls.shareFacebook}"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"socialNetworkIcons twitter" data-dojo-attach-event\x3d"click:_toTwitter" data-dojo-attach-point\x3d"TwitterShare" title\x3d"${nls.shareTwitter}"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"socialNetworkIcons googlePlus" data-dojo-attach-point\x3d"googlePlusShare" title\x3d"${nls.shareGooglePlus}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"embedShare" data-dojo-attach-point\x3d"EmbedShareContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"embedText" class\x3d"subTitle"\x3e${nls.embed}\x3c/div\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"_embedCodeTextArea" class\x3d"shareEmbedCode inputsText" data-dojo-type\x3d"dijit/form/SimpleTextarea" data-dojo-props\x3d\'required:true,readOnly:true\'/\x3e\r\n      \x3cdiv class\x3d"moreOptions" data-dojo-attach-event\x3d"click:_moreOptionsExpandCollapse"\x3e\r\n        \x3cdiv class\x3d"moreOptionsIcon" data-dojo-attach-point\x3d"MoreOptionsIcon"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsText"\x3e${nls.more}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"MoreOptionsContainer" class\x3d"moreOptionsContainer inputsText displaynone"\x3e\r\n        \x3cdiv class\x3d"sizeSelect" data-dojo-attach-point\x3d"SizeSelect"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"customSize disable" data-dojo-attach-point\x3d"CustomSizeContainer"\x3e\r\n          \x3cdiv class\x3d"timesConnector"\x3eX\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"shareTips" data-dojo-attach-point\x3d"shareTips"\x3e\r\n      \x3c!--\x3cdiv class\x3d"infoIcon"\x3e\x3c/div\x3e--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"shareTipsText" class\x3d"shareTipsText"\x3e${nls.shareToWebTips}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Share/Widget.html":'\x3cdiv style\x3d"width:100%;min-width:230px;min-height:245px;"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"container"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"*now":function(u){u(['dojo/i18n!*preload*widgets/Share/nls/Widget*["ar","bg","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang jimu/BaseWidget jimu/portalUrlUtils jimu/shareUtils jimu/dijit/ShareLink jimu/utils jimu/dijit/LoadingShelter jimu/dijit/Message".split(" "),function(u,A,z,t,f,h,k,l,d){return u([z],{name:"Share",baseClass:"jimu-widget-share share-container",_isShowFindLocation:!0,onOpen:function(){this.widgetManager.activateWidget(this);f.getItemShareInfo(this.appConfig.portalUrl).then(A.hitch(this,function(b){b=f.isSharedToPublic(b);if(this.shareLink&&this.shareLink.onShareToPublicChanged&&
!0===this.shareLink.HAS_INIT_URL)this.shareLink.onShareToPublicChanged(b)}))},onClose:function(){if(this.shareLink)this.shareLink.onCloseContainer()},onDeActive:function(){},_disableWebMapPopup:function(){},_enableWebMapPopup:function(){},postCreate:function(){this.inherited(arguments);this.shelter=new l({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup()},startup:function(){this.inherited(arguments);this.shelter.show();this._isShowFindLocation=this._findSearchWidget(this.appConfig);
f.getItemShareInfo(this.appConfig.portalUrl).then(A.hitch(this,function(b){this.shareLink=new h({portalUrl:this.appConfig.portalUrl,appTitle:this.appConfig.title,isOnline:t.isOnline(k.getAppHref()),isShowSocialMediaLinks:!0,isSharedToPublic:f.isSharedToPublic(b),isShowBackBtn:!1,config:this.config,isShowFindLocation:this._isShowFindLocation});this.shareLink.placeAt(this.container)}),A.hitch(this,function(b){new d({message:b.message})})).always(A.hitch(this,function(){this.shelter.hide()}))},onAppConfigChanged:function(b){this._isShowFindLocation=
this._findSearchWidget(b);this.shareLink&&this.shareLink.updateShareLinkOptionsUI&&this.shareLink.updateShareLinkOptionsUI({isShowFindLocation:this._isShowFindLocation})},_findSearchWidget:function(b){b=b.getConfigElementsByName("Search");return 0<b.length&&b[0].visible}})});