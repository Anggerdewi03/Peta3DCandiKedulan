//>>built
require({cache:{"fx3d/views/3d/support/fx3dUtils":function(){define("dojo/_base/array dojox/validate/regexp esri/core/mathUtils esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/mat4f64 esri/core/libs/gl-matrix-2/vec3 esri/core/libs/gl-matrix-2/mat4 ../webgl-engine-extensions/constraints dojo/text!../effects/config.json".split(" "),function(b,a,g,u,l,k,f,d,r){u=u.vec3f64;l=l.mat4f64;k=k.vec3;f=f.mat4;var m=g.deg2rad(1),p=g.rad2deg(1),w=u.fromValues(0,0,1),D=k.normalize(u.fromValues(1,
1,1),u.fromValues(1,1,1)),G=l.create(),x=u.create(),t=u.create(),z=u.create(),H=u.create();r=JSON.parse(r);var v;window.fx3d={version:"1.2.3",description:"javascript library for 3D data visualization",copyright:"Esri R\x26D Center Beijing"};var F={layerId:"3dfx-",enableAddTesting:!0,debug_timeCost:!0,debug_showPoint:!1,debug_clearEarth:!1,KeySplit:"$",NotFound:"NULL",CSVDateFileSuffix:"_dates",DataFormatNotSupported:"not-supported",DateToValueOfTime:-1,wgs84ToSphericalEngineCoords:function(c,h,q,
E){var C=d.EARTH_RADIUS+c[h+2],I=m*c[h+1];c=m*c[h];h=Math.cos(I);q[E++]=Math.cos(c)*h*C;q[E++]=Math.sin(c)*h*C;q[E]=Math.sin(I)*C},sphericalEngineCoordsToWGS84:function(c,h,q,E){var C=c[h],I=c[h+1],e=c[h+2];C=Math.sqrt(C*C+I*I+e*e);I=g.asinClamped(c[h+2]/C);c=(0<c[h+1]?1:-1)*g.acosClamped(c[h]/(Math.cos(I)*C));q[E++]=p*c;q[E++]=p*I;q[E]=C-d.EARTH_RADIUS},wgs84ToWebMerc:function(c,h,q,E){var C=.4999999*Math.PI,I=m*c[h+1];I=F.clamp(I,-C,C);C=Math.sin(I);q[E++]=m*c[h]*d.EARTH_RADIUS;q[E++]=d.EARTH_RADIUS/
2*Math.log((1+C)/(1-C));q[E]=c[h+2]},webMercToWGS84:function(c,h,q,E){q[E++]=p*(c[h++]/d.EARTH_RADIUS);q[E++]=p*(Math.PI/2-2*Math.atan(Math.exp(-1*c[h++]/d.EARTH_RADIUS)));q[E]=c[h]},clamp:function(c,h,q){return c<h?h:c>q?q:c},checkTimeSlider:function(c){var h=null;return c instanceof Array&&b.some(c,function(q){if(q.attributes.pointId===F.DateToValueOfTime){h={};for(var E in q.attributes)E.startWith("valueOfTime")&&(h[E]=q.attributes[E]);return!0}}),h},isDigit:function(c){return null!==/^-?\d+\.?\d*$/.exec(c)&&
""!==c},rgba2float:function(c){return c[0]/256+c[1]/65536+c[2]/16777216},endsWith:function(c,h){return-1!==c.indexOf(h,c.length-h.length)},mod:function(c,h){var q;return q=parseInt(c/h,10),c-=q*h,0>c&&(c+=h),c},nextHighestPowerOfTwo:function(c){--c;for(var h=1;32>h;h<<=1)c|=c>>h;return c+1},isPowerOfTwo:function(c){return 0===(c&c-1)&&0!==c},doubleTo2Floats:function(c){var h,q,E;return 0<=c?(E=65536*Math.floor(c/65536),h=E,q=c-h):(E=65536*Math.floor(-c/65536),h=-E,q=c+E),[h,q]},vec3DoubleTo2Floats:function(c){if(c instanceof
Array){for(var h=[],q=0;q<c.length;q++)h.push(this.doubleTo2Floats(c[q]));return h}},littleEndian:function(){var c=new ArrayBuffer(2);return(new DataView(c)).setInt16(0,256,!0),256===(new Int16Array(c))[0]}(),Log:{Info:0,Warn:1,Error:2,msg:function(c,h,q){if("number"==typeof c&&"string"==typeof h&&"string"==typeof q)switch(c){case this.Info:console.info(h+": "+q);break;case this.Warn:console.warn(h+": "+q);break;case this.Error:console.error(h+": "+q)}}},ExpDataSourceType:{CSV:"csv",FeatureServer:"featureserver",
Grib2:"grib2",Volume:"volume"},EffectType:{AreaExtrude:"AreaExtrude",DensityMesh:"DensityMesh",PointExtrude:"PointExtrude",Bounce:"Bounce",Pulse:"Pulse",Fireball:"Fireball",JetTrail:"JetTrail",LineBox:"LineBox",Worm:"Worm",HeatLine:"HeatLine",DensityWall:"DensityWall",HeatGrid:"HeatGrid",Current:"Current",Cascade:"Cascade",Volume:"Volume"},EffectDataFormat:{AreaExtrude:{keyFields:["boundaryId"],checkRules:["multi time values"]},DensityMesh:{keyFields:["areaId"],checkRules:["multi time values"]},PointExtrude:{keyFields:["pointId"],
checkRules:["multi time values"]},Bounce:{keyFields:["pointId"],checkRules:["multi time values"]},Pulse:{keyFields:["pointId"],checkRules:["single time value"]},Fireball:{keyFields:["pointId","pathId"],checkRules:["single time value"]},JetTrail:{keyFields:["pointId","pathId"],checkRules:["single time value"]},LineBox:{keyFields:["pointId","pathId"],checkRules:["single time value"]},Worm:{keyFields:["pointId","pathId"],checkRules:["single time value"]},HeatLine:{keyFields:["pointId","pathId"],checkRules:["multi time values"]},
DensityWall:{keyFields:["pointId","pathId"],checkRules:["multi time values"]},HeatGrid:{keyFields:["gfs"],checkRules:["multi time values"]},Current:{keyFields:["gfs"],checkRules:["multi time values"]},Cascade:{keyFields:["pointId","pathId"],checkRules:["multi time values"]}},EffectDataType:{AreaType:["DensityMesh"],BoundaryType:["AreaExtrude"],PathType:"Cascade Fireball JetTrail LineBox Worm HeatLine DensityWall".split(" "),PointType:["PointExtrude","Bounce","Pulse"],GfsType:["HeatGrid","Current"],
VolumeType:["Volume"]},getLayerTypeOfVolume:function(c){switch(c){case "Q":return 1;case "N":case "N2":return 2;case "P2s":return 3;case "P1x":return 4;case "P1s":return 5;case "C2t":case "C3t":return 6;case "C2b":return 7;case "O1l":case "O1+2":return 8}return 0},groupLayerType:function(c){var h,q;for(h in c)if("N"===h)for(q in c)"N2"===q&&delete c[q];else if("N2"===h)for(q in c)"N"===q&&delete c[q];else if("O1l"===h)for(q in c)"O1+2"===q&&delete c[q];else if("O1+2"===h)for(q in c)"O1l"===q&&delete c[q];
else if("C2t"===h)for(q in c)"C3t"===q&&delete c[q];else if("C3t"===h)for(q in c)"C2t"===q&&delete c[q]},addTestEffect:function(c,h){if("string"==typeof c&&"string"==typeof h){var q;"point"===h?q=this.EffectDataType.PointType:"area"===h?q=this.EffectDataType.AreaType:"path"===h?q=this.EffectDataType.PathType:"boundary"===h?q=this.EffectDataType.BoundaryType:"gfs"===h?q=this.EffectDataType.GfsType:"volume"===h&&(q=this.EffectDataType.Volume);q instanceof Array&&(this.EffectType[c]=c,q.push(c))}},TypeCheckResult:{NOT_MATHCH:1,
TYPE_FIELD_MISSED:2,ALL_FIELDS_MISSED:3,ITEM_VALUE_INVALID:4,SUCCESS:100,SUCCESS_AreaType:101,SUCCESS_BoundaryType:102,SUCCESS_PathType:103,SUCCESS_PointType:104,SUCCESS_GfsType:105,SUCCESS_VolumeType:106},pairCheck:function(c,h){if("string"==typeof c&&"string"==typeof h)for(var q=this.EffectDataType[c],E=0;E<q.length;E++)if(q[E]===h)return this.TypeCheckResult["SUCCESS_"+c];return this.TypeCheckResult.NOT_MATHCH},checkDataEffect:function(c,h){var q=this.TypeCheckResult.SUCCESS;if(c instanceof Array){for(var E=
q=!1,C=!1,I=!1,e=!1,B=0;B<c.length;B++)q||"pointid"!=c[B].toLowerCase()||(q=!0),E||"pathid"!=c[B].toLowerCase()||(E=!0),C||"areaid"!=c[B].toLowerCase()||(C=!0),I||"boundaryid"!=c[B].toLowerCase()||(I=!0),e||"bhid"!=c[B].toLowerCase()||(e=!0);q=!C||I||E||!q||e?C||!I||E||!q||e?C||I||!E||!q||e?C||I||E||!q||e?C||I||E||q||!e?this.TypeCheckResult.TYPE_FIELD_MISSED:this.pairCheck("VolumeType",h):this.pairCheck("PointType",h):this.pairCheck("PathType",h):this.pairCheck("BoundaryType",h):this.pairCheck("AreaType",
h)}else q=this.TypeCheckResult.ALL_FIELDS_MISSED;return q},GFSDataGroupLen:{HeatGrid:1,Current:2},checkEffectGFSPair:function(c,h){return"number"==typeof c&&"string"==typeof h&&c===this.GFSDataGroupLen[h]},isInforAttrChanged:function(c,h){function q(I,e){var B,M=!1;if("function"==typeof I&&"function"==typeof e||I instanceof Date&&e instanceof Date||I instanceof RegExp&&e instanceof RegExp||I instanceof String&&e instanceof String||I instanceof Array&&e instanceof Array||I instanceof Number&&e instanceof
Number)I.toString()!==e.toString()&&0<e.toString().length&&(M=!0);else if("object"==typeof I&&"object"==typeof e){if(null!==e)for(B in e)if(I.hasOwnProperty(B)){if(E.push(I),C.push(e),q(I[B],e[B])){M=!0;I[B]=e[B];break}E.pop();C.pop()}}else isNaN(I)&&isNaN(e)&&"number"==typeof I&&"number"==typeof e&&(M=!1),I!==e&&(M=!0);return M}var E,C;return E=[],C=[],q(c,h)},ColorUtil:{_colors:[],_pos:[],_min:0,_max:1,setColors:function(c){var h,q;if(c||(c=[[220,220,220],[20,20,20]]),this._colors=[],this._pos=
[],c instanceof Array){c=c.slice(0);for(h=0;h<c.length;h++)if(col=c[h],col instanceof Array){for(q in col)0>col[q]&&(col[q]=0),255<col[q]&&(col[q]=255);this._colors.push(col)}for(h=0;h<this._colors.length;h++)this._pos.push(h/(this._colors.length-1))}},getColor:function(c){var h;var q=(c-this._min)/(this._max-this._min);q=Math.min(1,Math.max(0,q));for(c=0;c<this._pos.length;c++){if(h=this._pos[c],q<=h){var E=this._colors[c];break}if(q>=h&&c===this._pos.length-1){E=this._colors[c];break}if(q>h&&q<
this._pos[c+1]){var C=this._colors[c];var I=this._colors[c+1];C instanceof Array&&I instanceof Array||(E=[123,123,123]);q=(q-h)/(this._pos[c+1]-h);(!q||0>q)&&(q=.5);E=[C[0]+q*(I[0]-C[0]),C[1]+q*(I[1]-C[1]),C[2]+q*(I[2]-C[2])];break}}return[E[0],E[1],E[2]]}},_clampBlackColor:function(c){if(c instanceof Array){var h=c[0],q=c[1];q=q&&10>q[0]&&10>q[1]&&10>q[2];if(h&&10>h[0]&&10>h[1]&&10>h[2]&&q)return[[10,10,10],[10,10,10]]}return c},createColorBarTexture:function(c,h,q){c=c||32;h=h||1;v||(v=document.createElement("canvas"));
v.width=c;v.height=h;var E,C=v.getContext("2d"),I=C.createImageData(c,h),e=0;F.ColorUtil.setColors(q);for(q=0;q<h;q++)for(E=0;E<c;E++){var B=E/(c-1);B=F.ColorUtil.getColor(B);I.data[e++]=B[0];I.data[e++]=B[1];I.data[e++]=B[2];I.data[e++]=255}return C.putImageData(I,0,0),v},CatmullRomUtil:{getPoints:function(c,h){c||(c=10);for(var q=[],E=0;E<=c;E++)q.push(this._getPoint(E/c,h));return q},_getPoint:function(c,h){var q,E,C,I=[];c*=h.length-1;var e=Math.floor(c);c-=e;I[0]=0===e?e:e-1;I[1]=e;I[2]=e>h.length-
2?h.length-1:e+1;I[3]=e>h.length-3?h.length-1:e+2;e=h[I[0]];var B=h[I[1]],M=h[I[2]];h=h[I[3]];return q=this._interpolate(c,e[0],B[0],M[0],h[0]),E=this._interpolate(c,e[1],B[1],M[1],h[1]),C=this._interpolate(c,e[2],B[2],M[2],h[2]),[q,E,C]},_interpolate:function(c,h,q,E,C){h=.5*(E-h);C=.5*(C-q);var I=c*c;return(2*q-2*E+h+C)*c*I+(-3*q+3*E-2*h-C)*I+h*c+q}},createTextTexture:function(c,h,q,E,C,I){v||(v=document.createElement("canvas"));var e=v.getContext("2d");e.font=h+"px "+C;var B,M,Q=function(T){var N=
T.ownerDocument;T=T.getBoundingClientRect();var L=N.body,K=N.documentElement;N=null!=N&&N==N.window?N:9===N.nodeType&&(N.defaultView||N.parentWindow);return{top:T.top+(N.pageYOffset||K.scrollTop||L.scrollTop)-(K.clientTop||L.clientTop||0),left:T.left+(N.pageXOffset||K.scrollLeft||L.scrollLeft)-(K.clientLeft||L.clientLeft||0)}};Q=function(T){for(var N=1;N<T;)N*=2;return N};var U=function(T,N,L,K){N=N.replace("\n"," ");var y,n,A=N,O=0,S=0,Y=N.split(" ");for(N=n=Y.length;T.measureText(A).width>L&&1<
N;){N--;A=y="";for(var ba=0;ba<n;ba++)ba<N?(A+=Y[ba],ba+1<N&&(A+=" ")):(y+=Y[ba],ba+1<n&&(y+=" "))}return K.push(A),S=T.measureText(A).width,y&&(O=U(T,y,L,K),O>S&&(S=O)),S},P=512,W=[];switch(P&&e.measureText(c).width>P?(P=U(e,c,P,W),B=Q(P)):(W.push(c),B=Q(e.measureText(c).width)),M=Q(h*(W.length+1)),B<M&&(B=M),v.width=B,v.height=M,E){case "left":var R=0;break;case "center":R=B/2;break;case "right":R=B}c=M/2;e.fillStyle=I;e.fillRect(0,0,e.canvas.width,e.canvas.height);e.fillStyle=q;e.textAlign=E;e.textBaseline=
"middle";e.font=h+"px "+C;Q=.5*(M-h*(W.length+1));for(q=0;q<W.length;q++)1<W.length&&(c=(q+1)*h+Q),e.fillText(W[q],R,c);return v},createLinearHaloTexture:function(c,h){c instanceof Array&&3===c.length||(c=[255,255,255]);h instanceof Array&&3===h.length||(h=[255,255,0]);v||(v=document.createElement("canvas"));v.width=128;v.height=2;var q=v.getContext("2d"),E=q.createLinearGradient(0,1,v.width,1);c="rgba("+c[0]+","+c[1]+","+c[2]+",1.0)";h="rgba("+h[0]+","+h[1]+","+h[2]+",0.05)";return E.addColorStop(0,
h),E.addColorStop(.4,c),E.addColorStop(.6,c),E.addColorStop(1,h),q.fillStyle=E,q.fillRect(0,0,v.width,v.height),v},createRadialTexture:function(c,h){c instanceof Array&&3===c.length||(c=[255,255,255]);h instanceof Array&&3===h.length||(h=[0,0,0]);v||(v=document.createElement("canvas"));v.width=256;v.height=256;var q=v.getContext("2d"),E=[.5*v.width,.5*v.height];E=q.createRadialGradient(E[0],E[1],0,E[0],E[1],.5*Math.min(v.height,v.width));h="rgba("+h[0]+","+h[1]+","+h[2]+",1.0)";return E.addColorStop(0,
"rgba("+c[0]+","+c[1]+","+c[2]+",1.0)"),E.addColorStop(.5,h),E.addColorStop(1,"rgba(0, 0, 0, 0.0)"),q.fillStyle=E,q.fillRect(0,0,v.width,v.height),q.fillRect(0,0,v.width,v.height),v},rgb2hexExt:function(c){return c instanceof Array&&3===c.length?"#"+("0"+parseInt(c[0],10).toString(16)).slice(-2)+("0"+parseInt(c[1],10).toString(16)).slice(-2)+("0"+parseInt(c[2],10).toString(16)).slice(-2):"#000000"},toPercent:function(c){return(100*parseFloat(c)).toString()+"%"},updateColorBar:function(c,h,q,E){if(c&&
q instanceof Array&&h instanceof Array){var C=h.length;h="bottom: 4px;right: 4px;font-size: 12px;";E?(h+="width: "+60*C+"px;",h+="height: 80px;"):(h+="width: 80px;",h+="height: "+50*C+"px;");c.style.cssText="position: absolute; display: block; z-index: 110; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.5); border-width: 0px; border-radius: 1px; border-style: solid; border-color: rgba(255,255,255,0.3); -webkit-box-shadow: 0 1px 1px rgba(0,0,0,0.05); box-shadow: 0 1px 1px rgba(0,0,0,0.05);";
c.style.cssText+=h;h=document.createElement("canvas");E?(h.height=.4*c.clientHeight,h.width=c.clientWidth):(h.height=c.clientHeight,h.width=.4*c.clientWidth);C=h.getContext("2d");var I=null;I=E?C.createLinearGradient(0,0,h.width,h.height):C.createLinearGradient(0,0,0,h.height);for(var e=0;e<q.length;e++)!(q[e]instanceof Object)||null===q[e].step&&null==q[e].step||null===q[e].color&&null==q[e].color||I.addColorStop(q[e].step,this.rgb2hexExt(q[e].color));C.fillStyle=I;C.fillRect(0,0,h.width,h.height);
C=document.getElementById("3dexpColorBar");C.src=h.toDataURL();C.style.width=h.width+" px";C.style.height=h.height+" px";C=document.getElementsByClassName("3dexpSpanLabel");if(c&&0<C.length)for(;0<C.length;)c.removeChild(C[0]);for(C=0;C<q.length;C++)!(q[C]instanceof Object)||null===q[C].label&&null==q[C].label||null===q[C].step&&null==q[C].step||(I=document.createElement("span"),I.className="3dexpSpanLabel",I.style.cssText="position: absolute; left: 46px; font-family: 'Arial', sans-serif; font-size: 12px; color: #e0e0e0; font-style: italic;",
E?(I.style.cssText+="top: "+1.5*h.height+"px",I.style.cssText+="left: "+this.toPercent(.99<q[C].step?q[C].step-.14:q[C].step)+";"):(I.style.cssText+="left: "+1.5*h.width+"px",I.style.cssText+="top: "+this.toPercent(.99<q[C].step?q[C].step-.06:q[C].step)+";"),I.innerHTML="\x3cspan\x3e"+q[C].label+q[C].unit+"\x3c/span\x3e",c.appendChild(I))}},createColorBar:function(){var c=document.createElement("div");document.body.appendChild(c);var h=document.createElement("img");return h.id="3dexpColorBar",c.appendChild(h),
c},showColorBar:function(c,h){c&&(h?c.style.display="block":c.style.display="none")},isEqual:function(c,h){function q(I,e){var B;if(null===I&&null===e||"undefined"==typeof I&&"undefined"==typeof e)return!0;if(null===I&&null!==e||null===e&&null!==I||"undefined"==typeof I&&"undefined"!=typeof e||"undefined"==typeof e&&"undefined"!=typeof I)return!1;if(isNaN(I)&&isNaN(e)&&"number"==typeof I&&"number"==typeof e||I===e)return!0;if("function"==typeof I&&"function"==typeof e||I instanceof Date&&e instanceof
Date||I instanceof RegExp&&e instanceof RegExp||I instanceof String&&e instanceof String||I instanceof Number&&e instanceof Number)return I.toString()===e.toString();if(-1<E.indexOf(I)||-1<C.indexOf(e))return!1;if(null!==e){for(B in e)if(e.hasOwnProperty(B)!==I.hasOwnProperty(B)||typeof e[B]!=typeof I[B])return!1;for(B in I){if(e.hasOwnProperty(B)!==I.hasOwnProperty(B)||typeof e[B]!=typeof I[B])return!1;switch(typeof I[B]){case "object":case "function":if(E.push(I),C.push(e),!q(I[B],e[B]))return!1;
E.pop();C.pop();break;default:if(I[B]!==e[B])return!1}}}return!0}var E,C;return E=[],C=[],!!q(c,h)},equals:function(c,h){var q,E;return c===h||typeof c==typeof h&&("object"==typeof c?c.constructor===c.constructor&&(c instanceof Array?c.length===h.length&&c.every(function(C,I){return equals(C,h[I])}):c instanceof RegExp?c.toString()===h.toString():(q=Object.keys(c),E=Object.keys(h),q.length===E.length&&q.every(function(C){return equals(c[C],h[C])}))):"function"==typeof c?c.toString()===h.toString():
c===h)},isUrl:function(c){var h="^"+a.url({allowNamed:!0,allowLocal:!0});return(new RegExp(h,"g")).test(c)},_isRequiredTypesIn:function(c,h){var q=0;return b.forEach(h,function(E){for(var C=0;C<c.length;C++)c[C].type!=E||q++}),h.length===q},availableVizTypes:function(c,h){return(c=r[c])?c:[]},effectConfig:function(c){var h=Object.getOwnPropertyNames(r),q=null;return b.some(h,function(E){return b.some(r[E],function(C){if(c.toLowerCase()===C.name.toLowerCase())return q=C,!0})}),q},extensionsMessage:function(){var c=
document.createElement("div");c.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+J+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";c.style.position="fixed";c.style.top="0";c.style.width="100%";c.style.color="#ff0000";c.style.zIndex=1E6;document.body.appendChild(c)},sortHelper:function(c,h,q){return c===h?0:c<h?q?1:-1:
c>h?q?-1:1:0},spriteImg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxQzIyMkFCODFFMjA2ODExODNEMTgzRDNCQjcwNzU3NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3QTc4QjM3QTI0OTAxMUU2ODFGMjk2MjI2NkE0Q0FCMiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3QTc4QjM3OTI0OTAxMUU2ODFGMjk2MjI2NkE0Q0FCMiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUMyMjJBQjgxRTIwNjgxMTgzRDE4M0QzQkI3MDc1NzQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUMyMjJBQjgxRTIwNjgxMTgzRDE4M0QzQkI3MDc1NzQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5DNIzlAABfxElEQVR42uy9WZPkSJIeaGqAR0QedXR1T0+T3JndEcrKCsmVlX3lC388fwRnH1Yo2xSSc3edmRkRDpiumanaCTPAAHePjOwyK4nKCHcADsChqp9+egEiir766uvXuWS/BX311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX3198Wv84w9bm6D+gd0HxuYXd3x25TTggvNcO27Tu203AbB+H+Cm3zBc+qWVjwGlveEqF4OHH5flkfCix+/mX84tV5s8jF0HXv97d3KAUH3q4IbPGlxBflaPAeX3YK+Ab9377ICIl3+P2B/trgCuLfDQchDWBRD/sbILXO2aUkOABeGGgwIEjYqh5ZgtSgsK+hR3qhm4Bi7tCuDPSejhckUB+7ZvEfprIk+04BwWlh2W+mlTQKBB3GADk+KB68YKNIFt4L8p5fBrVgbjr1Lo94kZNL4BFavfqgxu5RZsCV3kwa8qiTV5gh3bHLHCC9RQ9K4KqApbjo9Fc4BdAfw5w3u42B24ZLuaMOy1yrAB5VEc50hlYS/cgPG4UykcheZQQAO48zvADRGHX4MiGH9VQl9+B/YeD/YqGgwPLLYJvvv3UncBrnjvzKlLSAUCM2Hc8u+hwQ63cBNY+GXx2VhGP0ukAE3KCbsC+FKF/pgDAA0fsHmMqhsARdgNC1jeKj4tAHf/MVoRCWRE4xH/fo+LAFt2HOv3tCbMUOMb/py5gvHPR+hha0s4qkRgWwCq++O2IED13+vQgqkOuiytYy2CsOfIa67CljuBsYlfuefpsbBZmB2iaXEpsCuAV2Dl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CqJE8rUn/kCS1tsSVgSs8xJ5M48tZZEKnm+7kXQMqoUn11qe733o4nODBn99FRX4PmC4VAI7j7umBLYU1jbvUE5tWx8Uus0HvCrBf00KoEkR7BD4xXsbKb2lqDxA+QFZt9zYTEK2wP9YGUEForfCcmx8KNeCm3tj3EvSDG3TEKi00gKxj1EP+yz3VDuE78iE3erwG/hCBP81KoC9imBVGUC7osAEBItijHerJ0HV8kcoBjLbgqtEG1bDpwt+YtPSQzLFqJWfaR3BttfCYoXEKyUmtR//eorrMApYuWkoXukaxetdLdN/F9tA2/4Li5+RV7nLsKl0cFsRbNcU5FThuhLMQ4uljLZm6B9mb1Zh9ZoL1Y4IsNi5pxUFrMP7ddx1iyy9Lwbqf4kKoFkRQCMqWLwPdXSAdSRQPl7bXOOjAyzLyAEWCuOwAqgYMBQNpdB7/O2oZ0CpmErtIPD2ps7uF+66Ct7sOAziy1ij+HJWS+Rgy1rngrNat7DSMbaZTMSWMGOLQAbYDI0CckQBtEL//dY1gv0c/0e8TKHUPqelLfiR9/DAfegK4DO6B0vhhP18QsEdKPl9LSHFkudbhrxl/3/dBaj9np78lhsAWIfdRx5+zK6pHc7v/5wlosArQHVcmT74BQv+l64AWq39PmRQcRWcUFRKhKv74naTk3JUHzZh+VbaqhDH0lBLnwcXC2Qd3quGe7M3t34rFoMHr+nPSvD/XBTAPmVQTkZpjjZsDJFYcwvaG5vCzWD4HuHHnWwFVoS7ul3TyPhtf79tMgNeqBzrGYKiK4AvyUUAITb6xG+iA4y2ySDCnszFMnLIpw+V3sEdDyVUmfbq+UJ9dt5Ra3iUh9gJ1Re9yFuyMvAK19cVwBeDCrDJq92FDnCDH2iy+ssmpVjAAulZx21B9vvQrT4+iFIfwn2CsQfeH4fhAEeQwK9S6H9NCqD+ZZZ6Ee3gBSow1m+3Mjxliwis9xssh/6uIUhrVXdw8XG2XZJbWWJcvdO/UqH/tSqA8hedwu69D0d7tmLdTWhJsnFjQ3OlhVVrCk3KR6yglaMt17eU0kXCvpLk0XbcuvP1q1y/ZgVwRLCP7Iebj99aglECc/eNbL8IUu+7J9ew7tgquyJrbYaXf9+iK4C+9vIARxTCnhqDvedwtYcayhKGV76vu/aBl//cX8UCxH5v+urr17pkvwV99dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF99dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199ffHr/xdgAKO3NCOK/8ywAAAAAElFTkSuQmCC",
rgbNames:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,
144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,
216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,
170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,
128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},calculatePerfectPosition:function(c,h,q,E){(null==E||1E-6>Math.abs(E))&&(E=32.25);k.set(H,c[0],c[1],c[2]);k.cross(x,H,w);0==k.dot(x,x)&&k.cross(x,H,D);f.identity(G);f.rotate(G,
G,-m*q,H);f.rotate(G,G,-m*E,x);k.normalize(t,H);k.scale(z,t,h);k.add(H,H,z);k.transformMat4(k.negate(t,t),k.negate(t,t),G);return k.scale(t,t,h*Math.tan(m*E)),k.add(H,H,t),H}},J='The 3DFx requires a browser that supports `OES_element_index_uint` and `OES_texture_float` extensions of WebGL. \x3cbr/\x3e\x3ca href\x3d"https://www.khronos.org/registry/webgl/extensions"\x3eClick here for more information.\x3c/a\x3e';return F})},"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp",
"dojox/main"],function(b,a,g){var u=b.getObject("validate.regexp",!0,g);return u=g.validate.regexp={ipAddress:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowDottedDecimal&&(l.allowDottedDecimal=!0);"boolean"!=typeof l.allowDottedHex&&(l.allowDottedHex=!0);"boolean"!=typeof l.allowDottedOctal&&(l.allowDottedOctal=!0);"boolean"!=typeof l.allowDecimal&&(l.allowDecimal=!0);"boolean"!=typeof l.allowHex&&(l.allowHex=!0);"boolean"!=typeof l.allowIPv6&&(l.allowIPv6=!0);"boolean"!=typeof l.allowHybrid&&
(l.allowHybrid=!0);var k=[];l.allowDottedDecimal&&k.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");l.allowDottedHex&&k.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]");l.allowDottedOctal&&k.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]");l.allowDecimal&&k.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])");
l.allowHex&&k.push("0[xX]0*[\\da-fA-F]{1,8}");l.allowIPv6&&k.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}");l.allowHybrid&&k.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");l="";0<k.length&&(l="("+k.join("|")+")");return l},host:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowIP&&(l.allowIP=!0);"boolean"!=typeof l.allowLocal&&(l.allowLocal=!1);"boolean"!=typeof l.allowPort&&(l.allowPort=!0);"boolean"!=typeof l.allowNamed&&
(l.allowNamed=!1);var k=l.allowPort?"(\\:\\d+)?":"",f="((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.?)";l.allowIP&&(f+="|"+u.ipAddress(l));l.allowLocal&&(f+="|localhost");l.allowNamed&&(f+="|^[^-][a-zA-Z0-9_-]*");return"("+f+")"+k},url:function(l){l="object"==typeof l?l:{};"scheme"in l||(l.scheme=[!0,!1]);return a.buildGroupRE(l.scheme,function(k){return k?"(https?|ftps?)\\://":""})+u.host(l)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},
emailAddress:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowCruft&&(l.allowCruft=!1);l.allowPort=!1;var k="([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@"+u.host(l);l.allowCruft&&(k="\x3c?(mailto\\:)?"+k+"\x3e?");return k},emailAddressList:function(l){l="object"==typeof l?l:{};"string"!=typeof l.listSeparator&&(l.listSeparator="\\s;,");var k=u.emailAddress(l);return"("+k+"\\s*["+l.listSeparator+"]\\s*)*"+k+"\\s*["+l.listSeparator+"]?\\s*"},numberFormat:function(l){l=
"object"==typeof l?l:{};"undefined"==typeof l.format&&(l.format="###-###-####");return a.buildGroupRE(l.format,function(k){return a.escapeString(k,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")})},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowTerritories&&(l.allowTerritories=!0);"boolean"!=typeof l.allowMilitary&&(l.allowMilitary=!0);
var k="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";l.allowTerritories&&(k+="|AS|FM|GU|MH|MP|PW|PR|VI");l.allowMilitary&&(k+="|AA|AE|AP");return"("+k+")"}}}})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(b,a){var g={};a.setObject("dojo.regexp",g);g.escapeString=function(u,l){return u.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(k){return l&&-1!=l.indexOf(k)?
k:"\\"+k})};g.buildGroupRE=function(u,l,k){if(!(u instanceof Array))return l(u);for(var f=[],d=0;d<u.length;d++)f.push(l(u[d]));return g.group(f.join("|"),k)};g.group=function(u,l){return"("+(l?"?:":"")+u+")"};return g})},"dojox/main":function(){define(["dojo/_base/kernel"],function(b){return b.dojox})},"esri/core/libs/gl-matrix-2/vec3f64":function(){define(["exports","../../../chunks/vec3f64"],function(b,a){b.vec3f64=a.vec3f64;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/core/libs/gl-matrix-2/mat4f64":function(){define(["exports","../../../chunks/mat4f64"],function(b,a){b.mat4f64=a.mat4f64;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4f64":function(){define(["exports"],function(b){function a(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function g(d){return[d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]]}function u(d,r,m,p,w,D,G,x,t,z,H,v,F,J,c,h){return[d,r,m,
p,w,D,G,x,t,z,H,v,F,J,c,h]}function l(d,r){return new Float64Array(d,r,16)}const k=a(),f=Object.freeze(Object.defineProperty({__proto__:null,create:a,clone:g,fromValues:u,createView:l,IDENTITY:k},Symbol.toStringTag,{value:"Module"}));b.IDENTITY=k;b.clone=g;b.create=a;b.createView=l;b.fromValues=u;b.mat4f64=f})},"esri/core/libs/gl-matrix-2/vec3":function(){define(["exports","../../../chunks/vec3"],function(b,a){b.vec3=a.vec3;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/core/libs/gl-matrix-2/mat4":function(){define(["exports","../../../chunks/mat4"],function(b,a){b.mat4=a.mat4;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"fx3d/views/3d/webgl-engine-extensions/constraints":function(){define([],function(){return{EARTH_RADIUS:6378137,VertexAttrConstants:{POSITION:"position",NORMAL:"normal",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",MAPPOS:"mapPos",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",TANGENT:"tangent",
OFFSET:"offset",SUBDIVISIONS:"subdivisions",SUBDIVISIONFACTOR:"subdivisionFactor",COLORFEATUREATTRIBUTE:"colorFeatureAttribute",SIZEFEATUREATTRIBUTE:"sizeFeatureAttribute",OPACITYFEATUREATTRIBUTE:"opacityFeatureAttribute",UVMAPSPACE:"uvMapSpace",BOUNDINGRECT:"boundingRect",UVREGION:"uvRegion",NORMALCOMPRESSED:"normalCompressed",PROFILERIGHT:"profileRight",PROFILEUP:"profileUp",PROFILEVERTEXANDNORMAL:"profileVertexAndNormal",FEATUREVALUE:"featureValue",MODELORIGINHI:"modelOriginHi",MODELORIGINLO:"modelOriginLo",
MODEL:"model",MODELNORMAL:"modelNormal",INSTANCECOLOR:"instanceColor",INSTANCEFEATUREATTRIBUTE:"instanceFeatureAttribute",LOCALTRANSFORM:"localTransform",GLOBALTRANSFORM:"globalTransform",BOUNDINGSPHERE:"boundingSphere",MODELORIGIN:"modelOrigin",MODELSCALEFACTORS:"modelScaleFactors",FEATUREATTRIBUTE:"featureAttribute",STATE:"state",LODLEVEL:"lodLevel",POSITION0:"position0",POSITION1:"position1",NORMALA:"normalA",NORMALB:"normalB",COMPONENTINDEX:"componentIndex",VARIANTOFFSET:"variantOffset",VARIANTSTROKE:"variantStroke",
VARIANTEXTENSION:"variantExtension",U8PADDING:"u8padding",U16PADDING:"u16padding",SIDENESS:"sideness",START:"start",END:"end",UP:"up",EXTRUDE:"extrude"}}})},"dojo/text":function(){define(["./_base/kernel","require","./has","./has!host-browser?./request"],function(b,a,g,u){var l;g("host-browser")?l=function(m,p,w){u(m,{sync:!!p,headers:{"X-Requested-With":null}}).then(w)}:a.getText?l=a.getText:console.error("dojo/text plugin failed to load because loader does not support getText");var k={},f=function(m){if(m){m=
m.replace(/^\s*<\?xml(\s)+version=['"](\d)*.(\d)*['"](\s)*\?>/im,"");var p=m.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);p&&(m=p[1])}else m="";return m},d={},r={};b.cache=function(m,p,w){if("string"==typeof m)if(/\//.test(m)){var D=m;w=p}else D=a.toUrl(m.replace(/\./g,"/")+(p?"/"+p:""));else D=m+"",w=p;m=void 0!=w&&"string"!=typeof w?w.value:w;w=w&&w.sanitize;if("string"==typeof m)return k[D]=m,w?f(m):m;if(null===m)return delete k[D],null;D in k||l(D,!0,function(G){k[D]=G});return w?f(k[D]):k[D]};
return{dynamic:!0,normalize:function(m,p){m=m.split("!");var w=m[0];return(/^\./.test(w)?p(w):w)+(m[1]?"!"+m[1]:"")},load:function(m,p,w){m=m.split("!");var D=1<m.length,G=m[0],x=p.toUrl(m[0]);m="url:"+x;var t=d,z=function(v){w(D?f(v):v)};G in k?t=k[G]:p.cache&&m in p.cache?t=p.cache[m]:x in k&&(t=k[x]);if(t===d)if(r[x])r[x].push(z);else{var H=r[x]=[z];l(x,!p.async,function(v){k[G]=k[x]=v;for(var F=0;F<H.length;)H[F++](v);delete r[x]})}else z(t)}}})},"fx3d/views/3d/layers/FxLayerView3D":function(){define("dojo/_base/lang dojo/_base/array esri/views/layers/LayerView ./SnapshotController esri/geometry/Point esri/geometry/Extent esri/geometry/projection esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/vec3 esri/geometry/SpatialReference esri/core/watchUtils esri/core/Collection esri/Graphic esri/symbols/PictureMarkerSymbol esri/geometry/support/centroid ../effects/FxEffectRendererManager ../effects/FxEffectFactory ../support/fx3dUtils".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p,w,D,G,x,t,z,H){d=d.vec3f64;r=r.vec3;var v=d.create(),F=d.create(),J=d.create(),c=d.create(),h=d.create();return g.createSubclass({declaredClass:"esri.views.3d.layers.FxLayerView3D",constructor:function(q){this.supportsDraping=!1;this._fx3dSpatialReference=m.WGS84;q.layer&&(this.layer=q.layer);q.view&&(this.view=q.view);this.availableFields=["*"]},initialize:function(){t.init(this.view);this.layer.when().then(function(){this._eventHandles=[];this.loadedGraphics=null;
this._graphicsLoading=!0;this._graphicsCollectionEventHandle=null;this._graphicsControllerEventHandles=[];var q=this._initEffect();q.then(b.hitch(this,this._initGraphicsController));this.layer.addResolvingPromise(q);this._eventHandles.push(this.layer.on("destroy-fxlayer",function(){t.pause();t.destroy(this._layerVizType,this._layerId);this.view.map.remove(this.layer)}.bind(this)));this._eventHandles.push(this.layer.on("show-feature-label",b.hitch(this,this._onShowFeatureLabel)));this._eventHandles.push(this.layer.on("hide-feature-label",
function(){this.layer&&this.layer._labelsLayer&&(this.layer._labelsLayer.removeAll(),this._selectedFeature=null)}.bind(this)));this._eventHandles.push(this.view.on("click",b.hitch(this,this._viewClicked)))}.bind(this))},destroy:function(){this._viewModelHandler&&(this._viewModelHandler.remove(),this._viewModelHandler=null);var q=function(E){E.remove()};this.controller&&(this.controller.destroy(),this.controller=null);this._graphicsCollectionEventHandle&&this._graphicsCollectionEventHandle.remove();
this._graphicsControllerEventHandles&&this._graphicsControllerEventHandles.forEach(q);this._tilingSchemeHandle&&this._tilingSchemeHandle.remove();this._eventHandles&&this._eventHandles.forEach(q);this.inherited(arguments)},getLoadedGraphics:function(){return this.loadedGraphics&&this.loadedGraphics.toArray?[].concat(this.loadedGraphics.toArray()):[]},_initEffect:function(){return z.make({layer:this.layer,layerView:this,view:this.view})},_calculateExtentCenter:function(q){var E=q.length;if(E){var C,
I,e;if("point"==this.layer.geometryType){var B=C=q[0].geometry.longitude;var M=I=q[0].geometry.latitude;for(e=1;e<E;e++){var Q=q[e];null!=Q.geometry&&(Q.geometry.longitude<B&&(B=Q.geometry.longitude),Q.geometry.longitude>C&&(C=Q.geometry.longitude),Q.geometry.latitude<M&&(M=Q.geometry.latitude),Q.geometry.latitude>I&&(I=Q.geometry.latitude))}}else if("polyline"==this.layer.geometryType||"polygon"==this.layer.geometryType){var U=q[0].geometry.extent;B=U.xmin;C=U.xmax;M=U.ymin;I=U.ymax;for(e=1;e<E;e++)Q=
q[e],null!=Q.geometry&&null!=Q.geometry.extent&&(U=Q.geometry.extent,U.xmin<B&&(B=U.xmin),U.xmax>C&&(C=U.xmax),U.ymin<M&&(M=U.ymin),U.ymax>I&&(I=U.ymax))}return this._minDelta=6937.5*Math.min(C-B,I-M),new k(B,M,C,I,this._fx3dSpatialReference)}return null},_getGeomZFromPolyline:function(q,E){return r.set(F,q[0],q[1],q[2]||1),H.wgs84ToSphericalEngineCoords(F,0,F,0),r.set(J,E[0],E[1],E[2]||1),H.wgs84ToSphericalEngineCoords(J,0,J,0),r.subtract(h,F,J),r.add(c,F,J),r.scale(c,c,.5),r.length(c)+.6*r.length(h)-
6378137},_calculatePerfectPosition:function(q){var E={};if(null==q||null==q.geometry)return console.warn("Feature or geometry is invalid."),E;var C,I,e,B=q.geometry;if("point"===this.layer.geometryType)E.x=B.longitude,E.y=B.latitude,B=this.layer._labelDefaultHeight,E.z=5E3,B&&this.layer._currentVizFieldMinMax&&(e=this.layer._currentVizFieldMinMax.max-this.layer._currentVizFieldMinMax.min,isNaN(e)||"number"==typeof this.layer._currentVizPage&&(C=this.layer.vizFields[this.layer._currentVizPage],I=q.attributes[C],
null!=I&&(0===B.flag?(E.z+=B.max,0!=e?E.z*=(I-this.layer._currentVizFieldMinMax.min)/e:E.z=B.min):1===B.flag&&(B.max===B.min?E.z+=B.max:0!=e?E.z+=1.2*(B.min+(B.max-B.min)*(I-this.layer._currentVizFieldMinMax.min)/e):0!=this.layer._currentVizFieldMinMax.max?E.z+=B.max:E.z=B.min))));else if("polyline"===this.layer.geometryType){if(null==B.paths)return console.warn("Paths of feature is invalid."),E;q=B.paths[0];C=q.length;E.x=(q[0][0]+q[C-1][0])/2;E.y=(q[0][1]+q[C-1][1])/2;E.z=1.1*this._getGeomZFromPolyline(q[0],
q[C-1])}else if("polygon"===this.layer.geometryType){if(null==B.rings)return console.warn("Rings of feature is invalid."),E;e=x.polygonCentroid({rings:B.rings,hasZ:!1});if(isNaN(e[0])||isNaN(e[1]))return null;E.x=e[0];E.y=e[1];B=this.layer._labelDefaultHeight;E.z=10;e=this.layer._currentVizFieldMinMax.max-this.layer._currentVizFieldMinMax.min;isNaN(e)||(C=this.layer.vizFields[this.layer._currentVizPage],I=q.attributes[C],null!=I&&(0===B.flag?(E.z+=B.max,0!=e?E.z*=(I-this.layer._currentVizFieldMinMax.min)/
e:E.z=B.min):1===B.flag&&(B.max===B.min?E.z+=B.max:0!=e?E.z+=1.3*(B.min+(B.max-B.min)*(I-this.layer._currentVizFieldMinMax.min)/e):0!=this.layer._currentVizFieldMinMax.max?E.z+=B.max:E.z=B.min)))}return isNaN(E.z)&&(E.z=null),E},_calculatePerfectHeight:function(){var q=this.layer._labelDefaultHeight,E=10;this.layer._currentVizFieldMinMax.max==this.layer._currentVizFieldMinMax.min&&0==this.layer._currentVizFieldMinMax.max?E=q&&q.min||1E3:q&&(0===q.flag?E+=q.max:1===q.flag&&(E+=q.max===q.min?q.max:
1.2*(q.min+(q.max-q.min))));q=Math.abs(E)/111E3;return"local"==this.view.viewModel&&(q=Math.abs(E)/235596.8),10<q&&(q=10),{z:E,lonD:q}},_onShowFeatureLabel:function(q){if(this.layer._labelsLayer&&this.layer._labelsLayer.visible){if(this._selectedFeature=null,q.feature){if(null==q.feature.geometry)return void console.warn("The feature with FID has no geometry content.");this.layer._labelsLayer.removeAll();var E=this._calculatePerfectPosition(q.feature);if(null==E.x||null==E.y)return;null==E.z?E.z=
10:E.z+=1E3;var C=H.createTextTexture(""+q.feature.attributes[this.layer.displayField],14,"#ffffff","center","Arial","rgba(0,0,0,0.5)");C=new G({url:C.toDataURL(),width:C.width,height:C.height,contentType:"image/png"});var I=new l(E.x,E.y,E.z,this._fx3dSpatialReference);C=new D(I,C,q.feature.attributes,this.layer.popupTemplate);this.layer._labelsLayer.add(C);C=Math.abs(E.z)/111E3;I=Math.abs(E.z)/(111E3*Math.cos(E.y*Math.PI/180));"local"==this.view.viewModel&&(C=Math.abs(E.z)/111319.5,I=Math.abs(E.z)/
235596.8);10<I&&(I=10);20<C&&(C=20);C=new k(E.x-C,E.y-I,E.x+C,E.y+I,this._fx3dSpatialReference);this._fixCameraPosition(E,C);this._animateTo(C)}else this.layer._labelsLayer.removeAll();this._selectedFeature=q.feature}},_updateSelectedFeatureLabel:function(){if(this.layer._labelsLayer){var q=0<this.layer._labelsLayer.graphics.toArray().length;this.layer._labelsLayer.removeAll();q&&this._selectedFeature&&this._onShowFeatureLabel({feature:this._selectedFeature})}},_viewClicked:function(q){if(q.graphic)if(this.layer._labelsLayer&&
q.graphic.layer===this.layer._labelsLayer)0==this.layer._labelsLayer.graphics.length&&this._onShowFeatureLabel({feature:q.graphic});else{if(q.graphic.layer===this.layer&&this.view&&this.view.popup.viewModel.selectedFeature){q=this.view.popup.viewModel.selectedFeature;var E=new D({attributes:b.clone(q.attributes),geometry:q.geometry&&q.geometry.clone()||null,popupTemplate:q.popupTemplate||null,symbol:q.symbol||null,visible:q.visible});null!=E&&(this._onShowFeatureLabel({feature:E}),this.layer.emit("selected-feature-from-globe",
{selectedFeature:E}),this.view.popup.viewModel._set("selectedFeature",null))}}else if(this.layer&&this.layer._labelsLayer&&0<this.layer._labelsLayer.graphics.length&&(this.layer._labelsLayer.removeAll(),this._selectedFeature=null,this.layer.emit("abandon-selected-feature"),this.view&&this.view.popup.viewModel._set("selectedFeature",null)),this.view&&this.view.popup.viewModel.selectedFeature)try{this.view.popup.viewModel.selectedFeature.symbol=null,this.view.popup.viewModel.selectedFeature.popupTemplate=
null,E=this.view.popup.viewModel.selectedFeature.clone(),this._onShowFeatureLabel({feature:E}),this.layer.emit("selected-feature-from-globe",{selectedFeature:E})}finally{this.view.popup.viewModel._set("selectedFeature",null)}},_fixCameraPosition:function(q,E){var C=q.z;1E4<=C&&(C=1E3);q=q.z;1E4<=q&&(E.center.z=1E3);q=H.clamp(q,1E3,1E4);E.zmin=C;E.zmax=q},_animateTo:function(q,E,C){this.view&&this.view.goTo({target:q,heading:this.view.camera.heading,tilt:this.view.camera.tilt})},_initGraphicsController:function(q){if(this._layerId=
this.layer.id,this._layerVizType=this.layer.vizType,t.addEffect(this.layer,q)){var E=this.view.map.layers.find(function(e){return e.url===this.layer.url&&"esri.layers.FeatureLayer"===e.declaredClass&&"Feature Layer"===e.type&&!0===e.loaded}.bind(this)),C=this;q=function(){var e=w.ofType(D);e={layer:C.layer,layerView:C,graphics:new e};C.controller=new u(e);p.whenTrueOnce(C.view,"basemapTerrain.ready",function(){C.controller.when().then(function(){var B=null;C.loadedGraphics=C.controller.graphics;C._graphicsCollectionEventHandle=
C.loadedGraphics.on("change",C._collectionChangeHandler.bind(C));0<C.loadedGraphics.length&&(B=C.loadedGraphics.toArray(),C._add([].concat(B)));C._graphicsControllerEventHandles.push(C.controller.on("query-end",function(){C._graphicsLoading=!1}));C.controller.startup()},function(B){console.log(B)})})};if(E){var I=this.view.layerViews.find(function(e){return e.layer.url===E.url&&e.layer.id===E.id}.bind(this));I?(E.source&&this.layer._initLayerProperties(E.source),this.loadedGraphics=I.loadedGraphics,
0<this.loadedGraphics.length&&this._add([].concat(this.loadedGraphics.toArray())),this.layer.emit("all-features-loaded",{graphics:[].concat(this.loadedGraphics.toArray())})):q()}else q()}},_collectionChangeHandler:function(q){this._add([].concat(q.added));this._remove([].concat(q.removed))},_add:function(q){function E(I){var e,B;I=[].concat(I);a.forEach(I,function(M){if(e=M.geometry)if("point"==C.layer.geometryType)f.projectXYZToVector(e.x,e.y,e.z,e.spatialReference,v,C._fx3dSpatialReference),e.longitude=
v[0],e.latitude=v[1],e.altitude=isNaN(v[2])?null:v[2];else{if("polyline"==C.layer.geometryType||"polygon"==C.layer.geometryType)for(B=e.paths||e.rings,M=0;M<B.length;M++)for(var Q=0;Q<B[M].length;Q++)f.projectXYZToVector(B[M][Q][0],B[M][Q][1],B[M][Q][2],e.spatialReference,v,C._fx3dSpatialReference),B[M][Q][0]=v[0],B[M][Q][1]=v[1],B[M][Q][2]=isNaN(v[2])?null:v[2]}else console.warn("No geometry information found in feature: "+M.attributes.FID)});C.layer.emit("fx3d-add-graphics",{graphics:I});C._graphicsLoading||
(C.layer.on("can-locating-now",function(){var M=C._calculateExtentCenter(C.getLoadedGraphics());if(M){var Q=C._calculatePerfectHeight();M.zmax=Q.z;M.zmin=Q.z-1;M.xmax+=2+Q.lonD;M.xmin-=2+Q.lonD;M.ymax+=1+Q.lonD;M.ymin-=1+Q.lonD;C._animateTo(M)}}),C.layer.emit("all-features-loaded",{graphics:C.getLoadedGraphics()}))}if(b.isArray(q)&&0<q.length){var C=this;this.isResolved()?E(q):this.when().then(function(){E(q)})}},_remove:function(q){b.isArray(q)&&0<q.length}})})},"fx3d/views/3d/layers/SnapshotController":function(){define("esri/config esri/core/Accessor esri/core/Error esri/core/Evented esri/core/Handles esri/core/Logger esri/core/Promise esri/core/promiseUtils esri/geometry/support/WKIDUnitConversion ./GraphicsManager ./Graphics3DVerticalScale".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p){function w(v){var F,J;if(v&&("object"==typeof v?(F=v.wkid,J=v.wkt):"number"==typeof v?F=v:"string"==typeof v&&(J=v)),F)var c=H.values[H[F]];else J&&-1!==J.search(/^PROJCS/i)&&(v=z.exec(J))&&v[1]&&(c=parseFloat(v[1].split(",")[1]));return c}function D(v,F){F=F||v.extent;v=v.width;var J=w(F&&F.spatialReference);return F&&v?F.width/v*(J||t)*x*b.screenDPI:0}var G=k.getLogger("esri.layers.graphics.controllers.SnapshotController"),x=39.37,t=6378137*Math.PI/180,z=/UNIT\[([^\]]+)\]\]$/i,
H=r;return f.EsriPromiseMixin(u.EventedMixin(a)).createSubclass({declaredClass:"esri.layers.graphics.controllers.SnapshotController",constructor:function(v){return this.type="snapshot",this._gManager=null,this._verticalScale=null,this._handles=new l,this._source=null,this._started=!1,this._pendingQueries=new Map,this.extent=null,this.hasAllFeatures=!1,this.hasFeatures=!1,this.layer=null,this.layerView=null,this.maxPageSize=null,this.defaultReturnZ=void 0,this.defaultReturnM=void 0,this.pageSize=null,
this.paginationEnabled=!1,this._cancelErrorMsg="SnapshotController: query cancelled",this._featureResolution={value:.25,scale:945},this._maxFeatures={point:16E3,multipoint:8E3,polyline:4E3,polygon:4E3,multipatch:4E3},this.layer=v.layer,this.layerView=v.layerView,this.maxPageSize=v.maxPageSize,this.graphics=v.graphics,this},initialize:function(){var v=this,F=this.layer.when(function(){return v._verifyCapabilities()}).then(function(){return v._init()});this.addResolvingPromise(F)},destroy:function(){this.cancelQuery();
this._gManager&&(this._gManager.destroy(),this._gManager=null);this._handles.destroy();this._pendingQueries=this._handles=null},properties:{updating:{value:null,dependsOn:["_pendingQueries"],get:function(){return!!(this._pendingQueries&&0<this._pendingQueries.size)}},graphics:{value:null,set:function(v){var F=this._get("graphics");F!==v&&(this._handles.remove("graphics"),v&&(this._collectionChanged({added:v.toArray(),removed:F&&F.toArray()}),this._handles.add(v.on("change",this._collectionChanged.bind(this)),
"graphics")),this._set("graphics",v))}}},cancelQuery:function(){var v=this;this._pendingQueries&&(this._pendingQueries.forEach(function(F,J){F.isFulfilled()||F.cancel(Error(v._cancelErrorMsg))}),this._pendingQueries.clear(),this.notifyChange("updating"))},refresh:function(){this.isResolved()&&this._started&&this._queryFeatures()},startup:function(){this._started||(this._started=!0,this._resolutionParams=this._getResolutionParams(),this._queryFeatures())},update:function(){this.startup()},_init:function(){var v=
this.layer;this.paginationEnabled=!!v.get("capabilities.query.supportsPagination");this._source=v.source;var F=v.maxRecordCount||4E3;this.pageSize=null==this.maxPageSize?F:Math.min(F,this.maxPageSize);this._gManager=new m({graphics:this.graphics,objectIdField:v.objectIdField});this._verticalScale=new p({sourceSpatialReference:v.spatialReference,destSpatialReference:this.layerView.view.spatialReference});this._setupStateWatchers()},_getResolutionParams:function(){var v=this.layer,F=v.get("capabilities.query.supportsQuantization");
if("polyline"===v.geometryType||"polygon"===v.geometryType){var J=w(this.layerView.view.spatialReference);if(null!=J){var c=this._featureResolution.scale;J=this._featureResolution.value/J;c=v.maxScale?v.maxScale:v.minScale?Math.min(c,v.minScale):Math.min(c,D(this.layerView.view,v.fullExtent));c*=J/this._featureResolution.scale}}return c?{maxAllowableOffset:F?null:c,quantizationParameters:F?{mode:"view",originPosition:"upperLeft",tolerance:c,extent:v.fullExtent}:null}:null},_setupStateWatchers:function(){var v=
this;this._handles.add([this.watch("extent",this.refresh.bind(this)),this.layer.watch("outFields",function(F,J){F&&J?-1===J.indexOf("*")&&(F.sort(),J.sort(),JSON.stringify(F)!==JSON.stringify(J)&&v.refresh()):v.refresh()}),this.layer.watch("definitionExpression, historicMoment",this.refresh.bind(this)),this.layer.on("edits",this._editsHandler.bind(this))])},_createQueryParams:function(){var v=this.layer,F=this.layerView,J=v.createQuery();J.outSpatialReference=F.view.spatialReference;J.geometry=this.extent;
v=v.capabilities&&v.capabilities.data;return v&&v.supportsZ&&null==J.returnZ&&null!=this.defaultReturnZ&&(J.returnZ=this.defaultReturnZ),v&&v.supportsM&&null==J.returnM&&null!=this.defaultReturnM&&(J.returnM=this.defaultReturnM),J.set(this._resolutionParams),this.paginationEnabled&&(J.start=0,J.num=this.pageSize),J},_queryFeatures:function(){this.cancelQuery();this.hasAllFeatures=this.hasFeatures=!1;this._gManager.beginPagedUpdate();this.emit("query-start");this._executeQuery(this._createQueryParams())},
_executeQuery:function(v){var F=this,J=this._source.queryFeatures(v),c=this._gManager.createIntentToAdd();this._querySetup(c,J);J.then(this._processFeatureSet.bind(this,v,c))["catch"](function(h){return F._queryError(c,h)}).then(function(){return F._queryTeardown(c)},function(){return F._queryTeardown(c)})},_hydrate:function(v,F,J){if(v){var c=v.translate[0],h=v.translate[1],q=v.scale[0],E=v.scale[1],C=function(I,e,B){return"esriGeometryPoint"===I?function(M){M.x=e(M.x);M.y=B(M.y)}:"polyline"===I||
"polygon"===I?function(M){var Q,U,P,W,R=M.rings||M.paths;M=0;for(Q=R.length;M<Q;M++){var T=R[M];var N=0;for(U=T.length;N<U;N++){var L=T[N];0<N?(P+=L[0],W+=L[1]):(P=L[0],W=L[1]);L[0]=e(P);L[1]=B(W)}}}:"extent"===I?function(M){M.xmin=e(M.xmin);M.ymin=B(M.ymin);M.xmax=e(M.xmax);M.ymax=B(M.ymax)}:"multipoint"===I?function(M){var Q,U,P,W=M.points;M=0;for(Q=W.length;M<Q;M++){var R=W[M];0<M?(U+=R[0],P+=R[1]):(U=R[0],P=R[1]);R[0]=e(U);R[1]=B(P)}}:void 0}(F,function(I){return I*q+c},function(I){return h-I*
E});v=0;for(F=J.length;v<F;v++)J[v].geometry&&C(J[v].geometry)}},_processFeatureSet:function(v,F,J){J.transform&&this._hydrate(J.transform,J.geometryType,J.features);var c=J.exceededTransferLimit,h=J.features,q=this._maxFeatures[this.layer.geometryType]||0,E=h?h.length:0,C=this._gManager.numGraphics+E,I=C>=q;I&&(G.warn('Feature limit exceeded on layer "',this.layer.title,'". Not all features are shown.'),(q=C-q)&&h.splice(E-q,q));v=!(!c||!this.paginationEnabled||I)&&this._queryNextPage(v);return this._verticalScale.adjust(h),
h&&this._gManager.addPage(h,F),this.hasFeatures=!0,v||(this._gManager.endPagedUpdate(),this.hasAllFeatures=!c,this.emit("query-end",{success:!0})),J},_queryNextPage:function(v){return v.start+=this.pageSize,this._executeQuery(v),!0},_queryError:function(v,F){if(F&&"cancel"===F.dojoType&&!this.hasFeatures?this._gManager.revertPagedUpdate():this._gManager.endPagedUpdate(),this.emit("query-end",{success:!1}),F&&"cancel"===F.dojoType)return d.reject(F);v=new g("snapshotcontroller:tile-request-failed",
"Failed to query for features",{error:F});return G.error(v),d.reject(v)},_querySetup:function(v,F){this._pendingQueries.set(v,F);this.notifyChange("updating")},_queryTeardown:function(v){this._gManager.removeIntent(v);this._pendingQueries["delete"](v);this.notifyChange("updating")},_processRefetch:function(v,F){(F=F.features)&&this._gManager.add(F,v)},_refetchError:function(v,F){},_verifyCapabilities:function(){if(!this.layer.get("capabilities.operations.supportsQuery"))throw new g("graphicscontroller:query-capability-required",
"Service requires query capabilities to be used as a feature layer",{layer:this.layer});},_collectionChanged:function(v){var F=v.added;if(F)for(var J=0;J<F.length;J++)F[J].layer=this.layer,F[J].sourceLayer=this.layer;if(F=v.removed)for(J=0;J<F.length;J++)F[J].layer=null,F[J].sourceLayer=null},_editsHandler:function(v){var F=this,J=function(q){return q.objectId},c=v.deletedFeatures.map(J);this._gManager["delete"](c);v=v.addedFeatures.concat(v.updatedFeatures).map(J);if(v.length){J=this._createQueryParams();
J.objectIds=v;J=this._source.queryFeatures(J);var h=this._gManager.createIntentToAdd(v);this._querySetup(h,J);J.then(this._processRefetch.bind(this,h))["catch"](this._refetchError.bind(this,h)).then(function(){return F._queryTeardown(h)},function(){return F._queryTeardown(h)})}}})})},"fx3d/views/3d/layers/GraphicsManager":function(){define(["esri/core/Accessor"],function(b){var a=0;return b.createSubclass({constructor:function(){this._deletedGraphicsIndex=new Set;this._intentsIndex=new Map},destroy:function(){this.removeAll();
this._intentsIndex=this._deletedGraphicsIndex=null},properties:{graphics:null,indexById:{value:null,dependsOn:["graphics","objectIdField"],get:function(){return this._createIndexById(this.graphics&&this.graphics.toArray(),this.objectIdField)}},numGraphics:{value:0,dependsOn:["indexById"],get:function(){return this.indexById?this.indexById.size:0}},objectIdField:null,updating:{value:!1,dependsOn:["_intentsIndex"],get:function(){return!!(this._intentsIndex&&0<this._intentsIndex.size)}},_intentsIndex:{value:null}},
_oldIndex:null,_deletedGraphicsIndex:null,beginPagedUpdate:function(){this._oldIndex=this.indexById;this.indexById=null;this.notifyChange("numGraphics")},addPage:function(g,u){this.add(g,u)},revertPagedUpdate:function(){var g=this._removeLeftOnly(this.indexById,this._oldIndex);this.indexById=this._oldIndex;this._oldIndex=null;this.graphics.removeMany(g);this.notifyChange("numGraphics")},endPagedUpdate:function(){var g=this._removeLeftOnly(this._oldIndex,this.indexById);this._oldIndex=null;this.graphics.removeMany(g);
this.notifyChange("numGraphics")},findGraphic:function(g){return(g=this.indexById&&this.indexById.get(g))&&g.graphic},removeAll:function(){this.indexById=this._oldIndex=null;this.graphics.removeAll();this.notifyChange("numGraphics")},add:function(g,u){if(g&&g.length){var l=this.objectIdField,k=this.indexById=this.indexById||new Map,f=this._oldIndex,d=this._createIndexById(g,l);d=this._extractObjectIds(d);k=this._extractObjectIds(k);f=this._extractObjectIds(f);k=k.concat(f);var r=[],m=k.length;for(f=
0;f<m;f++){var p=k[f];-1<d.indexOf(p)&&r.push(p)}r.length&&this._remove(r,!1);u=this.findIntent(u);d=new Map;k=g.length;for(f=0;f<k;f++)(r=g[f])&&r.attributes&&d.set(r.attributes[l],u);g.length&&this._add(g,d)}},remove:function(g){this._remove(g,!1)},"delete":function(g){this._remove(g,!0)},isDeleted:function(g){return this._deletedGraphicsIndex.has(g)},createIntentToAdd:function(g){g&&this._intentsIndex.forEach(function(l,k){g.forEach(function(f){l.ignoredIds.add(f)})},this);var u=a++;return this._intentsIndex.set(u,
{ignoredIds:new Set}),this.notifyChange("updating"),u},findIntent:function(g){return this._intentsIndex.get(g)},removeIntent:function(g){this._intentsIndex["delete"](g);this.notifyChange("updating")},update:function(g,u){if(g&&g.length){var l=this.objectIdField,k=this.indexById=this.indexById||new Map,f=this._oldIndex;g=this._createIndexById(g,l);l=this._extractObjectIds(g);var d=this._extractObjectIds(k),r=this._extractObjectIds(f);d=d.concat(r);r=[];for(var m=d.length,p=0;p<m;p++){var w=d[p];if(-1===
l.indexOf(w))r.push(w);else{var D=k.get(w)||f.get(w);D=D&&D.graphic&&D.graphic._ts;var G=g.get(w);(G&&G.graphic&&G.graphic._ts)>D&&r.push(w)}}k=[];f=l.length;for(p=0;p<f;p++)w=l[p],(-1===d.indexOf(w)||-1<r.indexOf(w))&&k.push(w);r.length&&this._remove(r,!1);k.length&&this._add(this._extractGraphics(k,g),u)}},_createIndexById:function(g,u){if(g&&g.length&&u){var l,k;var f=new Map;for(l=0;k=g[l];l++){var d=k.attributes&&k.attributes[u];null!=d&&f.set(d,{graphic:k,refCount:1})}}return f},_add:function(g,
u){var l=this.objectIdField;g.forEach(function(k){var f=u.get(k.attributes&&k.attributes[l]);this._addToIndex(k,this.indexById,f)},this);this.graphics.addMany(g);this.notifyChange("numGraphics")},_addToIndex:function(g,u,l){var k=g.attributes&&g.attributes[this.objectIdField];u&&null!=k&&(u.has(k)?l&&l.ignoredIds.has(k)||(l=u.get(k),u.set(k,{graphic:g,refCount:l.refCount+1})):this.isDeleted(k)||u.set(k,{graphic:g,refCount:1}))},_remove:function(g,u){g=g||[];g="object"==typeof g[0]?g.map(function(f){return f.attributes&&
f.attributes[this.objectIdField]}.bind(this)):g;var l=this._extractGraphics(g,this._oldIndex),k=this._extractGraphics(g,this.indexById);g.forEach(function(f){u&&this._deletedGraphicsIndex.add(f);this._removeFromIndex(f,this._oldIndex,u);this._removeFromIndex(f,this.indexById,u)}.bind(this));this.graphics.removeMany(l.concat(k));this.notifyChange("numGraphics")},_removeFromIndex:function(g,u,l){if(u&&u.has(g))if(l)u["delete"](g);else{l=u.get(g);var k=l.refCount-1;0===k?u["delete"](g):l.refCount=k}},
_removeLeftOnly:function(g,u){var l=[];return g&&g.forEach(function(k,f){var d=k.graphic;!d||u&&u.has(f)||(--k.refCount,0===k.refCount&&g["delete"](f),l.push(d))}),l},_extractGraphics:function(g,u){return g&&u?g.map(function(l){return(l=u.get(l))&&l.graphic}):[]},_extractObjectIds:function(g){var u=[];return g&&g.forEach(function(l,k){u.push(k)}),u}})})},"fx3d/views/3d/layers/Graphics3DVerticalScale":function(){define(["esri/core/Accessor","esri/core/maybe","esri/core/unitUtils"],function(b,a,g){return b.createSubclass({constructor:function(u){this.sourceSpatialReference=
u.sourceSpatialReference;this.destSpatialReference=u.destSpatialReference},adjust:function(u){var l=this._getVerticalUnitScale();1!==l&&this._scaleVerticalUnits(u,l)},_getVerticalUnitScale:function(){if(this.sourceSpatialReference&&!this.sourceSpatialReference.equals(this.destSpatialReference)){var u=g.getMetersPerVerticalUnitForSR(this.sourceSpatialReference),l=g.getMetersPerVerticalUnitForSR(this.destSpatialReference);return u/l}return 1},_vertexListsScaleZ:function(u,l){for(var k=0;k<u.length;++k)for(var f=
u[k],d=0;d<f.length;++d)f[d][2]*=l},_scaleVerticalUnits:function(u,l){for(var k=0;k<u.length;++k){var f=u[k].geometry;!a.isNone(f)&&f.hasZ&&(this._geometryIsPoint(f)?null!==f.z&&(f.z*=l):this._geometryIsPolyline(f)?this._vertexListsScaleZ(f.paths,l):this._geometryIsPolygon(f)&&this._vertexListsScaleZ(f.rings,l))}},_geometryIsPoint:function(u){return"point"===u.type},_geometryIsPolygon:function(u){return"polygon"===u.type},_geometryIsPolyline:function(u){return"polyline"===u.type}})})},"esri/core/watchUtils":function(){define("exports ./deprecate ./events ./lang ./Logger ./promiseUtils".split(" "),
function(b,a,g,u,l,k){function f(z,H,v,F){var J=Array.isArray(H)?H:H.includes(",")?H.split(","):[H];H=z.watch(H,v,F);for(const c of J)J=c.trim().replace(t,"$1"),F=z.get(J),v.call(z,F,F,J,z);return H}function d(z,H,v,F,J){J=z.watch(H,(h,q,E,C)=>{if(!v||v(h))null==F?void 0:F.call(z,h,q,E,C)},J);if(Array.isArray(H))for(var c of H){const h=z.get(c);v&&v(h)&&(null==F?void 0:F.call(z,h,h,H,z))}else c=z.get(H),v&&v(c)&&(null==F?void 0:F.call(z,c,c,H,z));return J}function r(z,H,v,F,J){function c(){C&&(C.remove(),
C=null)}const h="function"===typeof F?F:null,q="object"===typeof F?F:null;"boolean"===typeof F&&(J=F);let E=!1,C;const I=k.createDeferred();k.onAbort(q,()=>{c();I.reject(k.createAbortError())});F={then:I.promise.then.bind(I.promise),catch:I.promise.catch.bind(I.promise),remove:c};Object.freeze(F);C=d(z,H,v,(e,B,M,Q)=>{E=!0;c();h&&h.call(z,e,B,M,Q);I.resolve({value:e,oldValue:B,propertyName:M,target:Q})},J);E&&c();return F}function m(z){return!!z}function p(z){return!z}function w(z){return!0===z}function D(z){return!1===
z}function G(z){return void 0!==z}function x(z){return void 0===z}a.deprecatedModule(l.getLogger("esri.core.watchUtils"),"esri/core/watchUtils",{replacement:"esri/core/reactiveUtils",warnOnce:!0,version:"4.24"});const t=/\?(\.|$)/g;b.init=f;b.on=function(z,H,v,F,J,c,h){function q(I){const e=E[I];e&&(c&&c(e.target,I,z,v),e.handle.remove(),delete E[I])}const E={},C=f(z,H,(I,e,B)=>{q(B);g.isEventTarget(I)&&(E[B]={handle:g.on(I,v,F),target:I},J&&J(I,B,z,v))},h);return{remove(){C.remove();for(const I in E)q(I)}}};
b.once=function(z,H,v,F){return r(z,H,null,v,F)};b.pausable=function(z,H,v,F){let J=!1;const c=z.watch(H,(h,q,E,C)=>{J||v.call(z,h,q,E,C)},F);return{remove(){c.remove()},pause(){J=!0},resume(){J=!1}}};b.watch=function(z,H,v,F){return z.watch(H,v,F)};b.when=function(z,H,v,F){return d(z,H,m,v,F)};b.whenDefined=function(z,H,v,F){return d(z,H,G,v,F)};b.whenDefinedOnce=function(z,H,v,F){return r(z,H,G,v,F)};b.whenEqual=function(z,H,v,F,J){return d(z,H,c=>u.equals(v,c),F,J)};b.whenEqualOnce=function(z,
H,v,F,J){return r(z,H,c=>u.equals(v,c),F,J)};b.whenFalse=function(z,H,v,F){return d(z,H,D,v,F)};b.whenFalseOnce=function(z,H,v,F){return r(z,H,D,v,F)};b.whenNot=function(z,H,v,F){return d(z,H,p,v,F)};b.whenNotOnce=function(z,H,v,F){return r(z,H,p,v,F)};b.whenOnce=function(z,H,v,F){return r(z,H,m,v,F)};b.whenTrue=function(z,H,v,F){return d(z,H,w,v,F)};b.whenTrueOnce=function(z,H,v,F){return r(z,H,w,v,F)};b.whenUndefined=function(z,H,v,F){return d(z,H,x,v,F)};b.whenUndefinedOnce=function(z,H,v,F){return r(z,
H,x,v,F)};b.whenValidOnce=r;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"fx3d/views/3d/effects/FxEffectRendererManager":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare esri/core/scheduling esri/core/watchUtils ../webgl-engine-extensions/ShaderSnippets esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/mat4f64 esri/core/libs/gl-matrix-2/vec3 esri/core/libs/gl-matrix-2/mat4 esri/views/3d/externalRenderers esri/layers/GraphicsLayer ./Effect ../support/fx3dUtils dojo/text!./CommonShaders.xml".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p,w,D,G,x){var t=d.mat4f64;m=m.mat4;var z=f.vec3f64,H=g(null,{declaredClass:"esri.views.3d.effects.FxEffectRendererManager",constructor:function(){this._sceneView=null;this._ready=!1;this._effects=[];this._shaderSnippets=this._fx3dFrameTask=null;this._normalMatrix=t.create();this._viewDirection=z.create();this._shaderSnippets||(this._shaderSnippets=new k,this._shaderSnippets._parse(x))},_init:function(F){return b.isObject(F)?(this._sceneView=F,this._vaoExt=this._sceneView._stage.renderView._rctx._capabilities.vao,
void(this._ready||l.whenTrue(this._sceneView,"ready",this._viewReadyHandler.bind(this)))):void console.error("FxEffectRendererManager: no sceneView")},_viewReadyHandler:function(){this._sceneView&&(this._labelsLayer=new w({id:"-labelinfo-layer",listMode:"hide"}),this._sceneView.map.add(this._labelsLayer))},setup:function(F){this.context={};this.context.gl=F.gl;this.context.rctx=F.rctx;this._gl=this.context.gl;this._gl.getExtension("OES_texture_float");this._gl.getExtension("OES_texture_float_linear");
this._effects.forEach(function(J){J.effect.setupEffect({gl:this._gl,vaoExt:this._vaoExt,shaderSnippets:this._shaderSnippets})}.bind(this));F.resetWebGLState()},_updateContext:function(F){var J={};J.direction=F.sunLight.direction;J.ambient=F.sunLight.ambient.color;J.diffuse=F.sunLight.diffuse.color;J.specular=[.2,.2,.2,.2];J.ambient[3]=F.sunLight.ambient.intensity;J.diffuse[3]=F.sunLight.diffuse.intensity;this.context.lightingData=J;m.copy(this._normalMatrix,F.camera.viewInverseTransposeMatrix);this._normalMatrix[3]=
this._normalMatrix[7]=this._normalMatrix[11]=0},render:function(F){F.gl.enable(F.gl.DEPTH_TEST);F.gl.disable(F.gl.CULL_FACE);F.gl.disable(F.gl.BLEND);this._updateContext(F);_context=F;this._effects.forEach(function(J){J.effect.update();J.effect.render({zoom:this._sceneView.zoom,proj:_context.camera.projectionMatrix,view:_context.camera.viewMatrix,viewInvTransp:_context.camera.viewInverseTransposeMatrix,normalMat:this._normalMatrix,camPos:_context.camera.eye,lightingData:this.context.lightingData,
viewport:_context.camera.viewport},_context.rctx)}.bind(this));p.requestRender(this._sceneView);F.resetWebGLState()},dispose:function(){},addEffect:function(F,J){if(b.isObject(F)&&J instanceof D){if(0<a.filter(this._effects,function(c){return c.id===F.id&&c.effect.effectName==J.effectName}).length)return console.warn("Layer "+F.id+" in "+J.effectName+" effect has already existed."),!1;if(b.isObject(J))return F.emit("hide-feature-label"),this._labelsLayer.id=F.id+this._labelsLayer.id,F._labelsLayer=
this._labelsLayer,this._labelsLayer.visible=F.visible,F.watch("visible",function(c,h,q){this._labelsLayer&&(F.emit("hide-feature-label"),this._labelsLayer.set("visible",!!c))}.bind(this)),this._effects.push({id:F.id,effect:J}),J.initEffect({}),!0}return!1},_remove:function(F,J){if(F&&J){var c=-1,h=a.filter(this._effects,function(q,E){return q.id===J&&F==q.effect.effectName&&(c=E,!0)});0<h.length&&-1<c&&(h[0].effect.destroy(),this._effects.splice(c,1));0===this._effects.length&&(this._ready=!1,this._labelsLayer&&
(this._labelsLayer.removeAll(),this._sceneView.map.remove(this._labelsLayer)))}}}),v=null;return H.init=function(F){v||(v=new H);v._init(F)},H.addEffect=function(F,J){if(v){var c=v._sceneView;return this._eventHandler=F.on("effect-ok-test",function(h){p.add(c,v)}.bind(this)),v.addEffect(F,J)}return!1},H.run=function(F,J){return!!v&&v._prepare(F,J)},H.destroy=function(F,J){if(v){var c=v._sceneView;v._remove(F,J);p.remove(c,v)}},H.pause=function(){v&&v._fx3dFrameTask&&v._fx3dFrameTask.pause()},H})},
"fx3d/views/3d/webgl-engine-extensions/ShaderSnippets":function(){define(["dojo/_base/declare","dojox/xml/parser","esri/views/3d/webgl-engine/lib/Util","./constraints"],function(b,a,g,u){return b(null,{declaredClass:"esri.views.3d.webgl-engine-extensions.ShaderSnippets",constructor:function(l){var k=u.VertexAttrConstants,f;for(f in k)this[k[f]]=u.VertexAttrConstants[f];if(l)for(var d in l)this[d]=l[d]},_parse:function(l){l=a.parse(l).getElementsByTagName("snippet");for(var k=/\$[a-zA-Z0-9_]+[ \t]*/,
f=/[\$\s]+/g,d=0;d<l.length;d++){var r=l[d].getAttribute("name");g.assert(null==this[r]);for(var m=l[d].textContent;;){var p=m.match(k);if(null==p)break;var w=this[p[0].replace(f,"")];g.assert(void 0!==w);m=m.replace(p[0],w)}this[r]=m}}})})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(b){b.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(a,g){var u=b.doc;g=g||"text/xml";if(a&&b.trim(a)&&
"DOMParser"in b.global){var l=(new DOMParser).parseFromString(a,g);a=l.documentElement;if("parsererror"==a.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==a.namespaceURI){if(u=a.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0])u=u.firstChild.data;throw Error("Error parsing text "+a.firstChild.data+" \n"+u);}return l}if("ActiveXObject"in b.global){u=function(f){return"MSXML"+f+".DOMDocument"};u=["Microsoft.XMLDOM",u(6),u(4),u(3),u(2)];
b.some(u,function(f){try{l=new ActiveXObject(f)}catch(d){return!1}return!0});if(a&&l&&(l.async=!1,l.loadXML(a),a=l.parseError,0!==a.errorCode))throw Error("Line: "+a.line+"\nCol: "+a.linepos+"\nReason: "+a.reason+"\nError Code: "+a.errorCode+"\nSource: "+a.srcText);if(l)return l}else if(u.implementation&&u.implementation.createDocument){if(a&&b.trim(a)&&u.createElement){g=u.createElement("xml");g.innerHTML=a;var k=u.implementation.createDocument("foo","",null);b.forEach(g.childNodes,function(f){k.importNode(f,
!0)});return k}return u.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(a,g){if(1<arguments.length)return dojox.xml.parser.replaceChildren(a,(a.ownerDocument||b.doc).createTextNode(g)),g;if(void 0!==a.textContent)return a.textContent;var u="";a&&b.forEach(a.childNodes,function(l){switch(l.nodeType){case 1:case 5:u+=dojox.xml.parser.textContent(l);break;case 3:case 2:case 4:u+=l.nodeValue}});return u};dojox.xml.parser.replaceChildren=function(a,g){var u=
[];b.isIE&&b.forEach(a.childNodes,function(l){u.push(l)});dojox.xml.parser.removeChildren(a);b.forEach(u,b.destroy);b.isArray(g)?b.forEach(g,function(l){a.appendChild(l)}):a.appendChild(g)};dojox.xml.parser.removeChildren=function(a){for(var g=a.childNodes.length;a.hasChildNodes();)a.removeChild(a.firstChild);return g};dojox.xml.parser.innerXML=function(a){return a.innerXML?a.innerXML:a.xml?a.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(a):null};return dojox.xml.parser})},
"esri/views/3d/webgl-engine/lib/Util":function(){define(["exports","../../../../chunks/vec2f64","../../../../chunks/vec4","../../../../chunks/vec4f64"],function(b,a,g,u){function l(d,r){if(!d)throw r=r||"assert",console.log(Error(r).stack),new f(r);}const k=u.create();let f=function(){function d(r){this.message=r}d.prototype.toString=function(){return`AssertException: ${this.message}`};return d}();b.assert=l;b.fovd2fovx=function(d,r,m){return 2*Math.atan(r*Math.tan(.5*d)/Math.sqrt(r*r+m*m))};b.fovd2fovy=
function(d,r,m){return 2*Math.atan(m*Math.tan(.5*d)/Math.sqrt(r*r+m*m))};b.fovx2fovd=function(d,r,m){return 2*Math.atan(Math.sqrt(r*r+m*m)*Math.tan(.5*d)/r)};b.fovy2fovd=function(d,r,m){return 2*Math.atan(Math.sqrt(r*r+m*m)*Math.tan(.5*d)/m)};b.isTranslationMatrix=function(d){return 1===d[0]&&0===d[1]&&0===d[2]&&0===d[3]&&0===d[4]&&1===d[5]&&0===d[6]&&0===d[7]&&0===d[8]&&0===d[9]&&1===d[10]&&0===d[11]&&1===d[15]};b.logWithBase=function(d,r){return Math.log(d)/Math.log(r)};b.project=function(d,r,m,
p,w){w||(w=d);k[0]=d[0];k[1]=d[1];k[2]=d[2];k[3]=1;g.transformMat4(k,k,r);2<w.length&&(w[2]=-k[2]);g.transformMat4(k,k,m);l(0!==k[3]);w[0]=k[0]/k[3];w[1]=k[1]/k[3];w[2]=k[2]/k[3];w[0]=(.5*w[0]+.5)*p[2]+p[0];w[1]=(.5*w[1]+.5)*p[3]+p[1]};b.rayBoxTest=function(d,r,m,p){let w,D=(m[0]-d[0])/r[0],G=(p[0]-d[0])/r[0];D>G&&(w=D,D=G,G=w);let x=(m[1]-d[1])/r[1],t=(p[1]-d[1])/r[1];x>t&&(w=x,x=t,t=w);if(D>t||x>G)return!1;x>D&&(D=x);t<G&&(G=t);m=(m[2]-d[2])/r[2];d=(p[2]-d[2])/r[2];m>d&&(w=m,m=d,d=w);if(D>d||m>
G)return!1;d<G&&(G=d);return 0>G?!1:!0};b.rayRay2D=function(d,r,m,p,w,D=a.create()){const G=(p[w]-m[w])*(r[0]-d[0])-(p[0]-m[0])*(r[w]-d[w]);if(0===G)return!1;m=((p[0]-m[0])*(d[w]-m[w])-(p[w]-m[w])*(d[0]-m[0]))/G;D[0]=d[0]+m*(r[0]-d[0]);D[1]=d[w]+m*(r[w]-d[w]);return!0};b.setMatrixTranslation3=function(d,r,m,p){d[12]=r;d[13]=m;d[14]=p};b.verify=function(d,r){d||console.warn("Verify failed: "+(r||"")+"\n"+Error("verify").stack)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/chunks/vec2f64":function(){define(["exports"],function(b){function a(){return[0,0]}function g(t){return[t[0],t[1]]}function u(t,z){return[t,z]}function l(t){const z=[0,0],H=Math.min(2,t.length);for(let v=0;v<H;++v)z[v]=t[v];return z}function k(t,z){return new Float64Array(t,z,2)}function f(){return[0,0]}function d(){return[1,1]}function r(){return[1,0]}function m(){return[0,1]}const p=[0,0],w=[1,1],D=[1,0],G=[0,1],x=Object.freeze(Object.defineProperty({__proto__:null,create:a,clone:g,fromValues:u,
fromArray:l,createView:k,zeros:f,ones:d,unitX:r,unitY:m,ZEROS:p,ONES:w,UNIT_X:D,UNIT_Y:G},Symbol.toStringTag,{value:"Module"}));b.ONES=w;b.UNIT_X=D;b.UNIT_Y=G;b.ZEROS=p;b.clone=g;b.create=a;b.createView=k;b.fromArray=l;b.fromValues=u;b.ones=d;b.unitX=r;b.unitY=m;b.vec2f64=x;b.zeros=f})},"esri/views/3d/externalRenderers":function(){define(["exports","../../core/has","../../chunks/mat4f64","../../geometry/projection","./externalRenderers/ExternalRendererStore"],function(b,a,g,u,l){function k(D,G){w.add(D,
G)}function f(D,G){w.remove(D,G)}function d(D){D._stage.renderView.requestRender()}function r(D,G,x,t,z,H,v){t=t||D.spatialReference;return u.projectBuffer(G,t,x,z,D.renderCoordsHelper.spatialReference,H,v)?z:null}function m(D,G,x,t,z,H,v){H=H||D.spatialReference;return u.projectBuffer(G,D.renderCoordsHelper.spatialReference,x,t,H,z,v)?t:null}function p(D,G,x,t){t||(t=g.create());x=x||D.spatialReference;return u.computeTranslationToOriginAndRotation(x,G,t,D.renderCoordsHelper.spatialReference)?t:
null}const w=new l;b.add=k;b.bind=function(D){return{add:k.bind(this,D),remove:f.bind(this,D),requestRender:d.bind(this,D),toRenderCoordinates:r.bind(this,D),fromRenderCoordinates:m.bind(this,D),renderCoordinateTransformAt:p.bind(this,D)}};b.forceWebGLContext=function(D){a.add("esri-force-webgl",D)};b.fromRenderCoordinates=m;b.getRenderCamera=function(D){return D.state.camera.clone()};b.remove=f;b.renderCoordinateTransformAt=p;b.requestRender=d;b.toRenderCoordinates=r;Object.defineProperties(b,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/externalRenderers/ExternalRendererStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Collection ../../../core/Logger ../../../core/reactiveUtils ../../../chunks/vec3 ./RenderContext ../webgl-engine/lib/RenderPass ../webgl-engine/lib/RenderSlot".split(" "),function(b,a,g,u,l,k,f,d){function r(w,D,G){if("function"===typeof w[D])w[D](G)}const m=g.getLogger("esri.views.3d.externalRenderers.ExternalRendererStore");
g=function(){function w(){this._renderers=new a}var D=w.prototype;D.add=function(G,x){this._findOrCreateStageRenderer(G).add(x)};D.remove=function(G,x){(G=this._findStageRenderer(G))&&G.remove(x);0===G.renderers.length&&(G.destroy(),this._renderers.remove(G))};D._findStageRenderer=function(G){return this._renderers.find(x=>x.view===G)};D._findOrCreateStageRenderer=function(G){let x=this._findStageRenderer(G);x||(x=new p(G),this._renderers.add(x));return x};return w}();let p=function(){function w(G){this.view=
G;this.canRender=!0;this.renderers=new a;this._readyWatchHandle=u.watch(()=>G.ready,x=>{x?(this.context=new k(this.view),this.view._stage.addRenderPlugin([d.RenderSlot.OPAQUE_MATERIAL,d.RenderSlot.TRANSPARENT_MATERIAL],this)):(this.renderers.forEach(t=>r(t,"dispose",this.context)),this.context=null)},u.initial)}var D=w.prototype;D.destroy=function(){this.renderers.drain(G=>{this.context&&r(G,"dispose",this.context)});this.view._stage&&this.view._stage.removeRenderPlugin(this);this._readyWatchHandle&&
(this._readyWatchHandle.remove(),this._readyWatchHandle=null);this.context=null};D.add=function(G){this.renderers.includes(G)?m.warn("add(): Cannot add external renderer: renderer has already been added"):(this.renderers.add(G),this.context&&(this._webglStateReset(),r(G,"setup",this.context),this.view._stage.renderView.requestRender()))};D.remove=function(G){const x=this.renderers.indexOf(G);-1!==x&&(this.renderers.removeAt(x),this.context&&(r(G,"dispose",this.context),this.view._stage.renderView.requestRender()))};
D.initializeRenderContext=function(G){this.context.rctx=G.renderContext.rctx;0<this.renderers.length&&this._webglStateReset();this.renderers.forEach(x=>r(x,"setup",this.context))};D.uninitializeRenderContext=function(){};D.render=function(G){0===this.renderers.length||G.pass!==f.RenderPass.MATERIAL||G.bindParameters.slot!==d.RenderSlot.OPAQUE_MATERIAL&&G.bindParameters.slot!==d.RenderSlot.TRANSPARENT_MATERIAL||(this._updateContext(G),this._webglStateReset(),this.renderers.forEach(x=>{switch(G.bindParameters.slot){case d.RenderSlot.OPAQUE_MATERIAL:r(x,
"render",this.context);break;case d.RenderSlot.TRANSPARENT_MATERIAL:r(x,"renderTransparent",this.context)}}))};D._updateContext=function(G){this.context.camera.copyFrom(G.bindParameters.camera);l.copy(this.context.sunLight.direction,G.bindParameters.lighting.old.direction);l.copy(this.context.sunLight.diffuse.color,G.bindParameters.lighting.old.diffuse.color);l.copy(this.context.sunLight.ambient.color,G.bindParameters.lighting.old.ambient.color);this.context._renderTargetHelper=G.offscreenRenderingHelper};
D._webglStateReset=function(){var G;this.context.rctx.resetState();null==(G=this.context._renderTargetHelper)?void 0:G.bindFramebuffer()};b._createClass(w,[{key:"needsTransparentPass",get:function(){return this.renderers.some(G=>"function"===typeof G.renderTransparent)}}]);return w}();return g})},"esri/views/3d/externalRenderers/RenderContext":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/vec3f64","../webgl-engine/lib/Camera"],function(b,a,g){return function(){function u(k){this.view=
k;this.camera=new g.Camera;this.sunLight={direction:a.create(),ambient:{color:a.create(),intensity:1},diffuse:{color:a.create(),intensity:1}};this._renderTargetHelper=null}var l=u.prototype;l.resetWebGLState=function(){null!=this.rctx&&(this.rctx.enforceState(),this._renderTargetHelper&&this._renderTargetHelper.bindFramebuffer())};l.bindRenderTarget=function(){this._renderTargetHelper&&this._renderTargetHelper.framebuffer.initializeAndBind()};b._createClass(u,[{key:"gl",get:function(){return this.rctx.gl}}]);
return u}()})},"esri/views/3d/webgl-engine/lib/Camera":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/support/frustum ../../../../geometry/support/ray ../../../../geometry/support/vector ../../../ViewingMode ./Util".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p,w,D,G,x,t,z,H,v){const F=g.getLogger("esri.views.3d.webgl-engine.lib.Camera");g=function(){function C(e=null,B=null,M=null){this._viewUp=w.create();this._viewForward=w.create();this._viewRight=w.create();this._ray=t.create();this._viewport=G.fromValues(0,0,1,1);this._padding=G.fromValues(0,0,0,0);this._fov=55/180*Math.PI;this._nearFar=m.fromValues(1,1E3);this._viewDirty=!0;this._viewMatrix=d.create();this._projectionDirty=!0;this._projectionMatrix=d.create();this._viewProjectionDirty=
!0;this._viewProjectionMatrix=d.create();this._viewInverseTransposeMatrixDirty=!0;this._viewInverseTransposeMatrix=d.create();this._inverseProjectionDirty=!0;this._inverseProjectionMatrix=null;this._frustumDirty=!0;this._frustum=x.create();this._fullViewport=G.create();this._pixelRatio=1;this.relativeElevation=0;l.isSome(e)&&p.copy(this._ray.origin,e);this._center=l.isSome(B)?w.clone(B):w.create();this._up=l.isSome(M)?w.clone(M):w.fromValues(0,0,1)}var I=C.prototype;I.depthNDCToWorld=function(e){return 2*
this.near*this.far/(this.far+this.near-(2*e-1)*(this.far-this.near))};I.copyFrom=function(e){p.copy(this._ray.origin,e.eye);p.copy(this._center,e.center);p.copy(this._up,e.up);D.copy(this._viewport,e.viewport);D.copy(this._padding,e.padding);r.copy(this._nearFar,e.nearFar);this._fov=e.fov;this.relativeElevation=e.relativeElevation;this._viewDirty=e._viewDirty;this._viewDirty||(f.copy(this._viewMatrix,e.viewMatrix),p.copy(this._viewRight,e.viewRight),p.copy(this._viewUp,e.viewUp),p.copy(this._viewForward,
e.viewForward));e._projectionDirty?this._projectionDirty=!0:(f.copy(this._projectionMatrix,e.projectionMatrix),this._projectionDirty=!1);this._inverseProjectionDirty=this._viewProjectionDirty=!0;this._frustumDirty=e._frustumDirty;this._frustumDirty||(x.copy(this._frustum,e.frustum),this._frustumDirty=!1);e._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:(f.copy(this._viewInverseTransposeMatrix,e.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1);D.copy(this._fullViewport,
e.fullViewport);this._pixelRatio=e.pixelRatio;return this};I.copyViewFrom=function(e){this.eye=e.eye;this.center=e.center;this.up=e.up};I.clone=function(){return(new C).copyFrom(this)};I.equals=function(e){return p.exactEquals(this.eye,e.eye)&&p.exactEquals(this._center,e.center)&&p.exactEquals(this._up,e.up)&&D.exactEquals(this._viewport,e.viewport)&&D.exactEquals(this._padding,e.padding)&&r.exactEquals(this._nearFar,e.nearFar)&&this._fov===e.fov&&this._pixelRatio===e.pixelRatio&&this.relativeElevation===
e.relativeElevation};I.almostEquals=function(e){if(this._pixelRatio!==e.pixelRatio||.001<=Math.abs(e.fov-this._fov))return!1;const B=1-1E-10;p.sub(h,e.eye,e.center);p.sub(q,this.eye,this._center);const M=p.dot(h,q),Q=p.sqrLen(h),U=p.sqrLen(q);return M*M>=B*Q*U&&p.sqrDist(e.eye,this.eye)<2.5E-7*Math.max(Q,U)&&.5>D.squaredDistance(e.padding,this._padding)&&.5>D.squaredDistance(e.viewport,this._viewport)};I.computeRenderPixelSizeAt=function(e){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(e))};
I.computeRenderPixelSizeAtDist=function(e){return e*this.perRenderPixelRatio};I.computeScreenPixelSizeAt=function(e){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(e))};I._viewDirectionDistance=function(e){return Math.abs(z.projectPointSignedLength(this.viewForward,p.subtract(h,e,this.eye)))};I.computeScreenPixelSizeAtDist=function(e){return e*this.perScreenPixelRatio};I.computeDistanceFromRadius=function(e,B){return e/Math.tan(Math.min(this.fovX,this.fovY)/(2*(B||1)))};I.getScreenCenter=
function(e=k.createScreenPointArray()){e[0]=(this.padding[b.PaddingSide.LEFT]+this.width/2)/this._pixelRatio;e[1]=(this.padding[b.PaddingSide.TOP]+this.height/2)/this._pixelRatio;return e};I.getRenderCenter=function(e,B=.5,M=.5){e[0]=this.padding[b.PaddingSide.LEFT]+this.width*B;e[1]=this.padding[b.PaddingSide.BOTTOM]+this.height*M;e[2]=.5;return e};I.setGLViewport=function(e){const B=this.viewport,M=this.padding;e.setViewport(B[0]-M[3],B[1]-M[2],B[2]+M[1]+M[3],B[3]+M[0]+M[2])};I.applyProjection=
function(e,B){e!==J&&p.copy(J,e);J[3]=1;D.transformMat4(J,J,this.projectionMatrix);e=Math.abs(J[3]);p.scale(J,J,1/e);const M=this.fullViewport;B[0]=u.lerp(0,M[0]+M[2],.5+.5*J[0]);B[1]=u.lerp(0,M[1]+M[3],.5+.5*J[1]);B[2]=.5*(J[2]+1);B[3]=e};I.unapplyProjection=function(e,B){const M=this.fullViewport;J[0]=(e[0]/(M[0]+M[2])*2-1)*e[3];J[1]=(e[1]/(M[1]+M[3])*2-1)*e[3];J[2]=(2*e[2]-1)*e[3];J[3]=e[3];D.transformMat4(J,J,this.inverseProjectionMatrix);B[0]=J[0];B[1]=J[1];B[2]=J[2]};I.projectToScreen=function(e,
B){this.projectToRenderScreen(e,E);this.renderToScreen(E,B)};I.projectToRenderScreen=function(e,B){J[0]=e[0];J[1]=e[1];J[2]=e[2];J[3]=1;D.transformMat4(J,J,this.viewProjectionMatrix);if(0===J[3])return null;p.scale(J,J,1/Math.abs(J[3]));e=this.fullViewport;"x"in B?(B.x=u.lerp(0,e[0]+e[2],.5+.5*J[0]),B.y=u.lerp(0,e[1]+e[3],.5+.5*J[1])):(B[0]=u.lerp(0,e[0]+e[2],.5+.5*J[0]),B[1]=u.lerp(0,e[1]+e[3],.5+.5*J[1]),2<B.length&&(B[2]=.5*(J[2]+1)));return B};I.unprojectFromScreen=function(e,B){return this.unprojectFromRenderScreen(this.screenToRender(e,
E),B)};I.unprojectFromRenderScreen=function(e,B){f.multiply(c,this.projectionMatrix,this.viewMatrix);if(!f.invert(c,c))return null;const M=this.fullViewport;J[0]=2*(e[0]-M[0])/M[2]-1;J[1]=2*(e[1]-M[1])/M[3]-1;J[2]=2*e[2]-1;J[3]=1;D.transformMat4(J,J,c);if(0===J[3])return null;B[0]=J[0]/J[3];B[1]=J[1]/J[3];B[2]=J[2]/J[3];return B};I.constrainWindowSize=function(e,B,M,Q=M){e*=this._pixelRatio;B*=this._pixelRatio;return[Math.max(e-M/2,0),Math.max(this.fullHeight-B-Q/2,0),M- -Math.min(e-M/2,0)- -Math.min(this.fullWidth-
e-M/2,0),Q- -Math.min(this.fullHeight-B-Q/2,0)- -Math.min(B-Q/2,0)]};I.computeUp=function(e){e===H.ViewingMode.Global?this._computeUpGlobal():this._computeUpLocal()};I.screenToRender=function(e,B){const M=this.fullHeight-e[1]*this._pixelRatio;B[0]=e[0]*this._pixelRatio;B[1]=M;return B};I.renderToScreen=function(e,B){const M=(this.fullHeight-e[1])/this._pixelRatio;B[0]=e[0]/this._pixelRatio;B[1]=M};I._computeUpGlobal=function(){p.subtract(h,this.center,this.eye);const e=p.length(this.center);1>e?(p.set(this._up,
0,0,1),this._markViewDirty()):Math.abs(p.dot(h,this.center))>.9999*p.length(h)*e||(p.cross(this._up,h,this.center),p.cross(this._up,this._up,h),p.normalize(this._up,this._up),this._markViewDirty())};I._computeUpLocal=function(){p.direction(h,this.eye,this.center);.9999>=Math.abs(h[2])&&(p.scale(h,h,h[2]),p.set(this._up,-h[0],-h[1],1-h[2]),p.normalize(this._up,this._up),this._markViewDirty())};I._compareAndSetView=function(e,B){"number"===typeof e[0]&&isFinite(e[0])&&"number"===typeof e[1]&&isFinite(e[1])&&
"number"===typeof e[2]&&isFinite(e[2])?p.exactEquals(e,B)||(p.copy(B,e),this._markViewDirty()):F.warn("Camera vector contains invalid number, ignoring value")};I._markViewDirty=function(){this._viewProjectionDirty=this._frustumDirty=this._viewDirty=!0};I._recomputeFrustum=function(){this._frustumDirty&&(x.fromMatrix(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)};I._ensureViewClean=function(){this._viewDirty&&(f.lookAt(this._viewMatrix,this.eye,this._center,this._up),
p.set(this._viewForward,-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10]),p.set(this._viewUp,this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9]),p.set(this._viewRight,this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8]),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)};a._createClass(C,[{key:"pixelRatio",get:function(){return this._pixelRatio},set:function(e){this._pixelRatio=0<e?e:1}},{key:"eye",get:function(){return this._ray.origin},set:function(e){this._compareAndSetView(e,
this._ray.origin)}},{key:"center",get:function(){return this._center},set:function(e){this._compareAndSetView(e,this._center)}},{key:"ray",get:function(){p.subtract(this._ray.direction,this.center,this.eye);return this._ray}},{key:"up",get:function(){return this._up},set:function(e){this._compareAndSetView(e,this._up)}},{key:"viewMatrix",get:function(){this._ensureViewClean();return this._viewMatrix},set:function(e){f.copy(this._viewMatrix,e);this._viewDirty=!1;this._frustumDirty=this._viewProjectionDirty=
this._viewInverseTransposeMatrixDirty=!0}},{key:"viewForward",get:function(){this._ensureViewClean();return this._viewForward}},{key:"viewUp",get:function(){this._ensureViewClean();return this._viewUp}},{key:"viewRight",get:function(){this._ensureViewClean();return this._viewRight}},{key:"nearFar",get:function(){return this._nearFar}},{key:"near",get:function(){return this._nearFar[0]},set:function(e){this._nearFar[0]!==e&&(this._nearFar[0]=e,this._frustumDirty=this._viewProjectionDirty=this._inverseProjectionDirty=
this._projectionDirty=!0)}},{key:"far",get:function(){return this._nearFar[1]},set:function(e){this._nearFar[1]!==e&&(this._nearFar[1]=e,this._frustumDirty=this._viewProjectionDirty=this._inverseProjectionDirty=this._projectionDirty=!0)}},{key:"viewport",get:function(){return this._viewport},set:function(e){this.x=e[0];this.y=e[1];this.width=e[2];this.height=e[3]}},{key:"x",get:function(){return this._viewport[0]},set:function(e){e+=this._padding[b.PaddingSide.LEFT];this._viewport[0]!==e&&(this._viewport[0]=
e,this._frustumDirty=this._viewProjectionDirty=this._inverseProjectionDirty=this._projectionDirty=!0)}},{key:"y",get:function(){return this._viewport[1]},set:function(e){e+=this._padding[b.PaddingSide.BOTTOM];this._viewport[1]!==e&&(this._viewport[1]=e,this._frustumDirty=this._viewProjectionDirty=this._inverseProjectionDirty=this._projectionDirty=!0)}},{key:"width",get:function(){return this._viewport[2]},set:function(e){this._viewport[2]!==e&&(this._viewport[2]=e,this._frustumDirty=this._viewProjectionDirty=
this._inverseProjectionDirty=this._projectionDirty=!0)}},{key:"height",get:function(){return this._viewport[3]},set:function(e){this._viewport[3]!==e&&(this._viewport[3]=e,this._frustumDirty=this._viewProjectionDirty=this._inverseProjectionDirty=this._projectionDirty=!0)}},{key:"fullWidth",get:function(){return this._viewport[2]+this._padding[b.PaddingSide.RIGHT]+this._padding[b.PaddingSide.LEFT]},set:function(e){this.width=e-(this._padding[b.PaddingSide.RIGHT]+this._padding[b.PaddingSide.LEFT])}},
{key:"fullHeight",get:function(){return this._viewport[3]+this._padding[b.PaddingSide.TOP]+this._padding[b.PaddingSide.BOTTOM]},set:function(e){this.height=e-(this._padding[b.PaddingSide.TOP]+this._padding[b.PaddingSide.BOTTOM])}},{key:"fullViewport",get:function(){this._fullViewport[0]=this._viewport[0]-this._padding[b.PaddingSide.LEFT];this._fullViewport[1]=this._viewport[1]-this._padding[b.PaddingSide.BOTTOM];this._fullViewport[2]=this.fullWidth;this._fullViewport[3]=this.fullHeight;return this._fullViewport}},
{key:"aspect",get:function(){return this.width/this.height}},{key:"padding",get:function(){return this._padding},set:function(e){if(this._padding[b.PaddingSide.TOP]!==e[b.PaddingSide.TOP]||this._padding[b.PaddingSide.RIGHT]!==e[b.PaddingSide.RIGHT]||this._padding[b.PaddingSide.BOTTOM]!==e[b.PaddingSide.BOTTOM]||this._padding[b.PaddingSide.LEFT]!==e[b.PaddingSide.LEFT])this._viewport[0]+=e[b.PaddingSide.LEFT]-this._padding[b.PaddingSide.LEFT],this._viewport[1]+=e[b.PaddingSide.BOTTOM]-this._padding[b.PaddingSide.BOTTOM],
this._viewport[2]-=e[b.PaddingSide.RIGHT]+e[b.PaddingSide.LEFT]-(this._padding[b.PaddingSide.RIGHT]+this._padding[b.PaddingSide.LEFT]),this._viewport[3]-=e[b.PaddingSide.TOP]+e[b.PaddingSide.BOTTOM]-(this._padding[b.PaddingSide.TOP]+this._padding[b.PaddingSide.BOTTOM]),D.copy(this._padding,e),this._frustumDirty=this._viewProjectionDirty=this._inverseProjectionDirty=this._projectionDirty=!0}},{key:"viewProjectionMatrix",get:function(){this._viewProjectionDirty&&(f.multiply(this._viewProjectionMatrix,
this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1);return this._viewProjectionMatrix}},{key:"projectionMatrix",get:function(){if(this._projectionDirty){const e=this.width,B=this.height,M=this.near*Math.tan(this.fovY/2),Q=M*this.aspect;f.frustum(this._projectionMatrix,-Q*(1+2*this._padding[b.PaddingSide.LEFT]/e),Q*(1+2*this._padding[b.PaddingSide.RIGHT]/e),-M*(1+2*this._padding[b.PaddingSide.BOTTOM]/B),M*(1+2*this._padding[b.PaddingSide.TOP]/B),this.near,this.far);this._projectionDirty=
!1}return this._projectionMatrix},set:function(e){f.copy(this._projectionMatrix,e);this._projectionDirty=!1;this._frustumDirty=this._viewProjectionDirty=this._inverseProjectionDirty=!0}},{key:"inverseProjectionMatrix",get:function(){l.isNone(this._inverseProjectionMatrix)&&(this._inverseProjectionMatrix=d.create());this._inverseProjectionDirty&&f.invert(this._inverseProjectionMatrix,this.projectionMatrix);return this._inverseProjectionMatrix}},{key:"fov",get:function(){return this._fov},set:function(e){this._fov=
e;this._frustumDirty=this._viewProjectionDirty=this._inverseProjectionDirty=this._projectionDirty=!0}},{key:"fovX",get:function(){return v.fovd2fovx(this._fov,this.width,this.height)},set:function(e){this._fov=v.fovx2fovd(e,this.width,this.height);this._frustumDirty=this._viewProjectionDirty=this._inverseProjectionDirty=this._projectionDirty=!0}},{key:"fovY",get:function(){return v.fovd2fovy(this._fov,this.width,this.height)},set:function(e){this._fov=v.fovy2fovd(e,this.width,this.height);this._frustumDirty=
this._viewProjectionDirty=this._inverseProjectionDirty=this._projectionDirty=!0}},{key:"distance",get:function(){return p.distance(this._center,this.eye)}},{key:"frustum",get:function(){this._recomputeFrustum();return this._frustum}},{key:"viewInverseTransposeMatrix",get:function(){if(this._viewInverseTransposeMatrixDirty||this._viewDirty)f.invert(this._viewInverseTransposeMatrix,this.viewMatrix),f.transpose(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=
!1;return this._viewInverseTransposeMatrix}},{key:"perRenderPixelRatio",get:function(){return Math.tan(this.fovX/2)/(this.width/2)}},{key:"perScreenPixelRatio",get:function(){return this.perRenderPixelRatio*this._pixelRatio}},{key:"aboveGround",get:function(){return this.relativeElevation&&0<=this.relativeElevation}}]);return C}();const J=G.create(),c=d.create(),h=w.create(),q=w.create(),E=k.createRenderScreenPointArray3();b.PaddingSide=void 0;(function(C){C[C.TOP=0]="TOP";C[C.RIGHT=1]="RIGHT";C[C.BOTTOM=
2]="BOTTOM";C[C.LEFT=3]="LEFT"})(b.PaddingSide||(b.PaddingSide={}));b.Camera=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(b,a){function g(L,K){L[0]=K[0];L[1]=K[1];return L}function u(L,K,y){L[0]=K;L[1]=y;return L}function l(L,K,y){L[0]=K[0]+y[0];L[1]=K[1]+y[1];return L}function k(L,K,y){L[0]=K[0]-y[0];L[1]=K[1]-y[1];return L}function f(L,K,y){L[0]=K[0]*y[0];L[1]=K[1]*y[1];return L}
function d(L,K,y){L[0]=K[0]/y[0];L[1]=K[1]/y[1];return L}function r(L,K){L[0]=Math.ceil(K[0]);L[1]=Math.ceil(K[1]);return L}function m(L,K){L[0]=Math.floor(K[0]);L[1]=Math.floor(K[1]);return L}function p(L,K,y){L[0]=Math.min(K[0],y[0]);L[1]=Math.min(K[1],y[1]);return L}function w(L,K,y){L[0]=Math.max(K[0],y[0]);L[1]=Math.max(K[1],y[1]);return L}function D(L,K){L[0]=Math.round(K[0]);L[1]=Math.round(K[1]);return L}function G(L,K,y){L[0]=K[0]*y;L[1]=K[1]*y;return L}function x(L,K,y,n){L[0]=K[0]+y[0]*
n;L[1]=K[1]+y[1]*n;return L}function t(L,K){const y=K[0]-L[0];L=K[1]-L[1];return Math.sqrt(y*y+L*L)}function z(L,K){const y=K[0]-L[0];L=K[1]-L[1];return y*y+L*L}function H(L){const K=L[0];L=L[1];return Math.sqrt(K*K+L*L)}function v(L){const K=L[0];L=L[1];return K*K+L*L}function F(L,K){L[0]=-K[0];L[1]=-K[1];return L}function J(L,K){L[0]=1/K[0];L[1]=1/K[1];return L}function c(L,K){var y=K[0];const n=K[1];y=y*y+n*n;0<y&&(y=1/Math.sqrt(y),L[0]=K[0]*y,L[1]=K[1]*y);return L}function h(L,K){return L[0]*
K[0]+L[1]*K[1]}function q(L,K,y){K=K[0]*y[1]-K[1]*y[0];L[0]=L[1]=0;L[2]=K;return L}function E(L,K,y,n){const A=K[0];K=K[1];L[0]=A+n*(y[0]-A);L[1]=K+n*(y[1]-K);return L}function C(L,K){K=K||1;const y=2*a.RANDOM()*Math.PI;L[0]=Math.cos(y)*K;L[1]=Math.sin(y)*K;return L}function I(L,K,y){const n=K[0];K=K[1];L[0]=y[0]*n+y[2]*K;L[1]=y[1]*n+y[3]*K;return L}function e(L,K,y){const n=K[0];K=K[1];L[0]=y[0]*n+y[2]*K+y[4];L[1]=y[1]*n+y[3]*K+y[5];return L}function B(L,K,y){const n=K[0];K=K[1];L[0]=y[0]*n+y[3]*
K+y[6];L[1]=y[1]*n+y[4]*K+y[7];return L}function M(L,K,y){const n=K[0];K=K[1];L[0]=y[0]*n+y[4]*K+y[12];L[1]=y[1]*n+y[5]*K+y[13];return L}function Q(L,K,y,n){const A=K[0]-y[0];K=K[1]-y[1];const O=Math.sin(n);n=Math.cos(n);L[0]=A*n-K*O+y[0];L[1]=A*O+K*n+y[1];return L}function U(L,K){var y=L[0];L=L[1];const n=K[0];K=K[1];let A=y*y+L*L;0<A&&(A=1/Math.sqrt(A));let O=n*n+K*K;0<O&&(O=1/Math.sqrt(O));y=(y*n+L*K)*A*O;return 1<y?0:-1>y?Math.PI:Math.acos(y)}function P(L){return"vec2("+L[0]+", "+L[1]+")"}function W(L,
K){return L[0]===K[0]&&L[1]===K[1]}function R(L,K){const y=L[0];L=L[1];const n=K[0];K=K[1];return Math.abs(y-n)<=a.EPSILON*Math.max(1,Math.abs(y),Math.abs(n))&&Math.abs(L-K)<=a.EPSILON*Math.max(1,Math.abs(L),Math.abs(K))}function T(L,K,y,n,A){let O=K[0]-y[0];y=K[1]-y[1];A=(n[0]*O+n[1]*y)*(A-1);O=n[0]*A;y=n[1]*A;L[0]=K[0]+O;L[1]=K[1]+y;return L}const N=Object.freeze(Object.defineProperty({__proto__:null,copy:g,set:u,add:l,subtract:k,multiply:f,divide:d,ceil:r,floor:m,min:p,max:w,round:D,scale:G,scaleAndAdd:x,
distance:t,squaredDistance:z,length:H,squaredLength:v,negate:F,inverse:J,normalize:c,dot:h,cross:q,lerp:E,random:C,transformMat2:I,transformMat2d:e,transformMat3:B,transformMat4:M,rotate:Q,angle:U,str:P,exactEquals:W,equals:R,projectAndScale:T,len:H,sub:k,mul:f,div:d,dist:t,sqrDist:z,sqrLen:v},Symbol.toStringTag,{value:"Module"}));b.add=l;b.angle=U;b.ceil=r;b.copy=g;b.cross=q;b.dist=t;b.distance=t;b.div=d;b.divide=d;b.dot=h;b.equals=R;b.exactEquals=W;b.floor=m;b.inverse=J;b.len=H;b.length=H;b.lerp=
E;b.max=w;b.min=p;b.mul=f;b.multiply=f;b.negate=F;b.normalize=c;b.projectAndScale=T;b.random=C;b.rotate=Q;b.round=D;b.scale=G;b.scaleAndAdd=x;b.set=u;b.sqrDist=z;b.sqrLen=v;b.squaredDistance=z;b.squaredLength=v;b.str=P;b.sub=k;b.subtract=k;b.transformMat2=I;b.transformMat2d=e;b.transformMat3=B;b.transformMat4=M;b.vec2=N})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),
function(b,a,g,u,l,k,f,d,r,m){function p(){return[l.create(),l.create(),l.create(),l.create(),l.create(),l.create(),l.create(),l.create()]}function w(H,v){r.fromPoints(v[b.PointIndex.FAR_BOTTOM_LEFT],v[b.PointIndex.NEAR_BOTTOM_LEFT],v[b.PointIndex.NEAR_TOP_LEFT],H[b.PlaneIndex.LEFT]);r.fromPoints(v[b.PointIndex.NEAR_BOTTOM_RIGHT],v[b.PointIndex.FAR_BOTTOM_RIGHT],v[b.PointIndex.FAR_TOP_RIGHT],H[b.PlaneIndex.RIGHT]);r.fromPoints(v[b.PointIndex.FAR_BOTTOM_LEFT],v[b.PointIndex.FAR_BOTTOM_RIGHT],v[b.PointIndex.NEAR_BOTTOM_RIGHT],
H[b.PlaneIndex.BOTTOM]);r.fromPoints(v[b.PointIndex.NEAR_TOP_LEFT],v[b.PointIndex.NEAR_TOP_RIGHT],v[b.PointIndex.FAR_TOP_RIGHT],H[b.PlaneIndex.TOP]);r.fromPoints(v[b.PointIndex.NEAR_BOTTOM_LEFT],v[b.PointIndex.NEAR_BOTTOM_RIGHT],v[b.PointIndex.NEAR_TOP_RIGHT],H[b.PlaneIndex.NEAR]);r.fromPoints(v[b.PointIndex.FAR_BOTTOM_RIGHT],v[b.PointIndex.FAR_BOTTOM_LEFT],v[b.PointIndex.FAR_TOP_LEFT],H[b.PlaneIndex.FAR])}function D(H,v){for(let F=0;F<b.NumPlanes.NUM;F++)if(!r.clip(H[F],v))return!1;return!0}b.PlaneIndex=
void 0;(function(H){H[H.LEFT=0]="LEFT";H[H.RIGHT=1]="RIGHT";H[H.BOTTOM=2]="BOTTOM";H[H.TOP=3]="TOP";H[H.NEAR=4]="NEAR";H[H.FAR=5]="FAR"})(b.PlaneIndex||(b.PlaneIndex={}));b.PointIndex=void 0;(function(H){H[H.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT";H[H.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT";H[H.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT";H[H.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT";H[H.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT";H[H.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT";H[H.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT";H[H.FAR_TOP_LEFT=
7]="FAR_TOP_LEFT"})(b.PointIndex||(b.PointIndex={}));const G={bottom:[b.PointIndex.FAR_BOTTOM_RIGHT,b.PointIndex.NEAR_BOTTOM_RIGHT,b.PointIndex.NEAR_BOTTOM_LEFT,b.PointIndex.FAR_BOTTOM_LEFT],near:[b.PointIndex.NEAR_BOTTOM_LEFT,b.PointIndex.NEAR_BOTTOM_RIGHT,b.PointIndex.NEAR_TOP_RIGHT,b.PointIndex.NEAR_TOP_LEFT],far:[b.PointIndex.FAR_BOTTOM_RIGHT,b.PointIndex.FAR_BOTTOM_LEFT,b.PointIndex.FAR_TOP_LEFT,b.PointIndex.FAR_TOP_RIGHT],right:[b.PointIndex.NEAR_BOTTOM_RIGHT,b.PointIndex.FAR_BOTTOM_RIGHT,b.PointIndex.FAR_TOP_RIGHT,
b.PointIndex.NEAR_TOP_RIGHT],left:[b.PointIndex.FAR_BOTTOM_LEFT,b.PointIndex.NEAR_BOTTOM_LEFT,b.PointIndex.NEAR_TOP_LEFT,b.PointIndex.FAR_TOP_LEFT],top:[b.PointIndex.FAR_TOP_LEFT,b.PointIndex.NEAR_TOP_LEFT,b.PointIndex.NEAR_TOP_RIGHT,b.PointIndex.FAR_TOP_RIGHT]};b.NumPlanes=void 0;(function(H){H[H.NUM=6]="NUM"})(b.NumPlanes||(b.NumPlanes={}));b.NumPoints=void 0;(function(H){H[H.NUM=8]="NUM"})(b.NumPoints||(b.NumPoints={}));const x=[f.fromValues(-1,-1,-1,1),f.fromValues(1,-1,-1,1),f.fromValues(1,1,
-1,1),f.fromValues(-1,1,-1,1),f.fromValues(-1,-1,1,1),f.fromValues(1,-1,1,1),f.fromValues(1,1,1,1),f.fromValues(-1,1,1,1)],t=new a.ObjectStack(d.create),z=p();b.computePlanes=w;b.copy=function(H,v){for(let F=0;F<b.NumPlanes.NUM;F++)r.copy(H[F],v[F])};b.create=function(H){return H?[r.create(H[0]),r.create(H[1]),r.create(H[2]),r.create(H[3]),r.create(H[4]),r.create(H[5])]:[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]};b.createPoints=p;b.fromMatrix=function(H,v,F,J=z){H=g.multiply(m.sm4d.get(),
v,H);g.invert(H,H);for(v=0;v<b.NumPoints.NUM;++v){const c=k.transformMat4(m.sv4d.get(),x[v],H);u.set(J[v],c[0]/c[3],c[1]/c[3],c[2]/c[3])}w(F,J)};b.intersectClipRay=function(H,v){for(let F=0;F<b.NumPlanes.NUM;F++)if(!r.clipInfinite(H[F],v))return!1;return!0};b.intersectsAABB=function(H,v){for(let F=0;F<b.NumPlanes.NUM;F++)if(r.isAABBFullyInside(H[F],v))return!1;return!0};b.intersectsLineSegment=function(H,v,F){return D(H,d.fromLineSegmentAndDirection(v,F,t.get()))};b.intersectsPoint=function(H,v){for(let F=
0;F<b.NumPlanes.NUM;F++)if(0<r.signedDistance(H[F],v))return!1;return!0};b.intersectsRay=function(H,v){return D(H,d.fromRay(v,t.get()))};b.intersectsSphere=function(H,v){for(let F=0;F<b.NumPlanes.NUM;F++){const J=H[F];if(J[0]*v[0]+J[1]*v[1]+J[2]*v[2]+J[3]>=v[3])return!1}return!0};b.planePointIndices=G;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ObjectStack":function(){define(["exports","./nextTick"],function(b,a){let g=function(){function u(k){this.allocator=
k;this._items=[];this._itemsPtr=0;this._grow()}var l=u.prototype;l.get=function(){0===this._itemsPtr&&a.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]};l._reset=function(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0};l._grow=function(){for(let k=0;k<Math.max(8,Math.min(this._items.length,1024));k++)this._items.push(this.allocator())};return u}();b.ObjectStack=
g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","./ray","./vectorStacks"],function(b,a,g,u,l){function k(p){return p?{ray:u.create(p.ray),c0:p.c0,c1:p.c1}:{ray:u.create(),c0:0,c1:Number.MAX_VALUE}}function f(p,w,D,G=k()){u.copy(p,G.ray);G.c0=w;G.c1=D;return G}function d(p,w,D=k()){const G=g.length(p.vector);u.fromValues(p.origin,w,D.ray);D.c0=0;D.c1=
G;return D}function r(p,w,D){return g.add(D,p.ray.origin,g.scale(D,p.ray.direction,w))}const m=new a.ObjectStack(()=>({c0:0,c1:0,ray:null}));b.copy=function(p,w=k()){return f(p.ray,p.c0,p.c1,w)};b.create=k;b.fromLineSegment=function(p,w=k()){const D=g.normalize(l.sv3d.get(),p.vector);return d(p,D,w)};b.fromLineSegmentAndDirection=d;b.fromRay=function(p,w=k()){u.copy(p,w.ray);w.c0=0;w.c1=Number.MAX_VALUE;return w};b.fromValues=f;b.getAt=r;b.getEnd=function(p,w){return r(p,p.c1,w)};b.getStart=function(p,
w){return r(p,p.c0,w)};b.wrap=function(p,w,D){const G=m.get();G.ray=p;G.c0=w;G.c1=D;return G};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(b,a,g,u,l,k){function f(p){return p?{origin:l.clone(p.origin),direction:l.clone(p.direction)}:{origin:l.create(),direction:l.create()}}function d(p,
w,D=f()){u.copy(D.origin,p);u.copy(D.direction,w);return D}function r(p,w){p=u.cross(k.sv3d.get(),u.normalize(k.sv3d.get(),p.direction),u.subtract(k.sv3d.get(),w,p.origin));return u.dot(p,p)}const m=new g.ObjectStack(function(){return{origin:null,direction:null}});b.closestPoint=function(p,w,D){w=u.dot(p.direction,u.subtract(D,w,p.origin));u.add(D,p.origin,u.scale(D,p.direction,w));return D};b.copy=function(p,w=f()){return d(p.origin,p.direction,w)};b.create=f;b.distance=function(p,w){return Math.sqrt(r(p,
w))};b.distance2=r;b.equals=function(p,w){return a.equals(p.origin,w.origin)&&a.equals(p.direction,w.direction)};b.fromPoints=function(p,w,D=f()){u.copy(D.origin,p);u.subtract(D.direction,w,p);return D};b.fromValues=d;b.wrap=function(p,w){const D=m.get();D.origin=p;D.direction=w;return D};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(b,a){const g=a.VectorStack.createVec2f64(),
u=a.VectorStack.createVec3f64(),l=a.VectorStack.createVec4f64(),k=a.VectorStack.createMat3f64(),f=a.VectorStack.createMat4f64();a=a.VectorStack.createQuatf64();b.sm3d=k;b.sm4d=f;b.sq4d=a;b.sv2d=g;b.sv3d=u;b.sv4d=l;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./byteSizeEstimations ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),
function(b,a,g,u,l,k,f,d,r,m){let p=function(){function D(x,t,z){this.itemByteSize=x;this.itemCreate=t;this._buffers=[];this._items=[];this._itemsPtr=0;this._itemsPerBuffer=Math.ceil(z/this.itemByteSize)}var G=D.prototype;G.get=function(){0===this._itemsPtr&&u.nextTick(()=>this._reset());const x=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=x;){const t=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let z=0;z<this._itemsPerBuffer;++z)this._items.push(this.itemCreate(t,
z*this.itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]};G._reset=function(){const x=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>x;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0};D.createVec2f64=function(x=w){return new D(16,d.createView,x)};D.createVec3f64=function(x=w){return new D(24,r.createView,x)};D.createVec4f64=function(x=w){return new D(32,m.createView,x)};D.createMat3f64=function(x=
w){return new D(72,l.createView,x)};D.createMat4f64=function(x=w){return new D(128,k.createView,x)};D.createQuatf64=function(x=w){return new D(32,f.createView,x)};a._createClass(D,[{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}]);return D}();const w=4*g.ByteSizeUnit.KILOBYTES;b.VectorStack=p;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat3f64":function(){define(["exports"],function(b){function a(){return[1,
0,0,0,1,0,0,0,1]}function g(f){return[f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8]]}function u(f,d,r,m,p,w,D,G,x){return[f,d,r,m,p,w,D,G,x]}function l(f,d){return new Float64Array(f,d,9)}const k=Object.freeze(Object.defineProperty({__proto__:null,create:a,clone:g,fromValues:u,createView:l},Symbol.toStringTag,{value:"Module"}));b.clone=g;b.create=a;b.createView=l;b.fromValues=u;b.mat3f64=k})},"esri/chunks/quatf64":function(){define(["exports"],function(b){function a(){return[0,0,0,1]}function g(d){return[d[0],
d[1],d[2],d[3]]}function u(d,r,m,p){return[d,r,m,p]}function l(d,r){return new Float64Array(d,r,4)}const k=a(),f=Object.freeze(Object.defineProperty({__proto__:null,create:a,clone:g,fromValues:u,createView:l,IDENTITY:k},Symbol.toStringTag,{value:"Module"}));b.IDENTITY=k;b.clone=g;b.create=a;b.createView=l;b.fromValues=u;b.quatf64=f})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../core/maybe ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/sphere ./vector ./vectorStacks ../../views/3d/support/mathUtils".split(" "),
function(b,a,g,u,l,k,f,d,r){function m(e=q){return[e[0],e[1],e[2],e[3]]}function p(e,B){return w(B[0],B[1],B[2],B[3],e)}function w(e,B,M,Q,U=m()){U[0]=e;U[1]=B;U[2]=M;U[3]=Q;return U}function D(e,B,M){var Q=B[0]*B[0]+B[1]*B[1]+B[2]*B[2];Q=1E-5<Math.abs(Q-1)&&1E-12<Q?1/Math.sqrt(Q):1;M[0]=B[0]*Q;M[1]=B[1]*Q;M[2]=B[2]*Q;M[3]=-(M[0]*e[0]+M[1]*e[1]+M[2]*e[2]);return M}function G(e,B,M,Q=m()){var U=M[0]-B[0],P=M[1]-B[1],W=M[2]-B[2];M=e[0]-B[0];const R=e[1]-B[1],T=e[2]-B[2];B=P*T-W*R;W=W*M-U*T;U=U*R-P*
M;P=B*B+W*W+U*U;P=1E-5<Math.abs(P-1)&&1E-12<P?1/Math.sqrt(P):1;Q[0]=B*P;Q[1]=W*P;Q[2]=U*P;Q[3]=-(Q[0]*e[0]+Q[1]*e[1]+Q[2]*e[2]);return Q}function x(e,B,M,Q,U){if(3>e.count)return!1;e.getVec(M,v);let P=Q,W=!1;for(;P<e.count-1&&!W;)e.getVec(P,F),P++,W=!u.exactEquals(v,F);if(!W)return!1;P=Math.max(P,U);for(W=!1;P<e.count&&!W;)e.getVec(P,J),P++,u.subtract(c,v,F),u.normalize(c,c),u.subtract(h,F,J),u.normalize(h,h),W=!u.exactEquals(v,J)&&!u.exactEquals(F,J)&&.99619469809>Math.abs(u.dot(c,h));if(!W)return 0===
M&&1===Q&&2===U?!1:x(e,B,0,1,2);G(v,F,J,B);return!0}function t(e,B,M){e=u.scale(d.sv3d.get(),e,u.dot(e,B));u.subtract(M,B,e);return M}function z(e,B){return u.dot(e,B)+e[3]}function H(e,B,M,Q,U){const P=u.dot(e,M);if(0===P)return!1;e=-(u.dot(e,B)+e[3])/P;Q&E.CLAMP&&(e=a.clamp(e,0,1));if(!(Q&E.INFINITE_MIN)&&0>e||!(Q&E.INFINITE_MAX)&&1<e)return!1;u.add(U,B,u.scale(U,M,e));return!0}const v=l.create(),F=l.create(),J=l.create(),c=l.create(),h=l.create(),q=[0,0,1,0];var E;(function(e){e[e.NONE=0]="NONE";
e[e.CLAMP=1]="CLAMP";e[e.INFINITE_MIN=4]="INFINITE_MIN";e[e.INFINITE_MAX=8]="INFINITE_MAX"})(E||(E={}));const C=E.INFINITE_MIN|E.INFINITE_MAX,I=E.INFINITE_MAX;b.UP=q;b.clip=function(e,B){const M=u.dot(e,B.ray.direction);e=-z(e,B.ray.origin);if(0>e&&0<=M)return!1;if(-1E-6<M&&1E-6>M)return 0<e;if((0>e||0>M)&&!(0>e&&0>M))return!0;e/=M;0<M?e<B.c1&&(B.c1=e):e>B.c0&&(B.c0=e);return B.c0<=B.c1};b.clipInfinite=function(e,B){const M=u.dot(e,B.ray.direction);e=-z(e,B.ray.origin);if(-1E-6<M&&1E-6>M)return 0<
e;e/=M;0<M?e<B.c1&&(B.c1=e):e>B.c0&&(B.c0=e);return B.c0<=B.c1};b.copy=p;b.create=m;b.distance=function(e,B){return Math.abs(z(e,B))};b.fromManyPoints=function(e,B){return x(e,B,0,1,2)};b.fromManyPointsSampleAt=x;b.fromNormalAndOffset=function(e,B,M){u.copy(M,e);M[3]=B;return M};b.fromPoints=G;b.fromPositionAndNormal=D;b.fromValues=w;b.fromVectorsAndPoint=function(e,B,M,Q){u.cross(J,B,e);return D(M,J,Q)};b.intersectLine=function(e,B,M,Q){M=u.subtract(d.sv3d.get(),M,B);return H(e,B,M,C,Q)};b.intersectLineSegment=
function(e,B,M){return H(e,B.origin,B.vector,E.NONE,M)};b.intersectLineSegmentClamp=function(e,B,M){return H(e,B.origin,B.vector,E.CLAMP,M)};b.intersectRay=function(e,B,M){return g.isSome(B)?H(e,B.origin,B.direction,I,M):!1};b.isAABBFullyInside=function(e,B){const M=B[0],Q=B[1],U=B[2],P=B[3],W=B[4];B=B[5];return 0<=e[0]*(0<e[0]?M:P)+e[1]*(0<e[1]?Q:W)+e[2]*(0<e[2]?U:B)+e[3]};b.isPointInside=function(e,B){return 0<=z(e,B)};b.isPointOutside=function(e,B){return 0>z(e,B)};b.isSphereFullyInside=function(e,
B){return 0<=z(e,k.getCenter(B))-B[3]};b.isSphereFullyOutside=function(e,B){return 0>z(e,k.getCenter(B))+B[3]};b.negate=function(e,B){B[0]=-e[0];B[1]=-e[1];B[2]=-e[2];B[3]=-e[3];return B};b.normal=function(e){return e};b.projectPoint=function(e,B,M){const Q=u.scale(d.sv3d.get(),e,-e[3]);B=u.subtract(d.sv3d.get(),B,Q);e=t(e,B,d.sv3d.get());u.add(M,e,Q);return M};b.projectPointLocal=function(e,B,M,Q){var U=d.sv3d.get(),P=d.sv3d.get();r.tangentFrame(e,U,P);B=u.subtract(d.sv3d.get(),M,B);U=f.projectPointSignedLength(U,
B);P=f.projectPointSignedLength(P,B);e=f.projectPointSignedLength(e,B);return u.set(Q,U,P,e)};b.projectVector=t;b.setOffsetFromPoint=function(e,B,M){B!==e&&p(e,B);e[3]=-u.dot(e,M);return e};b.signedDistance=z;b.wrap=function(e=q[0],B=q[1],M=q[2],Q=q[3]){return w(e,B,M,Q,d.sv4d.get())};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/maybe ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p,w,D,G){function x(){return m.create()}function t(A,O=x()){return r.copy(O,A)}function z(A,O){return m.fromValues(A[0],A[1],A[2],O)}function H(A){return A}function v(A){A[0]=A[1]=A[2]=A[3]=0}function F(A,O){A[0]=A[1]=A[2]=0;A[3]=O;return A}function J(A){return A[3]}function c(A){return A}function h(A,O,S,Y){return m.fromValues(A,O,S,Y)}function q(A,O,S){A!==S&&f.copy(S,A);S[3]=A[3]+O;return S}function E(A,O,S){L.error("sphere.setExtent is not yet supported");return A===
S?S:t(A,S)}function C(A,O,S){if(l.isNone(O))return!1;const {origin:Y,direction:ba}=O;var aa=K;aa[0]=Y[0]-A[0];aa[1]=Y[1]-A[1];aa[2]=Y[2]-A[2];O=ba[0]*ba[0]+ba[1]*ba[1]+ba[2]*ba[2];const ea=2*(ba[0]*aa[0]+ba[1]*aa[1]+ba[2]*aa[2]);A=ea*ea-4*O*(aa[0]*aa[0]+aa[1]*aa[1]+aa[2]*aa[2]-A[3]*A[3]);if(0>A)return!1;aa=Math.sqrt(A);A=(-ea-aa)/(2*O);O=(-ea+aa)/(2*O);if(0>A||O<A&&0<O)A=O;if(0>A)return!1;S&&(S[0]=Y[0]+ba[0]*A,S[1]=Y[1]+ba[1]*A,S[2]=Y[2]+ba[2]*A);return!0}function I(A,O){return C(A,O,null)}function e(A,
O,S){if(C(A,O,S))return S;A=B(A,O,G.sv3d.get());f.add(S,O.origin,f.scale(G.sv3d.get(),O.direction,f.distance(O.origin,A)/f.length(O.direction)));return S}function B(A,O,S){const Y=G.sv3d.get(),ba=G.sm4d.get();f.cross(Y,O.origin,O.direction);const aa=A[3];f.cross(S,Y,O.origin);f.scale(S,S,1/f.length(S)*aa);A=P(A,O.origin);O=D.angle(O.origin,S);k.fromRotation(ba,O+A,Y);f.transformMat4(S,S,ba);return S}function M(A,O,S){if(C(A,O,S))return S;w.closestPoint(O,A,S);return Q(A,S,S)}function Q(A,O,S){O=f.subtract(G.sv3d.get(),
O,A);O=f.scale(G.sv3d.get(),O,A[3]/f.length(O));return f.add(S,O,A)}function U(A,O){O=f.subtract(G.sv3d.get(),O,A);O=f.squaredLength(O);return Math.sqrt(Math.abs(O-A[3]*A[3]))}function P(A,O){O=f.subtract(G.sv3d.get(),O,A);O=f.length(O);A=A[3];return u.acosClamped(A/(A+Math.abs(A-O)))}function W(A,O,S,Y){A=f.subtract(y,O,A);switch(S){case p.Axis.X:return S=u.cartesianToSpherical(A,y)[2],f.set(Y,-Math.sin(S),Math.cos(S),0);case p.Axis.Y:return A=u.cartesianToSpherical(A,y),S=A[1],A=A[2],O=Math.sin(S),
f.set(Y,-O*Math.cos(A),-O*Math.sin(A),Math.cos(S));case p.Axis.Z:return f.normalize(Y,A)}}function R(A,O){O=f.subtract(n,O,A);return f.length(O)-A[3]}function T(A,O,S,Y){const ba=R(A,O);A=W(A,O,p.Axis.Z,n);S=f.scale(n,A,S-ba);return f.add(Y,O,S)}function N(A,O){O=f.squaredDistance(A,O);A=A[3];return O<=A*A}const L=g.getLogger("esri.geometry.support.sphere"),K=d.create(),y=d.create(),n=d.create();a=x();g=Object.freeze(Object.defineProperty({__proto__:null,create:x,copy:t,fromCenterAndRadius:z,wrap:H,
clear:v,fromRadius:F,getRadius:J,getCenter:c,fromValues:h,elevate:q,setExtent:E,intersectRay:C,intersectsRay:I,intersectRayClosestSilhouette:e,closestPointOnSilhouette:B,closestPoint:M,projectPoint:Q,distanceToSilhouette:U,angleToSilhouette:P,axisAt:W,altitudeAt:R,setAltitudeAt:T,containsPoint:N,tmpSphere:a},Symbol.toStringTag,{value:"Module"}));b.altitudeAt=R;b.angleToSilhouette=P;b.axisAt=W;b.clear=v;b.closestPoint=M;b.closestPointOnSilhouette=B;b.containsPoint=N;b.copy=t;b.create=x;b.distanceToSilhouette=
U;b.elevate=q;b.fromCenterAndRadius=z;b.fromRadius=F;b.fromValues=h;b.getCenter=c;b.getRadius=J;b.intersectRay=C;b.intersectRayClosestSilhouette=e;b.intersectsRay=I;b.projectPoint=Q;b.setAltitudeAt=T;b.setExtent=E;b.sphere=g;b.tmpSphere=a;b.wrap=H})},"esri/geometry/support/Axis":function(){define(["exports"],function(b){b.Axis=void 0;var a=b.Axis||(b.Axis={});a[a.X=0]="X";a[a.Y=1]="Y";a[a.Z=2]="Z";Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/vector":function(){define(["exports",
"../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],function(b,a,g,u){const l=u.create(),k=u.create();b.angle=function(f,d){f=g.dot(f,d)/(g.length(f)*g.length(d));return-a.acosClamped(f)};b.angleAroundAxis=function(f,d,r){g.normalize(l,f);g.normalize(k,d);f=g.dot(l,k);f=a.acosClamped(f);d=g.cross(l,l,k);return 0>g.dot(d,r)?2*Math.PI-f:f};b.projectPoint=function(f,d,r){d=g.dot(f,d)/g.dot(f,f);return g.scale(r,f,d)};b.projectPointSignedLength=function(f,d){return g.dot(f,d)/g.length(f)};
Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(b,a,g,u){const l=u.create(),k=u.create(),f=u.create(),d=u.create(),r=u.create();b.angle=function(m,p,w){m=g.normalize(d,m);p=g.normalize(r,p);const D=a.acosClamped(g.dot(m,p));return w&&(m=g.cross(f,m,p),0>g.dot(m,w))?-D:D};b.bilerp=function(m,p,w,D,G,x){m+=(p-
m)*G;return m+(w+(D-w)*G-m)*x};b.cosCapped=function(m,p){return m>p?Math.cos(p):Math.cos(m)};b.fovx2fovy=function(m,p,w){return 2*Math.atan(w*Math.tan(.5*m)/p)};b.fovy2fovx=function(m,p,w){return 2*Math.atan(p*Math.tan(.5*m)/w)};b.makeOrthonormal=function(m,p,w){w=w||m;const D=g.dot(m,p);g.set(w,m[0]-D*p[0],m[1]-D*p[1],m[2]-D*p[2]);g.normalize(w,w)};b.makePiecewiseLinearFunction=function(m){const p=m.length;return w=>{if(w<=m[0][0])return m[0][1];if(w>=m[p-1][0])return m[p-1][1];let D=1;for(;w>m[D][0];)D++;
const G=m[D][0];w=(G-w)/(G-m[D-1][0]);return w*m[D-1][1]+(1-w)*m[D][1]}};b.maxScale=function(m){return Math.sqrt(Math.max(m[0]*m[0]+m[4]*m[4]+m[8]*m[8],m[1]*m[1]+m[5]*m[5]+m[9]*m[9],m[2]*m[2]+m[6]*m[6]+m[10]*m[10]))};b.moduloPositive=function(m,p){return(m%p+p)%p};b.planeFromPoints=function(m,p,w,D){g.subtract(l,p,m);g.subtract(k,w,m);g.cross(D,l,k);g.normalize(D,D);D[3]=-g.dot(m,D)};b.scaleFromMatrix=function(m,p){g.set(m,Math.sqrt(p[0]*p[0]+p[4]*p[4]+p[8]*p[8]),Math.sqrt(p[1]*p[1]+p[5]*p[5]+p[9]*
p[9]),Math.sqrt(p[2]*p[2]+p[6]*p[6]+p[10]*p[10]));return m};b.slerp=function(m,p,w,D=u.create()){const G=g.length(m);var x=g.length(p),t=g.dot(m,p)/(G*x);if(.9999999999999999>t){t=Math.acos(t);const z=((1-w)*G+w*x)/Math.sin(t);x=z/x*Math.sin(w*t);g.scale(d,m,z/G*Math.sin((1-w)*t));g.scale(r,p,x);return g.add(D,d,r)}return g.lerp(D,m,p,w)};b.slerpTangent=function(m,p,w,D=u.create(),G=u.create()){const x=g.length(m),t=g.length(p);var z=g.dot(m,p)/(x*t);if(.9999999999999999>z){z=Math.acos(z);const H=
Math.sin(z),v=Math.sin(w*z),F=Math.sin((1-w)*z),J=(1-w)*x+w*t;{const c=J/H,h=c/t*v;g.scale(d,m,c/x*F);g.scale(r,p,h);g.add(D,d,r)}g.scale(d,m,1/x*(-Math.cos((1-w)*z)*z*J+F*(-x+t)));g.scale(r,p,1/t*(Math.cos(w*z)*z*J+v*(-x+t)));g.add(G,d,r);g.scale(G,G,1/H);return G}g.lerp(D,m,p,w);g.subtract(G,p,m);g.normalize(G,G);return G};b.tangentFrame=function(m,p,w){Math.abs(m[0])>Math.abs(m[1])?g.set(p,0,1,0):g.set(p,1,0,0);g.cross(w,m,p);g.normalize(p,p);g.cross(p,w,m);g.normalize(w,w)};Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/RenderPass":function(){define(["exports"],function(b){b.RenderPass=void 0;var a=b.RenderPass||(b.RenderPass={});a[a.MATERIAL=0]="MATERIAL";a[a.MATERIAL_ALPHA=1]="MATERIAL_ALPHA";a[a.MATERIAL_DEPTH=2]="MATERIAL_DEPTH";a[a.MATERIAL_NORMAL=3]="MATERIAL_NORMAL";a[a.MATERIAL_DEPTH_SHADOWMAP_ALL=4]="MATERIAL_DEPTH_SHADOWMAP_ALL";a[a.MATERIAL_HIGHLIGHT=5]="MATERIAL_HIGHLIGHT";a[a.MATERIAL_DEPTH_SHADOWMAP_DEFAULT=
6]="MATERIAL_DEPTH_SHADOWMAP_DEFAULT";a[a.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT=7]="MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT";Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/RenderSlot":function(){define(["exports"],function(b){b.RenderSlot=void 0;var a=b.RenderSlot||(b.RenderSlot={});a[a.INTEGRATED_MESH=0]="INTEGRATED_MESH";a[a.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN";a[a.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL";a[a.TRANSPARENT_MATERIAL=3]=
"TRANSPARENT_MATERIAL";a[a.TRANSPARENT_TERRAIN=4]="TRANSPARENT_TERRAIN";a[a.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL=5]="TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL";a[a.OCCLUDED_TERRAIN=6]="OCCLUDED_TERRAIN";a[a.OCCLUDER_MATERIAL=7]="OCCLUDER_MATERIAL";a[a.TRANSPARENT_OCCLUDER_MATERIAL=8]="TRANSPARENT_OCCLUDER_MATERIAL";a[a.OCCLUSION_PIXELS=9]="OCCLUSION_PIXELS";a[a.POSTPROCESSING_ENVIRONMENT_OPAQUE=10]="POSTPROCESSING_ENVIRONMENT_OPAQUE";a[a.POSTPROCESSING_ENVIRONMENT_TRANSPARENT=11]="POSTPROCESSING_ENVIRONMENT_TRANSPARENT";
a[a.LASERLINES=12]="LASERLINES";a[a.LASERLINES_CONTRAST_CONTROL=13]="LASERLINES_CONTRAST_CONTROL";a[a.HUD_MATERIAL=14]="HUD_MATERIAL";a[a.LABEL_MATERIAL=15]="LABEL_MATERIAL";a[a.LINE_CALLOUTS=16]="LINE_CALLOUTS";a[a.LINE_CALLOUTS_HUD_DEPTH=17]="LINE_CALLOUTS_HUD_DEPTH";a[a.DRAPED_MATERIAL=18]="DRAPED_MATERIAL";a[a.DRAPED_WATER=19]="DRAPED_WATER";a[a.VOXEL=20]="VOXEL";a[a.MAX_SLOTS=21]="MAX_SLOTS";Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p,w,D){u=function(G){function x(z){z=G.call(this,z)||this;z.elevationInfo=null;z.graphics=new w.GraphicsCollection;z.screenSizePerspectiveEnabled=!0;z.type="graphics";z.internal=!1;return z}b._inheritsLoose(x,G);var t=x.prototype;t.destroy=function(){this.removeAll();this.graphics.destroy()};t.add=function(z){this.graphics.add(z);return this};t.addMany=function(z){this.graphics.addMany(z);return this};t.removeAll=function(){this.graphics.removeAll();return this};t.remove=
function(z){this.graphics.remove(z)};t.removeMany=function(z){this.graphics.removeMany(z)};t.on=function(z,H){return G.prototype.on.call(this,z,H)};t.graphicChanged=function(z){this.emit("graphic-update",z)};return x}(m.BlendLayer(p.ScaleRangeLayer(r)));a.__decorate([g.property({type:D.default})],u.prototype,"elevationInfo",void 0);a.__decorate([g.property(d.owningCollectionProperty(w.GraphicsCollection,"graphics"))],u.prototype,"graphics",void 0);a.__decorate([g.property({type:["show","hide"]})],
u.prototype,"listMode",void 0);a.__decorate([g.property()],u.prototype,"screenSizePerspectiveEnabled",void 0);a.__decorate([g.property({readOnly:!0})],u.prototype,"type",void 0);a.__decorate([g.property({constructOnly:!0})],u.prototype,"internal",void 0);return u=a.__decorate([f.subclass("esri.layers.GraphicsLayer")],u)})},"fx3d/views/3d/effects/Effect":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare esri/core/Evented esri/geometry/support/webMercatorUtils esri/geometry/Extent esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/vec2f64 esri/core/libs/gl-matrix-2/vec2 esri/views/3d/webgl-engine/lib/GridLocalOriginFactory esri/geometry/projection ../webgl-engine-extensions/GLVerTexture ../support/fx3dUtils".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p,w,D){var G,x,t,z,H,v=d.vec2f64;r=r.vec2;f=f.vec3f64;var F=(f.create(),f.create()),J={};g=g([u],{declaredClass:"esri.views.3d.effects.Effect",effectName:"Effect",constructor:function(c){this._view=c.view;this._layerView=c.layerView;this._renderCoordsHelper=c.view.renderCoordsHelper;this._renderSpatialReference=c.view.renderSpatialReference;this._layer=c.layer;this._wgs84SpatialReference=this._layerView._fx3dSpatialReference;this._stateStack=[];this._currentVizPage=0;
this._preVizId=-1;this._repeatCount=0;this._hasSentReady=this._isReachedRepeatLimit=!1;this._vizFieldDefault="default";this._vizFields=c.layer.vizFields;this._vizFieldMinMaxs={};this._vizFieldMinMaxs[this._vizFieldDefault]={min:0,max:0,maxFeature:null};a.forEach(this._vizFields,function(h){this._vizFieldMinMaxs[h]={min:null,max:null,maxFeature:null}}.bind(this));this._eventHandlers=[];this._vizFieldVerTextureSize=v.create();this._vizFieldVerTextures={};this._allLoaded=this._needsAllLoaded=!1;this._material=
this._shaderSnippets=this._gl=null;this._addedGraphicsCount=this._toAddGraphicsIndex=0;this._addedGraphics=[];this._resetState();this._resetTime();this._pause=!1;this._eventHandlers.push(this._layer.watch("pauseTag",function(h,q,E){this.ready&&(this._pause=h,h?h&&(this._pausedTime=this.time):this._lastTime=performance.now())}.bind(this)));this._spin=!1;this._eventHandlers.push(this._layer.watch("spinTag",function(h,q,E){return h&&"local"==this._view.viewingMode?(console.warn("Spinning operation is not supported in local scene."),
void(this._layer.spinTag=!1)):(this._interactionHandlers||(this._interactionHandlers=[],this._stopPropagation=function(C){C["native"].preventDefault();C.stopPropagation()}),1==h?(this._interactionHandlers.push(this._view.on("mouse-wheel",this._stopPropagation)),this._interactionHandlers.push(this._view.on("click",this._stopPropagation)),this._interactionHandlers.push(this._view.on("double-click",this._stopPropagation)),this._interactionHandlers.push(this._view.on("hold",this._stopPropagation)),this._interactionHandlers.push(this._view.on("drag",
this._stopPropagation)),this._interactionHandlers.push(this._view.on("key-down",this._stopPropagation)),this._interactionHandlers.push(this._view.on("key-up",this._stopPropagation)),this._interactionHandlers.push(this._view.on("pointer-down",this._stopPropagation)),this._interactionHandlers.push(this._view.on("pointer-up",this._stopPropagation)),this._interactionHandlers.push(this._view.on("pointer-move",this._stopPropagation))):this._interactionHandlers instanceof Array&&(this._interactionHandlers.forEach(function(C){C&&
(C.remove(),C=null)}),this._interactionHandlers=[]),void(this._spin=h))}.bind(this)));this._addLayerWatchHandler("visible");this.renderingInfo={visible:!0,repeat:5,transparency:100,animationInterval:5};this.renderMaxCountter=this.renderCountter=this.orderId=0},_addLayerWatchHandler:function(c){b.isString(c)&&this._eventHandlers.push(this._layer.watch(c,function(h,q,E){this.renderingInfo[E]=h;"visible"===c.toLowerCase()&&this.ready&&(h?this._lastTime=performance.now():h||(this._pausedTime=this.time))}.bind(this)))},
_resetState:function(){this._pause=this.ready=!1;this._shapeDirty=this._vacDirty=!0;this._isAddingGeometry=!1;this._colorBarDirty=this._colourMapDirty=this._renderingInfoDirty=!0;this._hasSentReady=this._firstAnimatedTo=this._isReachedRepeatLimit=this._shadersReady=!1},_resetTime:function(){this._pausedTime=this.time=this._lastTime=0},_pushState:function(c){for(var h=0;h<this._stateStack.length;h++)if(this._stateStack[h][0]==c[0])return;this._stateStack.push(c)},_restoreState:function(c){for(var h=
0;h<this._stateStack.length;h++)"function"==typeof c[this._stateStack[h][0]]&&c[this._stateStack[h][0]].apply(c,this._stateStack[h][1]instanceof Array?this._stateStack[h][1]:[this._stateStack[h][1]]);this._stateStack=[]},destroy:function(){a.forEach(this._eventHandlers,function(h){"function"==typeof h.remove&&h.remove()||"function"==typeof h.destroy&&h.destroy()});this._eventHandlers=[];this._interactionHandlers instanceof Array&&(a.forEach(this._interactionHandlers,function(h){"function"==typeof h.remove&&
h.remove()||"function"==typeof h.destroy&&h.destroy();h=null}),this._interactionHandlers=[]);this._resetState();this._destroy("_material");var c=Object.getOwnPropertyNames(this._vizFieldVerTextures);a.forEach(c,function(h){this._vizFieldVerTextures[h]instanceof w&&this._vizFieldVerTextures[h].dispose()}.bind(this))},_dispose:function(c){this[c]&&(this[c].dispose(),delete this[c]);this[c]=null},_destroy:function(c){this[c]&&(this[c].destroy(),delete this[c]);this[c]=null},initEffect:function(){this._effectConfig=
D.effectConfig(this.effectName);this._initRenderingInfo(this._effectConfig);var c=this._layer._get("renderingInfo");if(this._layer&&c){var h=Object.getOwnPropertyNames(c),q=Object.getOwnPropertyNames(this.renderingInfo),E=this;a.forEach(h,function(C){q?a.some(q,function(I){if(C.toLowerCase()===I.toLowerCase())return"shapetype"===C.toLowerCase()?E.renderingInfo[I]=c[C].toLowerCase():E.renderingInfo[I]=c[C],!0}):E.renderingInfo[C]=c[C]})}this._renderingInfoChange(this.renderingInfo);this._updateDefaultLabelHeight();
this._eventHandlers.push(this._layer.on("fx3d-add-graphics",function(C){this._needsAllLoaded||this._addGraphicsHandler(C)}.bind(this)));this._eventHandlers.push(this._layer.on("all-features-loaded",function(C){this._needsAllLoaded?(this._addGraphicsHandler(C),this._allLoaded=!0):this._shapeDirty=!0;this._layer.emit("effect-ok-test")}.bind(this)));this._eventHandlers.push(this._layer.on("fx3d-active-viz-field",b.hitch(this,this._activeVizFieldHandler)));this._eventHandlers.push(this._layer.watch("renderingInfo",
this._renderingInfoChange.bind(this)))},_toWGS84Extent:function(c){var h={xmin:c.xmin,ymin:c.ymin,xmax:c.xmax,ymax:c.ymax};return c.spatialReference&&(J.x=c.xmin,J.y=c.ymin,J.z=0,J.spatialReference=c.spatialReference,p.projectPointToVector(J,F,this._wgs84SpatialReference),h.xmin=F[0],h.ymin=F[1],J.x=c.xmax,J.y=c.ymax,p.projectPointToVector(J,F,this._wgs84SpatialReference),h.xmax=F[0],h.ymax=F[1]),h},_calculateExtentCenter:function(c){var h=c.length;if(h){var q,E,C;if("point"==this._layer.geometryType){var I=
q=c[0].geometry.longitude;var e=E=c[0].geometry.latitude;for(C=1;C<h;C++){var B=c[C];null!=B.geometry&&(B.geometry.longitude<I&&(I=B.geometry.longitude),B.geometry.longitude>q&&(q=B.geometry.longitude),B.geometry.latitude<e&&(e=B.geometry.latitude),B.geometry.latitude>E&&(E=B.geometry.latitude))}}else if("polyline"==this._layer.geometryType||"polygon"==this._layer.geometryType){var M=c[0].geometry.extent;I=M.xmin;q=M.xmax;e=M.ymin;E=M.ymax;for(C=1;C<h;C++)B=c[C],null!=B.geometry&&null!=B.geometry.extent&&
(M=B.geometry.extent,M.xmin<I&&(I=M.xmin),M.xmax>q&&(q=M.xmax),M.ymin<e&&(e=M.ymin),M.ymax>E&&(E=M.ymax))}return new k(I,e,q,E,this._wgs84SpatialReference)}return null},_addGraphicsHandler:function(c){b.isArray(c.graphics)&&0<c.graphics.length&&(this._toAddGraphicsIndex=this._addedGraphicsCount,this._addedGraphicsCount+=c.graphics.length,this._needsAllLoaded?this._addedGraphics=c.graphics:this._addedGraphics=this._addedGraphics.concat(c.graphics),this._isAddingGeometry=!0,this._shapeDirty=!0)},_activeVizFieldHandler:function(c){"number"==
typeof c.currentVizPage&&((0>this._currentVizPage||this._currentVizPage>=this._vizFields.length)&&(this._currentVizPage=0),this.ready=!1,this._hasSentReady=!1,this._restoreRenderingInfo(),b.isObject(c.newRenderingInfo)&&b.mixin(this.renderingInfo,c.newRenderingInfo),this._shapeDirty=!1,this._colorBarDirty=!1,this._colourMapDirty=!1,this._renderingInfoChange(this.renderingInfo),this._updateDefaultLabelHeight(),this.update(),this._resetAnimation(),this._currentVizPage=c.currentVizPage,this._updateVizFieldMinMaxToLayer(),
this._layerView._updateSelectedFeatureLabel(),this._emitSyncEvent())},_resetAnimation:function(){this._repeatCount=0;this._preVizId=-1;this._isReachedRepeatLimit=!1;this._resetTime();this._layer.startAnimation()},_resetAddGeometries:function(){this._addedGraphics=[];this._isAddingGeometry=!1},_allGraphics:function(){return this._layerView.getLoadedGraphics()},_renderingInfoChange:function(c,h,q){c!==h&&c&&b.isObject(c)&&this._doRenderingInfoChange(c)},_doRenderingInfoChange:function(c){this._renderingInfoDirty=
!0;for(var h in c)c.hasOwnProperty(h)&&this.renderingInfo.hasOwnProperty(h)&&("visible"===h.toLowerCase()?(this._layer&&(this._layer[h]=c[h]),this.renderingInfo[h]=c[h]):"repeat"!==h.toLowerCase()&&"animationinterval"!==h.toLowerCase()||(this._resetAnimation(),this._clampScope(c,h),this.renderingInfo[h]=c[h]))},_initRenderingInfo:function(c){this._scopes={};c&&b.isObject(c)&&b.isArray(c.renderingInfo)&&a.forEach(c.renderingInfo,function(h){"shapetype"===h.name.toLowerCase()?this.renderingInfo[h.name]=
h.defaultValue.toLowerCase():this.renderingInfo[h.name]=h.defaultValue;b.isArray(h.scope)&&(this._scopes[h.name]=h.scope)}.bind(this))},_restoreRenderingInfo:function(){this.renderingInfo={visible:!0,repeat:5,transparency:100,animationInterval:5};this._initRenderingInfo(this._effectConfig);var c=this._layer._get("renderingInfo");if(this._layer&&c){var h=Object.getOwnPropertyNames(c),q=Object.getOwnPropertyNames(this.renderingInfo),E=this;a.forEach(h,function(C){q?a.some(q,function(I){if(C.toLowerCase()===
I.toLowerCase())return"shapetype"===C.toLowerCase()?E.renderingInfo[I]=c[C].toLowerCase():E.renderingInfo[I]=c[C],!0}):E.renderingInfo[C]=c[C]})}this._updateDefaultLabelHeight()},_clampScope:function(c,h){var q=this._scopes[h];b.isArray(q)&&"number"==typeof c[h]&&"number"==typeof q[0]&&"number"==typeof q[1]&&(c[h]<q[0]?c[h]=q[0]:c[h]>q[1]&&(c[h]=q[1]),0>c[h]&&(c[h]=0))},_updateRenderingInfo:function(){var c=!0;(!this._needsAllLoaded||this._needsAllLoaded&&this._allLoaded)&&0<this._allGraphics().length&&
(this._colorBarDirty?(c=this._initColorBar(),c&&(this._colorBarDirty=!1)):c=!0,this._colourMapDirty&&c?(c=this._initColourMap(),c&&(this._colourMapDirty=!1)):c=!0,c=!(!this._renderingInfoDirty||!c),this._renderingInfoDirty=!c)},_updateRenderingGeometry:function(){var c=!0;(!this._needsAllLoaded||this._needsAllLoaded&&this._allLoaded)&&0<this._allGraphics().length&&(c=this._initRenderContext(),c?(c=this._initVizFieldVertextures(),c&&this._layer.emit("can-locating-now"),this._shapeDirty=!c):(console.error("this._initRenderContext() FALSE"),
this._shapeDirty=!0),!0===this._shapeDirty&&(this._isAddingGeometry=!1))},_emitSyncEvent:function(){this._layer&&0<this._repeatCount&&(0>=this.renderingInfo.repeat||0<this.renderingInfo.repeat&&this._repeatCount<=this.renderingInfo.repeat)&&this._layer.emit("sync-viz-timer",{vizPage:this._currentVizPage,repeat:this._repeatCount})},_calculateRepeatCount:function(){H=Math.floor(this.time/this.renderingInfo.animationInterval);this._preVizId!==H&&(this._repeatCount++,this._preVizId=H,this._emitSyncEvent())},
_updateVizPage:function(){0<this.renderingInfo.repeat?this._repeatCount<=this.renderingInfo.repeat?this._calculateRepeatCount():this._isReachedRepeatLimit||(this._isReachedRepeatLimit=!0,this._layer.pauseAnimation(),this._layer.emit("reached-repeat-limit")):0>this.renderingInfo.repeat?(this._calculateRepeatCount(),this._isReachedRepeatLimit&&(this._isReachedRepeatLimit=!1)):this._isReachedRepeatLimit||(this._isReachedRepeatLimit=!0)},setupEffect:function(c){this._gl=c.gl;this._shaderSnippets=c.shaderSnippets;
this._vaoExt=c.vaoExt;this._shadersReady=this._loadShaders();this._vizFieldVerTextures[this._vizFieldDefault]=new w(this._gl);a.forEach(this._vizFields,function(h){this._vizFieldVerTextures[h]=new w(this._gl)}.bind(this))},update:function(){var c=!1;return this.renderingInfo.visible&&this._shadersReady?(this._renderingInfoDirty&&(this._updateRenderingInfo(),c=!0),this._shapeDirty&&(this._updateRenderingGeometry(),c=!0),this._renderingInfoDirty||this._shapeDirty||!this._shadersReady?this.ready=!1:
this.ready=!0,this._updateSelfTime(),this._updateVizPage(),this._spin&&this._doSpin(),c):c},render:function(c,h){c.time=this.time;c.reachedRepeatLimit=this._isReachedRepeatLimit},_doSpin:function(){G=this._view.camera.position;x=l.webMercatorToGeographic(G);t=x.x-1;-180>=t&&(t=179);z=G.z;8E6>z&&(z=8E6);this._view.goTo({position:[t,0,z],tilt:0,heading:0})},_bindPramsReady:function(){return 0<=this._currentVizPage&&this._currentVizPage<Object.getOwnPropertyNames(this._vizFieldMinMaxs).length&&this._currentVizPage<
Object.getOwnPropertyNames(this._vizFieldVerTextures).length},_updateSelfTime:function(){this.ready&&!this._pause&&(0!==this._lastTime?this.time=this._pausedTime+.001*(performance.now()-this._lastTime):(this._lastTime=performance.now(),this.time=0))},_loadShaders:function(){return!1},_initVertexLayout:function(){return!0},_initRenderContext:function(){return!0},_initVizFieldVertextures:function(){var c=this._allGraphics();if(0<c.length){console.log("_initVizFieldVertextures \x3d\x3d\x3e graphics.length \x3d\x3d\x3e "+
c.length);var h=this._gl.getParameter(3379),q=c.length,E=D.nextHighestPowerOfTwo(q);E>h&&(E=h,console.warn("Too many graphics, and extra features will be discarded."));var C=Math.ceil(q/E);C=D.nextHighestPowerOfTwo(C);C>h&&(C=h,console.warn("Too many graphics, and extra features will be discarded."));this._vizFieldVerTextures[this._vizFieldDefault].initTexture(E,C,new Float32Array(E*C*4));var I,e,B,M;return a.forEach(this._vizFields,function(Q){var U=new Float32Array(E*C*4);this._vizFieldVerTextures[Q].initTexture(E,
C,U);(e=c[0].attributes[Q])||(e=0);(!e||"number"!=typeof e||0>e)&&(e=0);B=M=e;for(var P=c[0],W=0;W<c.length;W++)I=c[W].attributes,e=I[Q],(!e||"number"!=typeof e||0>e)&&(e=0),U[4*W]=e,M<e&&(M=e,P=c[W]),B>e&&(B=e);console.log("set his._vizFieldVerTextures "+Q);this._vizFieldVerTextures[Q].updateTexture(U);this._vizFieldMinMaxs[Q].min=B;this._vizFieldMinMaxs[Q].max=M;this._vizFieldMinMaxs[Q].maxFeature=P;this._updateVizFieldMinMaxToLayer()}.bind(this)),r.set(this._vizFieldVerTextureSize,E,C),!0}return!1},
syncVizFieldVertextures:function(){return 0<this._allGraphics().length&&(this._vizFieldVerTextures[this._vizFieldDefault].syncData(),a.forEach(this._vizFields,function(c){console.log("set his._vizFieldVerTextures "+c);this._vizFieldVerTextures[c].syncData()}.bind(this)),!0)},_updateVizFieldMinMaxToLayer:function(){this._layer._currentVizPage=this._currentVizPage;this._layer._currentVizFieldMinMax=this._vizFieldMinMaxs[this._vizFields[this._currentVizPage]]},_initColourMap:function(){return!0},_initColorBar:function(){return!0},
_updateDefaultLabelHeight:function(){}});return g.createLocalOriginFactory=function(){return new m.GridLocalOriginFactory},g})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["exports","../../../chunks/vec2f64"],function(b,a){b.vec2f64=a.vec2f64;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["exports","../../../chunks/vec2"],function(b,a){b.vec2=a.vec2;Object.defineProperties(b,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/GridLocalOriginFactory":function(){define("exports ../../../../core/maybe ../../../../core/uid ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../geometry/projection ./basicInterfaces ./Geometry ./LocalOriginFactory ./Object3D ./testUtils ./VertexAttribute ./WebGLLayer ../materials/RibbonLineMaterial".split(" "),function(b,a,g,u,l,k,f,d,r,m,p,w,D,G,x,t){let z=
function(){function v(J,c=125E4){this._originSR=J;this._gridSize=c;this._origins=new Map;this._objects=new Map;this._rootOriginId="root/"+g.generateUID()}var F=v.prototype;F.getOrigin=function(J){var c=this._origins.get(this._rootOriginId);if(null==c){c=D.gridLocalOriginFactory.rootOrigin;if(a.isSome(c))return this._origins.set(this._rootOriginId,p.fromValues(c[0],c[1],c[2],this._rootOriginId)),this.getOrigin(J);J=p.fromValues(J[0]+Math.random()-.5,J[1]+Math.random()-.5,J[2]+Math.random()-.5,this._rootOriginId);
this._origins.set(this._rootOriginId,J);return J}var h=this._gridSize;const q=Math.round(J[0]/h),E=Math.round(J[1]/h),C=Math.round(J[2]/h),I=`${q}/${E}/${C}`;let e=this._origins.get(I);const B=.5*h;l.subtract(H,J,c.vec3);H[0]=Math.abs(H[0]);H[1]=Math.abs(H[1]);H[2]=Math.abs(H[2]);if(H[0]<B&&H[1]<B&&H[2]<B)return e&&(h=Math.max(...H),l.subtract(H,J,e.vec3),H[0]=Math.abs(H[0]),H[1]=Math.abs(H[1]),H[2]=Math.abs(H[2]),Math.max(...H)<h)?e:c;e||(e=p.fromValues(q*h,E*h,C*h,I),this._origins.set(I,e));return e};
F._drawOriginBox=function(J,c=f.fromValues(1,1,0,1)){const h=window.view,q=h._stage;var E=c.toString();if(!this._objects.has(E)){this._material=new t.RibbonLineMaterial({width:2,color:c});q.add(this._material);c=new x.WebGLLayer({isPickable:!1});var C=new w.Object3D({castShadow:!1});q.add(C);c.add(C);q.add(c);this._objects.set(E,C)}E=this._objects.get(E);c=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0];C=c.length;const I=Array(3*C),e=new Uint16Array(2*(C-1)),B=.5*this._gridSize;for(let M=0;M<C;M++)I[3*M]=
J[0]+(c[M]&1?B:-B),I[3*M+1]=J[1]+(c[M]&2?B:-B),I[3*M+2]=J[2]+(c[M]&4?B:-B),0<M&&(e[2*M]=M-1,e[2*M+1]=M);d.projectBuffer(I,this._originSR,0,I,h.renderSpatialReference,0,C);J=new m.Geometry([[G.VertexAttribute.POSITION,{size:3,data:I,exclusive:!0}]],[[G.VertexAttribute.POSITION,e]],r.PrimitiveType.Line);q.add(J);E.addGeometry(J,this._material,u.IDENTITY)};return v}();const H=k.create();b.GridLocalOriginFactory=z;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/3d/webgl-engine/lib/basicInterfaces":function(){define(["exports"],function(b){b.CullFaceOptions=void 0;(function(a){a[a.None=0]="None";a[a.Front=1]="Front";a[a.Back=2]="Back";a[a.COUNT=3]="COUNT"})(b.CullFaceOptions||(b.CullFaceOptions={}));b.DepthTestFunction=void 0;(function(a){a[a.Less=0]="Less";a[a.Lequal=1]="Lequal";a[a.COUNT=2]="COUNT"})(b.DepthTestFunction||(b.DepthTestFunction={}));b.AntiAliasingMode=void 0;(function(a){a[a.NONE=0]="NONE";a[a.SMAA=1]="SMAA"})(b.AntiAliasingMode||
(b.AntiAliasingMode={}));b.TransparencyPassType=void 0;(function(a){a[a.Color=0]="Color";a[a.Alpha=1]="Alpha";a[a.FrontFace=2]="FrontFace";a[a.NONE=3]="NONE";a[a.COUNT=4]="COUNT"})(b.TransparencyPassType||(b.TransparencyPassType={}));b.RenderRequestType=void 0;(function(a){a[a.BACKGROUND=0]="BACKGROUND";a[a.UPDATE=1]="UPDATE"})(b.RenderRequestType||(b.RenderRequestType={}));b.ResourceState=void 0;(function(a){a[a.NOT_LOADED=0]="NOT_LOADED";a[a.LOADING=1]="LOADING";a[a.LOADED=2]="LOADED"})(b.ResourceState||
(b.ResourceState={}));b.StencilBits=void 0;(function(a){a[a.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded";a[a.OutlineVisualElementMask=2]="OutlineVisualElementMask"})(b.StencilBits||(b.StencilBits={}));b.UpdatePolicy=void 0;(function(a){a[a.ASYNC=0]="ASYNC";a[a.SYNC=1]="SYNC"})(b.UpdatePolicy||(b.UpdatePolicy={}));b.Object3DState=void 0;(function(a){a[a.Highlight=0]="Highlight";a[a.MaskOccludee=1]="MaskOccludee";a[a.COUNT=2]="COUNT"})(b.Object3DState||(b.Object3DState={}));b.PrimitiveType=
void 0;(function(a){a[a.Triangle=0]="Triangle";a[a.Point=1]="Point";a[a.Line=2]="Line"})(b.PrimitiveType||(b.PrimitiveType={}));b.PowerOfTwoResizeMode=void 0;(function(a){a[a.STRETCH=1]="STRETCH";a[a.PAD=2]="PAD"})(b.PowerOfTwoResizeMode||(b.PowerOfTwoResizeMode={}));b.ValidationState=void 0;(function(a){a[a.CHANGED=0]="CHANGED";a[a.UNCHANGED=1]="UNCHANGED"})(b.ValidationState||(b.ValidationState={}));b.AlphaDiscardMode=void 0;(function(a){a[a.Blend=0]="Blend";a[a.Opaque=1]="Opaque";a[a.Mask=2]="Mask";
a[a.MaskBlend=3]="MaskBlend";a[a.COUNT=4]="COUNT"})(b.AlphaDiscardMode||(b.AlphaDiscardMode={}));b.Decorations=void 0;(function(a){a[a.OFF=0]="OFF";a[a.ON=1]="ON"})(b.Decorations||(b.Decorations={}));Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/Geometry":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./basicInterfaces ./BoundingInfo ./ContentObject ./ContentObjectType ./geometryDataUtils ./Util ./VertexAttribute".split(" "),
function(b,a,g,u,l,k,f,d,r,m){function p(w){if(w.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return w;for(const D of w)if(65536<=D)return w;return new Uint16Array(w)}k=function(w){function D(x,t=[],z=u.PrimitiveType.Triangle,H=-1){var v=w.call(this)||this;v._primitiveType=z;v.edgeIndicesLength=H;v.type=f.ContentObjectType.Geometry;v._vertexAttributes=new Map;v._indices=new Map;v._boundingInfo=null;for(const [F,J]of x)J&&v._vertexAttributes.set(F,{...J});if(null==t||0===t.length){x=v._vertexAttributes.values().next().value;
x=null==x?0:x.data.length/x.size;t=d.generateDefaultIndexArray(x);v.edgeIndicesLength=0>v.edgeIndicesLength?x:v.edgeIndicesLength;for(const F of v._vertexAttributes.keys())v._indices.set(F,t)}else for(const [F,J]of t)J&&(v._indices.set(F,p(J)),F===m.VertexAttribute.POSITION&&(v.edgeIndicesLength=0>v.edgeIndicesLength?v._indices.get(F).length:v.edgeIndicesLength));return v}a._inheritsLoose(D,w);var G=D.prototype;G.cloneShallow=function(){const x=new D([],void 0,this._primitiveType,void 0),{_vertexAttributes:t,
_indices:z}=x;this._vertexAttributes.forEach((H,v)=>{t.set(v,H)});this._indices.forEach((H,v)=>{z.set(v,H)});x.screenToWorldRatio=this.screenToWorldRatio;x._boundingInfo=this._boundingInfo;return x};G.getMutableAttribute=function(x){(x=this._vertexAttributes.get(x))&&!x.exclusive&&(x.data=Array.from(x.data),x.exclusive=!0);return x};G.computeAttachmentOrigin=function(x){return this.primitiveType===u.PrimitiveType.Triangle?this._computeAttachmentOriginTriangles(x):this._computeAttachmentOriginPoints(x)};
G._computeAttachmentOriginTriangles=function(x){const t=this.indices.get(m.VertexAttribute.POSITION),z=this.vertexAttributes.get(m.VertexAttribute.POSITION);return d.computeAttachmentOriginTriangles(z,t,x)};G._computeAttachmentOriginPoints=function(x){const t=this.indices.get(m.VertexAttribute.POSITION),z=this.vertexAttributes.get(m.VertexAttribute.POSITION);return d.computeAttachmentOriginPoints(z,t,x)};G.invalidateBoundingInfo=function(){this._boundingInfo=null};G._calculateBoundingInfo=function(){const x=
this.indices.get(m.VertexAttribute.POSITION);if(0===x.length)return null;const t=this.primitiveType===u.PrimitiveType.Triangle?3:1;r.assert(0===x.length%t,"Indexing error: "+x.length+" not divisible by "+t);const z=d.generateDefaultIndexArray(x.length/t),H=this.vertexAttributes.get(m.VertexAttribute.POSITION);return new l.BoundingInfo(z,t,x,H)};a._createClass(D,[{key:"vertexAttributes",get:function(){return this._vertexAttributes}},{key:"indices",get:function(){return this._indices}},{key:"indexCount",
get:function(){const x=this._indices.values().next().value;return x?x.length:0}},{key:"primitiveType",get:function(){return this._primitiveType}},{key:"faceCount",get:function(){return this.indexCount/3}},{key:"boundingInfo",get:function(){g.isNone(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo());return this._boundingInfo}}]);return D}(k.ContentObject);b.Geometry=k;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/BoundingInfo":function(){define(["exports",
"../../../../core/PooledArray","../../../../chunks/vec3","../../../../chunks/vec3f64","./Util"],function(b,a,g,u,l){let k=function(){function d(m,p,w,D){this.primitiveIndices=m;this._numIndexPerPrimitive=p;this.indices=w;this.position=D;this.center=u.create();l.assert(1<=m.length);l.assert(0===w.length%this._numIndexPerPrimitive);l.assert(w.length>=m.length*this._numIndexPerPrimitive);l.assert(3===D.size||4===D.size);const {data:G,size:x}=D;D=m.length;p=x*w[this._numIndexPerPrimitive*m[0]];f.clear();
f.push(p);this.bbMin=u.fromValues(G[p],G[p+1],G[p+2]);this.bbMax=u.clone(this.bbMin);for(var t=0;t<D;++t){var z=this._numIndexPerPrimitive*m[t];for(var H=0;H<this._numIndexPerPrimitive;++H){p=x*w[z+H];f.push(p);let v=G[p];this.bbMin[0]=Math.min(v,this.bbMin[0]);this.bbMax[0]=Math.max(v,this.bbMax[0]);v=G[p+1];this.bbMin[1]=Math.min(v,this.bbMin[1]);this.bbMax[1]=Math.max(v,this.bbMax[1]);v=G[p+2];this.bbMin[2]=Math.min(v,this.bbMin[2]);this.bbMax[2]=Math.max(v,this.bbMax[2])}}g.lerp(this.center,this.bbMin,
this.bbMax,.5);this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);m=this.radius*this.radius;for(w=0;w<f.length;++w)p=f.getItemAt(w),D=G[p]-this.center[0],t=G[p+1]-this.center[1],p=G[p+2]-this.center[2],z=D*D+t*t+p*p,z<=m||(z=Math.sqrt(z),H=.5*(z-this.radius),this.radius+=H,m=this.radius*this.radius,z=H/z,this.center[0]+=D*z,this.center[1]+=t*z,this.center[2]+=p*z);f.clear()}var r=d.prototype;r.getCenter=function(){return this.center};
r.getBSRadius=function(){return this.radius};r.getBBMin=function(){return this.bbMin};r.getBBMax=function(){return this.bbMax};r.getChildren=function(){if(this._children)return this._children;if(1<g.squaredDistance(this.bbMin,this.bbMax)){var m=g.lerp(u.create(),this.bbMin,this.bbMax,.5),p=this.primitiveIndices.length;const x=new Uint8Array(p),t=Array(8);for(var w=0;8>w;++w)t[w]=0;const {data:z,size:H}=this.position;for(w=0;w<p;++w){var D=0;const v=this._numIndexPerPrimitive*this.primitiveIndices[w];
var G=H*this.indices[v];let F=z[G],J=z[G+1],c=z[G+2];for(let h=1;h<this._numIndexPerPrimitive;++h){G=H*this.indices[v+h];const q=z[G],E=z[G+1];G=z[G+2];q<F&&(F=q);E<J&&(J=E);G<c&&(c=G)}F<m[0]&&(D|=1);J<m[1]&&(D|=2);c<m[2]&&(D|=4);x[w]=D;++t[D]}m=0;for(w=0;8>w;++w)0<t[w]&&++m;if(2>m)return;m=Array(8);for(w=0;8>w;++w)m[w]=0<t[w]?new Uint32Array(t[w]):void 0;for(w=0;8>w;++w)t[w]=0;for(w=0;w<p;++w)D=x[w],m[D][t[D]++]=this.primitiveIndices[w];this._children=Array(8);for(p=0;8>p;++p)void 0!==m[p]&&(this._children[p]=
new d(m[p],this._numIndexPerPrimitive,this.indices,this.position))}return this._children};d.prune=function(){f.prune()};return d}();const f=new a({deallocator:null});b.BoundingInfo=k;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/ContentObject":function(){define(["exports","../../../../core/uid"],function(b,a){let g=function(){function u(){this.id=a.generateUID()}u.prototype.unload=function(){};return u}();b.ContentObject=
g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/ContentObjectType":function(){define(["exports"],function(b){b.ContentObjectType=void 0;var a=b.ContentObjectType||(b.ContentObjectType={});a[a.Layer=0]="Layer";a[a.Object=1]="Object";a[a.Geometry=2]="Geometry";a[a.Material=3]="Material";a[a.Texture=4]="Texture";a[a.COUNT=5]="COUNT";Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/3d/webgl-engine/lib/geometryDataUtils":function(){define(["exports","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../geometry/support/triangle"],function(b,a,g,u){let l=(()=>{const w=new Uint32Array(131072);for(let D=0;D<w.length;++D)w[D]=D;return w})();const k=new Uint16Array([0]),f=(()=>{const w=new Uint16Array(65536);for(let D=0;D<w.length;++D)w[D]=D;return w})(),d=g.create(),r=g.create(),m=g.create(),p=g.create();b.computeAttachmentOriginLines=function(w,D,G,x){if(!w)return!1;
const {size:t,data:z}=w;a.set(x,0,0,0);a.set(p,0,0,0);let H=w=0;const v=D?D.length-1:z.length/t-1;G=v+(G?2:0);for(let c=0;c<G;c+=2){var F=c<v?c:v,J=c<v?c+1:0;F=(D?D[F]:F)*t;J=(D?D[J]:J)*t;d[0]=z[F+0];d[1]=z[F+1];d[2]=z[F+2];r[0]=z[J+0];r[1]=z[J+1];r[2]=z[J+2];a.scale(d,a.add(d,d,r),.5);J=a.dist(d,r);0<J?(a.add(x,x,a.scale(d,d,J)),w+=J):(a.add(p,p,d),H++)}return 0!==w?(a.scale(x,x,1/w),!0):0!==H?(a.scale(x,p,1/H),!0):!1};b.computeAttachmentOriginPoints=function(w,D,G){if(!w||!D)return!1;const {size:x,
data:t}=w;a.set(G,0,0,0);w=-1;let z=0;for(let H=0;H<D.length;H++){const v=D[H]*x;w!==v&&(G[0]+=t[v+0],G[1]+=t[v+1],G[2]+=t[v+2],z++);w=v}1<z&&a.scale(G,G,1/z);return 0<z};b.computeAttachmentOriginTriangles=function(w,D,G){if(!w)return!1;const {size:x,data:t}=w;a.set(G,0,0,0);a.set(p,0,0,0);let z=w=0;for(let v=0;v<D.length-2;v+=3){var H=D[v+0]*x;const F=D[v+1]*x,J=D[v+2]*x;a.set(d,t[H+0],t[H+1],t[H+2]);a.set(r,t[F+0],t[F+1],t[F+2]);a.set(m,t[J+0],t[J+1],t[J+2]);(H=u.areaPoints3d(d,r,m))?(a.add(d,d,
r),a.add(d,d,m),a.scale(d,d,1/3*H),a.add(G,G,d),w+=H):(a.add(p,p,d),a.add(p,p,r),a.add(p,p,m),z+=3)}return 0===z&&0===w?!1:0!==w?(a.scale(G,G,1/w),!0):0!==z?(a.scale(G,p,1/z),!0):!1};b.generateDefaultIndexArray=function(w){if(1===w)return k;if(w<f.length)return new Uint16Array(f.buffer,0,w);if(w>l.length){l=new Uint32Array(Math.max(2*l.length,w));for(let D=0;D<l.length;D++)l[D]=D}return new Uint32Array(l.buffer,0,w)};b.generateIndexArray=function(w){if(1===w)return new Uint16Array(k);if(w<f.length)return new Uint16Array(f.slice(0,
w));if(w>l.length){w=new Uint32Array(w);for(let D=0;D<w.length;D++)w[D]=D;return w}return new Uint32Array(l.slice(0,w))};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/triangle":function(){define("exports ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./lineSegment ./vectorStacks".split(" "),function(b,a,g,u,l,k){function f(G){return G?{p0:u.clone(G.p0),p1:u.clone(G.p1),p2:u.clone(G.p2)}:{p0:u.create(),p1:u.create(),
p2:u.create()}}function d(G,x,t,z=f()){g.copy(z.p0,G);g.copy(z.p1,x);g.copy(z.p2,t);return z}function r(G,x,t){return.5*Math.abs((x[0]-G[0])*(t[1]-G[1])-(x[1]-G[1])*(t[0]-G[0]))}const m=new a.ObjectStack(l.create),p=new a.ObjectStack(()=>({p0:null,p1:null,p2:null})),w=u.create(),D=u.create();b.area2d=function(G){return r(G.p0,G.p1,G.p2)};b.areaPoints2d=r;b.areaPoints3d=function(G,x,t){g.subtract(w,x,G);g.subtract(D,t,G);return g.length(g.cross(w,w,D))/2};b.copy=function(G,x=f()){return d(G.p0,G.p1,
G.p2,x)};b.create=f;b.distance2=function(G,x){var t=G.p0,z=G.p1;G=G.p2;const H=g.subtract(k.sv3d.get(),z,t),v=g.subtract(k.sv3d.get(),G,z),F=g.subtract(k.sv3d.get(),t,G),J=g.subtract(k.sv3d.get(),x,t);var c=g.subtract(k.sv3d.get(),x,z),h=g.subtract(k.sv3d.get(),x,G);const q=g.cross(H,H,F),E=g.dot(g.cross(k.sv3d.get(),H,q),J);c=g.dot(g.cross(k.sv3d.get(),v,q),c);h=g.dot(g.cross(k.sv3d.get(),F,q),h);if(0<E&&0<c&&0<h)return x=g.dot(q,J),x*x/g.dot(q,q);t=l.distance2(l.fromValues(t,H,m.get()),x);z=l.distance2(l.fromValues(z,
v,m.get()),x);x=l.distance2(l.fromValues(G,F,m.get()),x);return Math.min(t,z,x)};b.fromValues=d;b.intersectRay=function(G,x,t){const {direction:z,origin:H}=x,{p0:v,p1:F,p2:J}=G;var c=F[0]-v[0],h=F[1]-v[1],q=F[2]-v[2];G=J[0]-v[0];x=J[1]-v[1];const E=J[2]-v[2];var C=z[1]*E-x*z[2],I=z[2]*G-E*z[0];const e=z[0]*x-G*z[1];var B=c*C+h*I+q*e;if(-1E-5<B&&1E-5>B)return!1;B=1/B;const M=H[0]-v[0],Q=H[1]-v[1],U=H[2]-v[2];C=B*(M*C+Q*I+U*e);if(0>C||1<C)return!1;I=Q*q-h*U;q=U*c-q*M;c=M*h-c*Q;h=B*(z[0]*I+z[1]*q+z[2]*
c);if(0>h||1<C+h)return!1;t&&(g.scale(t,z,B*(G*I+x*q+E*c)),g.add(t,H,t));return!0};b.wrap=function(G,x,t){const z=p.get();z.p0=G;z.p1=x;z.p2=t;return z};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(b,a,g,u,l,k){function f(x){return x?{origin:l.clone(x.origin),vector:l.clone(x.vector)}:
{origin:l.create(),vector:l.create()}}function d(x,t){const z=G.get();z.origin=x;z.vector=t;return z}function r(x,t,z=f()){u.copy(z.origin,x);u.copy(z.vector,t);return z}function m(x,t){t=u.subtract(k.sv3d.get(),t,x.origin);var z=u.dot(x.vector,t);const H=u.dot(x.vector,x.vector);z=a.clamp(z/H,0,1);x=u.subtract(k.sv3d.get(),u.scale(k.sv3d.get(),x.vector,z),t);return u.dot(x,x)}function p(x,t,z,H,v){const {vector:F,origin:J}=x;t=u.subtract(k.sv3d.get(),t,J);t=u.dot(F,t)/u.squaredLength(F);u.scale(v,
F,a.clamp(t,z,H));return u.add(v,v,x.origin)}function w(x,t,z,H){const v=x.origin;var F=u.add(k.sv3d.get(),v,x.vector);x=t.origin;var J=u.add(k.sv3d.get(),x,t.vector),c=k.sv3d.get();t=k.sv3d.get();c[0]=v[0]-x[0];c[1]=v[1]-x[1];c[2]=v[2]-x[2];t[0]=J[0]-x[0];t[1]=J[1]-x[1];t[2]=J[2]-x[2];if(1E-6>Math.abs(t[0])&&1E-6>Math.abs(t[1])&&1E-6>Math.abs(t[2]))return!1;J=k.sv3d.get();J[0]=F[0]-v[0];J[1]=F[1]-v[1];J[2]=F[2]-v[2];if(1E-6>Math.abs(J[0])&&1E-6>Math.abs(J[1])&&1E-6>Math.abs(J[2]))return!1;F=c[0]*
t[0]+c[1]*t[1]+c[2]*t[2];var h=t[0]*J[0]+t[1]*J[1]+t[2]*J[2];const q=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],E=(J[0]*J[0]+J[1]*J[1]+J[2]*J[2])*q-h*h;if(1E-6>Math.abs(E))return!1;c=(F*h-(c[0]*J[0]+c[1]*J[1]+c[2]*J[2])*q)/E;F=(F+h*c)/q;z&&(c=a.clamp(c,0,1),F=a.clamp(F,0,1));z=k.sv3d.get();h=k.sv3d.get();z[0]=v[0]+c*J[0];z[1]=v[1]+c*J[1];z[2]=v[2]+c*J[2];h[0]=x[0]+F*t[0];h[1]=x[1]+F*t[1];h[2]=x[2]+F*t[2];H.tA=c;H.tB=F;H.pA=z;H.pB=h;H.distance2=u.squaredDistance(z,h);return!0}const D={tA:0,tB:0,pA:l.create(),pB:l.create(),
distance2:0},G=new g.ObjectStack(()=>({origin:null,vector:null}));b.closestLineSegmentDistance2=function(x,t){return w(x,t,!0,D)?D.distance2:null};b.closestLineSegmentPoint=function(x,t,z){return w(x,t,!0,D)?(u.copy(z,D.pA),!0):!1};b.closestRayDistance2=function(x,t){if(w(x,d(t.origin,t.direction),!1,D)){const {tA:z,pB:H,distance2:v}=D;if(0<=z&&1>=z)return v;if(0>z)return u.squaredDistance(x.origin,H);if(1<z)return u.squaredDistance(u.add(k.sv3d.get(),x.origin,x.vector),H)}return null};b.copy=function(x,
t=f()){return r(x.origin,x.vector,t)};b.create=f;b.distance=function(x,t){return Math.sqrt(m(x,t))};b.distance2=m;b.fromPoints=function(x,t,z=f()){u.copy(z.origin,x);u.subtract(z.vector,t,x);return z};b.fromValues=r;b.pointAt=function(x,t,z){return u.add(z,x.origin,u.scale(z,x.vector,t))};b.projectPoint=function(x,t,z){return p(x,t,0,1,z)};b.projectPointClamp=p;b.wrap=d;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/VertexAttribute":function(){define(["exports"],
function(b){b.VertexAttribute=void 0;var a=b.VertexAttribute||(b.VertexAttribute={});a.POSITION="position";a.NORMAL="normal";a.UV0="uv0";a.AUXPOS1="auxpos1";a.AUXPOS2="auxpos2";a.MAPPOS="mapPos";a.COLOR="color";a.SYMBOLCOLOR="symbolColor";a.SIZE="size";a.TANGENT="tangent";a.OFFSET="offset";a.SUBDIVISIONFACTOR="subdivisionFactor";a.COLORFEATUREATTRIBUTE="colorFeatureAttribute";a.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute";a.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute";a.DISTANCETOSTART="distanceToStart";
a.UVMAPSPACE="uvMapSpace";a.BOUNDINGRECT="boundingRect";a.UVREGION="uvRegion";a.NORMALCOMPRESSED="normalCompressed";a.PROFILERIGHT="profileRight";a.PROFILEUP="profileUp";a.PROFILEVERTEXANDNORMAL="profileVertexAndNormal";a.FEATUREVALUE="featureValue";a.MODELORIGINHI="modelOriginHi";a.MODELORIGINLO="modelOriginLo";a.MODEL="model";a.MODELNORMAL="modelNormal";a.INSTANCECOLOR="instanceColor";a.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute";a.LOCALTRANSFORM="localTransform";a.GLOBALTRANSFORM="globalTransform";
a.BOUNDINGSPHERE="boundingSphere";a.MODELORIGIN="modelOrigin";a.MODELSCALEFACTORS="modelScaleFactors";a.FEATUREATTRIBUTE="featureAttribute";a.STATE="state";a.LODLEVEL="lodLevel";a.POSITION0="position0";a.POSITION1="position1";a.NORMALA="normalA";a.NORMALB="normalB";a.COMPONENTINDEX="componentIndex";a.VARIANTOFFSET="variantOffset";a.VARIANTSTROKE="variantStroke";a.VARIANTEXTENSION="variantExtension";a.U8PADDING="u8padding";a.U16PADDING="u16padding";a.SIDENESS="sideness";a.START="start";a.END="end";
a.UP="up";a.EXTRUDE="extrude";Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/LocalOriginFactory":function(){define(["exports","../../../../chunks/vec3f64"],function(b,a){let g=function(u,l){this.vec3=u;this.id=l};b.LocalOrigin=g;b.fromValues=function(u,l,k,f){return new g(a.fromValues(u,l,k),f)};b.fromVector=function(u,l){return new g(a.clone(u),l)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/3d/webgl-engine/lib/Object3D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/sphere ../../support/mathUtils ./basicInterfaces ./ContentObject ./ContentObjectType ./GeometryRecord ./Object3DStateID ./Util ../materials/renderers/utils".split(" "),function(b,a,g,u,l,k,f,d,r,m,p,w,D,G,x,t){p=function(v){function F(c={}){var h=
v.call(this)||this;h.type=w.ContentObjectType.Object;h._geometryRecords=[];h._geometries=[];h._objectTransformation=l.create();h._bvObjectSpace=new H;h._bvWorldSpace=new H;h._bvDirty=!0;h._hasVolatileTransformation=!1;h._visible=!0;h.castShadow=null!=c.castShadow?c.castShadow:!0;h.metadata=c.metadata;h.metadata&&h.metadata.isElevationSource&&(h.metadata.lastValidElevationBB=new z);h.transformation=l.create();const {geometries:q,materials:E,transformations:C,origins:I}=c;if(!Array.isArray(q))return a._assertThisInitialized(h);
x.assert(E.length===q.length,"Object3D: materials don't match geometries");x.assert(C.length===q.length,"Object3D: transformations don't match geometries");h._geometryRecords.length=q.length;h._geometries.length=q.length;for(c=0;c<q.length;c++)h._geometries[c]=q[c],h._geometryRecords[c]=D.GeometryRecord.pool.acquire(q[c],E[c],l.clone(C[c]),{highlights:null,occludees:null,visible:h._visible},I&&I[c]);return h}a._inheritsLoose(F,v);var J=F.prototype;J.dispose=function(){this._geometryRecords.length=
0;this._geometries.length=0};J.addGeometry=function(c,h,q,E,C){q=q?q:l.IDENTITY;this._geometries.push(c);c=D.GeometryRecord.pool.acquire(c,h,q,{highlights:null,occludees:null,visible:this._visible},E,C);this._geometryRecords.push(c);this._hasVolatileTransformation=this._hasVolatileTransformation||g.isSome(c.shaderTransformation);this._emit("objectGeometryAdded",{object:this,record:c});this._invalidateBoundingVolume();return c};J.removeGeometry=function(c){const h=this._geometryRecords.splice(c,1)[0];
this._hasVolatileTransformation=g.isSome(h.shaderTransformation)?this._geometryRecords.some(q=>g.isSome(q.shaderTransformation)):this._hasVolatileTransformation;h.dispose();this._geometries.splice(c,1);this._emit("objectGeometryRemoved",{object:this,record:h});this._invalidateBoundingVolume();return h};J.removeAllGeometries=function(){for(;0<this.geometryRecords.length;)this.removeGeometry(0)};J.geometryVertexAttrsUpdated=function(c){this._emit("vertexAttrsUpdated",{object:this,record:c});this._invalidateBoundingVolume()};
J.setVisible=function(c){if(this._visible!==c){this._visible=c;for(const h of this._geometryRecords)h.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)}};J.maskOccludee=function(){const c=new G.Object3DStateID(m.Object3DState.MaskOccludee);for(const h of this._geometryRecords)h.instanceParameters.occludees=t.addObject3DStateID(h.instanceParameters.occludees,c);this._emit("occlusionChanged",this);return c};J.removeOcclude=function(c){for(const h of this._geometryRecords)h.instanceParameters.occludees=
t.removeObject3DStateID(h.instanceParameters.occludees,c);this._emit("occlusionChanged",this)};J.highlight=function(){const c=new G.Object3DStateID(m.Object3DState.Highlight);for(const h of this._geometryRecords)h.instanceParameters.highlights=t.addObject3DStateID(h.instanceParameters.highlights,c);this._emit("highlightChanged",this);return c};J.removeHighlight=function(c){for(const h of this._geometryRecords)h.instanceParameters.highlights=t.removeObject3DStateID(h.instanceParameters.highlights,
c);this._emit("highlightChanged",this)};J.getCombinedStaticTransformation=function(c,h){return u.multiply(g.unwrapOr(h,l.create()),this.transformation,c.getStaticTransformation())};J._getCombinedShaderTransformation=function(c,h){h=h||l.create();u.multiply(h,this.transformation,c.getShaderTransformation());return h};J.hasVolativeTransformation=function(){return this._hasVolatileTransformation};J._validateBoundingVolume=function(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init();
this._bvWorldSpace.init();for(var c=0;c<this._geometryRecords.length;++c){var h=this._geometryRecords[c],q=this._geometries[c].boundingInfo;g.isSome(q)&&(this._calculateTransformedBoundingVolume(q,this._bvObjectSpace,h.getShaderTransformation()),this._calculateTransformedBoundingVolume(q,this._bvWorldSpace,this._getCombinedShaderTransformation(h)))}k.lerp(this._bvObjectSpace.bounds,this._bvObjectSpace.min,this._bvObjectSpace.max,.5);k.lerp(this._bvWorldSpace.bounds,this._bvWorldSpace.min,this._bvWorldSpace.max,
.5);c=f.create();h=f.create();q=r.maxScale(this.transformation);for(let e=0;e<this._geometryRecords.length;++e){var E=this._geometries[e].boundingInfo;if(!g.isNone(E)){var C=this._geometryRecords[e].getShaderTransformation(),I=r.maxScale(C);k.transformMat4(c,E.getCenter(),C);C=k.distance(c,this._bvObjectSpace.bounds);E=E.getBSRadius()*I;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],C+E);k.transformMat4(h,c,this.transformation);I=k.distance(h,this._bvWorldSpace.bounds);this._bvWorldSpace.bounds[3]=
Math.max(this._bvWorldSpace.bounds[3],I+E*q)}}this._bvDirty=!1}};J._calculateTransformedBoundingVolume=function(c,h,q){const E=c.getBBMin();c=c.getBBMax();const C=f.clone(E),I=f.clone(c);k.transformMat4(C,C,q);k.transformMat4(I,I,q);for(var e=0;3>e;++e)h.min[e]=Math.min(h.min[e],C[e],I[e]),h.max[e]=Math.max(h.max[e],C[e],I[e]);for(e=0;3>e;++e){k.copy(C,E);k.copy(I,c);C[e]=c[e];I[e]=E[e];k.transformMat4(C,C,q);k.transformMat4(I,I,q);for(let B=0;3>B;++B)h.min[B]=Math.min(h.min[B],C[B],I[B]),h.max[B]=
Math.max(h.max[B],C[B],I[B])}};J._invalidateBoundingVolume=function(){this._bvDirty=!0;g.isSome(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)};J._emit=function(c,h){g.isSome(this._parentLayer)&&this._parentLayer.events.emit(c,h)};a._createClass(F,[{key:"geometryRecords",get:function(){return this._geometryRecords}},{key:"geometries",get:function(){return this._geometries}},{key:"transformation",get:function(){return this._objectTransformation},set:function(c){u.copy(this._objectTransformation,
c);this._invalidateBoundingVolume();this._emit("objectTransformation",this)}},{key:"parentLayer",get:function(){return this._parentLayer},set:function(c){x.assert(null==this._parentLayer||null==c,"Object3D can only be added to a single Layer");this._parentLayer=c}},{key:"isVisible",get:function(){return this._visible}},{key:"boundingVolumeWorldSpace",get:function(){this._validateBoundingVolume();return this._bvWorldSpace}},{key:"boundingVolumeObjectSpace",get:function(){this._validateBoundingVolume();
return this._bvObjectSpace}},{key:"test",get:function(){const c=this;return{hasGeometry:h=>c._geometries.includes(h),getGeometryIndex:h=>c._geometries.indexOf(h)}}}]);return F}(p.ContentObject);let z=function(){function v(){this.min=f.fromValues(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.max=f.fromValues(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}v.prototype.isEmpty=function(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]};return v}(),H=
function(v){function F(){var J=v.apply(this,arguments)||this;J.bounds=d.create();return J}a._inheritsLoose(F,v);F.prototype.init=function(){k.set(this.min,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);k.set(this.max,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);d.clear(this.bounds)};return F}(z);b.Object3D=p;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/GeometryRecord":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/uid ../../../../chunks/vec3".split(" "),
function(b,a,g,u,l,k){let f=function(){function d(){this._disposed=!1}var r=d.prototype;r.acquire=function(m,p,w,D,G,x){this.id=l.generateUID();this.geometry=m;this.material=p;this.transformation=w;this.instanceParameters=D;this.origin=G;this._shaderTransformation=x;this._disposed=!1};r.release=function(){this._disposed=!1};r.dispose=function(){this._disposed=!0};r.getStaticTransformation=function(){return this.transformation};r.getShaderTransformation=function(){return g.isSome(this._shaderTransformation)?
this._shaderTransformation(this.transformation):this.transformation};r.computeAttachmentOrigin=function(m){return(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,m):this.geometry.computeAttachmentOrigin(m))?(k.transformMat4(m,m,this.getStaticTransformation()),!0):!1};a._createClass(d,[{key:"disposed",get:function(){return this._disposed}},{key:"shaderTransformation",get:function(){return this._shaderTransformation}}]);return d}();f.pool=new u(f);b.GeometryRecord=
f;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/Object3DStateID":function(){define(["exports","../../../../core/uid"],function(b,a){b.Object3DStateID=function(g){this.channel=g;this.id=a.generateUID()};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("exports ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../lib/Util ../../../../webgl/doublePrecisionUtils".split(" "),
function(b,a,g,u,l,k){const f=new Float64Array(3),d=new Float32Array(6),r=u.create();b.addObject3DStateID=function(m,p){a.isNone(m)&&(m=[]);m.push(p);return m};b.calculateTransformRelativeToOrigin=function(m,p,w){const D=m.origin.vec3;l.setMatrixTranslation3(r,-D[0],-D[1],-D[2]);a.isSome(m.transformation)?g.multiply(p,r,m.transformation):g.copy(p,r);w&&(g.invert(w,p),g.transpose(w,w))};b.encodeDoubleVec3=function(m,p,w,D,G){f[0]=m.get(p,0);f[1]=m.get(p,1);f[2]=m.get(p,2);k.encodeDoubleArray(f,d,3);
w.set(G,0,d[0]);D.set(G,0,d[1]);w.set(G,1,d[2]);D.set(G,1,d[3]);w.set(G,2,d[4]);D.set(G,2,d[5])};b.isInstanceHidden=function(m){return a.isSome(m)?!m.visible:!1};b.removeObject3DStateID=function(m,p){if(a.isNone(m))return null;m=m.filter(w=>w!==p);return 0===m.length?null:m};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/doublePrecisionUtils":function(){define(["exports"],function(b){const a=new Float32Array(2);b.decodeDoubleArray=function(g,
u,l){for(let k=0;k<l;++k)u[k]=g[2*k]+g[2*k+1]};b.encodeDoubleArray=function(g,u,l){for(let k=0;k<l;++k)u[2*k]=g[k],u[2*k+1]=g[k]-u[2*k]};b.encodeDoubleHi=function(g,u){const l=g.length;for(let k=0;k<l;++k)a[0]=g[k],u[k]=a[0];return u};b.encodeDoubleLo=function(g,u){const l=g.length;for(let k=0;k<l;++k)a[0]=g[k],a[1]=g[k]-a[0],u[k]=a[1];return u};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/testUtils":function(){define(["exports"],
function(b){b.gridLocalOriginFactory={rootOrigin:null};b.textTextureAtlas={orderedRepackingEnabled:!1};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/WebGLLayer":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Evented ../../../../core/Handles ../../../../core/maybe ../../../../core/PooledArray ./basicInterfaces ./ContentObject ./ContentObjectType ./DirtyEvents ./Octree".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p){d=function(w){function D(x,t=""){var z,H,v;var F=w.call(this)||this;F.apiLayerUid=t;F.type=r.ContentObjectType.Layer;F.events=new g;F.isSliceable=!1;F._objects=new k;F._stageHandles=new u;F.apiLayerUid=t;F.isVisible=null!=(z=null==x?void 0:x.isVisible)?z:!0;F.isPickable=null!=(H=null==x?void 0:x.isPickable)?H:!0;F.updatePolicy=null!=(v=null==x?void 0:x.updatePolicy)?v:f.UpdatePolicy.ASYNC;return F}a._inheritsLoose(D,w);var G=D.prototype;G.destroy=function(){this.detachStage();
this._stage=null};G.attachStage=function(x){this.detachStage();this._stage=x;for(const t of m.DirtyEventNames)this._stageHandles.add(this.events.on(t,z=>x.handleEvent(t,z)))};G.detachStage=function(){this._stageHandles.removeAll();this.invalidateSpatialQueryAccelerator()};G.add=function(x){this._objects.push(x);x.parentLayer=this;this.events.emit("layerObjectAdded",{layer:this,object:x});l.isSome(this._octree)&&this._octree.add([x])};G.remove=function(x){this._objects.removeUnordered(x)&&(x.parentLayer=
null,this.events.emit("layerObjectRemoved",{layer:this,object:x}),l.isSome(this._octree)&&this._octree.remove([x]))};G.addMany=function(x){this._objects.pushArray(x);for(const t of x)t.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:x});l.isSome(this._octree)&&this._octree.add(x)};G.removeMany=function(x){const t=[];this._objects.removeUnorderedMany(x,x.length,t);if(0!==t.length){for(const z of t)z.parentLayer=null;this.events.emit("layerObjectsRemoved",{layer:this,objects:t});
l.isSome(this._octree)&&this._octree.remove(t)}};G.sync=function(){l.isSome(this._stage)&&this.updatePolicy!==f.UpdatePolicy.SYNC&&this._stage.syncLayer(this.id)};G.notifyObjectBBChanged=function(x,t){l.isSome(this._octree)&&this._octree.update(x,t)};G.getSpatialQueryAccelerator=function(){l.isNone(this._octree)&&50<this._objects.length&&this._createOctree();return this._octree};G.shaderTransformationChanged=function(){this.invalidateSpatialQueryAccelerator();this.events.emit("shaderTransformationChanged",
this)};G.invalidateSpatialQueryAccelerator=function(){this._octree=l.destroyMaybe(this._octree)};G._createOctree=function(){this._octree=new p(x=>x.boundingVolumeWorldSpace.bounds);this._octree.add(this._objects.data,this._objects.length)};a._createClass(D,[{key:"objects",get:function(){return this._objects}}]);return D}(d.ContentObject);b.WebGLLayer=d;b.isWebGLLayer=function(w){return l.isSome(w)&&w.type===r.ContentObjectType.Layer};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/3d/webgl-engine/lib/DirtyEvents":function(){define(["exports"],function(b){b.DirtyEventNames="layerObjectAdded layerObjectRemoved layerObjectsAdded layerObjectsRemoved shaderTransformationChanged objectTransformation visibilityChanged occlusionChanged highlightChanged objectGeometryAdded objectGeometryRemoved vertexAttrsUpdated".split(" ");Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/PooledArray ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/frustum ../../../../geometry/support/ray ../../../../chunks/sphere ./Util".split(" "),
function(b,a,g,u,l,k,f,d,r,m){function p(R,T,N){N[0]=R[0]+T;N[1]=R[1]+T;N[2]=R[2]+T}function w(R,T,N,L){if(1===T)R=N(R[0]),r.copy(R,L);else{E[0]=Infinity;E[1]=Infinity;E[2]=Infinity;C[0]=-Infinity;C[1]=-Infinity;C[2]=-Infinity;for(let A=0;A<T;A++){var K=N(R[A]);if(t(K[3])){var y=E,n=K;y[0]=Math.min(y[0],n[0]-n[3]);y[1]=Math.min(y[1],n[1]-n[3]);y[2]=Math.min(y[2],n[2]-n[3]);y=C;y[0]=Math.max(y[0],K[0]+K[3]);y[1]=Math.max(y[1],K[1]+K[3]);y[2]=Math.max(y[2],K[2]+K[3])}}l.lerp(L,E,C,.5);L[3]=Math.max(C[0]-
E[0],C[1]-E[1],C[2]-E[2])/2}}function D(R,T,N){if(!P.length)for(var L=0;8>L;++L)P.push({index:0,distance:0});for(L=0;8>L;++L){const K=v[L];P.data[L].index=L;P.data[L].distance=x(R,T,K)}P.sort((K,y)=>K.distance-y.distance);for(R=0;8>R;++R)N[R]=P.data[R].index}function G(R,T){let N=Infinity,L=null;for(let K=0;8>K;++K){const y=x(R,T,F[K]);y<N&&(N=y,L=F[K])}return L}function x(R,T,N){return T*(R[0]*N[0]+R[1]*N[1]+R[2]*N[2])}function t(R){return!isNaN(R)&&-Infinity!==R&&Infinity!==R&&0<R}let z=function(){function R(N,
L){this._objectToBoundingSphere=N;this._maximumObjectsPerNode=10;this._maximumDepth=20;this._degenerateObjects=new Set;this._root=new H;this._objectCount=0;L&&(void 0!==L.maximumObjectsPerNode&&(this._maximumObjectsPerNode=L.maximumObjectsPerNode),void 0!==L.maximumDepth&&(this._maximumDepth=L.maximumDepth))}var T=R.prototype;T.destroy=function(){this._degenerateObjects.clear();H.clearPool();c[0]=null;I.prune();P.prune()};T.add=function(N,L=N.length){this._objectCount+=L;this._grow(N,L);const K=H.acquire();
for(let y=0;y<L;y++){const n=N[y];this._isDegenerate(n)?this._degenerateObjects.add(n):(K.init(this._root),this._add(n,K))}H.release(K)};T.remove=function(N,L=null){this._objectCount-=N.length;const K=H.acquire();for(const y of N)N=a.isSome(L)?L:r.copy(this._objectToBoundingSphere(y),e),t(N[3])?(K.init(this._root),this._remove(y,N,K)):this._degenerateObjects.delete(y);H.release(K);this._shrink()};T.update=function(N,L){if(t(L[3])||!this._isDegenerate(N))c[0]=N,N=c,this.remove(N,L),this.add(N)};T.forEachAlongRay=
function(N,L,K){const y=d.wrap(N,L);this._forEachNode(this._root,n=>{if(!this._intersectsNode(y,n))return!1;n=n.node;n.terminals.forAll(A=>{this._intersectsObject(y,A)&&K(A)});null!==n.residents&&n.residents.forAll(A=>{this._intersectsObject(y,A)&&K(A)});return!0})};T.forEachAlongRayWithVerticalOffset=function(N,L,K,y){const n=d.wrap(N,L);this._forEachNode(this._root,A=>{if(!this._intersectsNodeWithOffset(n,A,y))return!1;A=A.node;A.terminals.forAll(O=>{this._intersectsObjectWithOffset(n,O,y)&&K(O)});
null!==A.residents&&A.residents.forAll(O=>{this._intersectsObjectWithOffset(n,O,y)&&K(O)});return!0})};T.forEach=function(N){this._forEachNode(this._root,L=>{L=L.node;L.terminals.forAll(N);null!==L.residents&&L.residents.forAll(N);return!0});this._degenerateObjects.forEach(N)};T.forEachDegenerateObject=function(N){this._degenerateObjects.forEach(N)};T.findClosest=function(N,L,K,y=()=>!0,n=Infinity){let A=Infinity,O=Infinity,S=null;const Y=G(N,L),ba=aa=>{--n;if(y(aa)){var ea=this._objectToBoundingSphere(aa);
if(f.intersectsSphere(K,ea)){var na=x(N,L,r.getCenter(ea)),pa=na-ea[3];ea=na+ea[3];pa<A&&(A=pa,O=ea,S=aa)}}};this._forEachNodeDepthOrdered(this._root,aa=>{if(0>=n||!f.intersectsSphere(K,aa.bounds))return!1;l.scale(q,Y,aa.halfSize);l.add(q,q,aa.bounds);if(x(N,L,q)>O)return!1;aa=aa.node;aa.terminals.forAll(ea=>ba(ea));null!==aa.residents&&aa.residents.forAll(ea=>ba(ea));return!0},N,L);return S};T.forEachInDepthRange=function(N,L,K,y,n,A,O){let S=-Infinity,Y=Infinity;const ba={setRange:la=>{K===R.DepthOrder.FRONT_TO_BACK?
(S=Math.max(S,la.near),Y=Math.min(Y,la.far)):(S=Math.max(S,-la.far),Y=Math.min(Y,-la.near))}};ba.setRange(y);const aa=x(L,K,N),ea=G(L,K),na=G(L,-K),pa=la=>{if(O(la)){var qa=this._objectToBoundingSphere(la),wa=r.getCenter(qa);wa=x(L,K,wa)-aa;var Ca=wa+qa[3];wa-qa[3]>Y||Ca<S||!f.intersectsSphere(A,qa)||n(la,ba)}};this._forEachNodeDepthOrdered(this._root,la=>{if(!f.intersectsSphere(A,la.bounds))return!1;l.scale(q,ea,la.halfSize);l.add(q,q,la.bounds);if(x(L,K,q)-aa>Y)return!1;l.scale(q,na,la.halfSize);
l.add(q,q,la.bounds);if(x(L,K,q)-aa<S)return!1;la=la.node;la.terminals.forAll(qa=>pa(qa));null!==la.residents&&la.residents.forAll(qa=>pa(qa));return!0},L,K)};T.forEachNode=function(N){this._forEachNode(this._root,L=>N(L.node,L.bounds,L.halfSize))};T.forEachNeighbor=function(N,L){const K=r.getRadius(L),y=r.getCenter(L),n=A=>{const O=this._objectToBoundingSphere(A);var S=r.getRadius(O);S=K+S;0>=l.squaredDistance(r.getCenter(O),y)-S*S&&N(A)};this._forEachNode(this._root,A=>{var O=r.getRadius(A.bounds);
O=K+O;if(0<l.squaredDistance(r.getCenter(A.bounds),y)-O*O)return!1;A=A.node;A.terminals.forAll(S=>n(S));null!==A.residents&&A.residents.forAll(S=>n(S));return!0});this.forEachDegenerateObject(n)};T._intersectsNode=function(N,L){p(L.bounds,2*-L.halfSize,E);p(L.bounds,2*L.halfSize,C);return m.rayBoxTest(N.origin,N.direction,E,C)};T._intersectsNodeWithOffset=function(N,L,K){p(L.bounds,2*-L.halfSize,E);p(L.bounds,2*L.halfSize,C);K.applyToMinMax(E,C);return m.rayBoxTest(N.origin,N.direction,E,C)};T._intersectsObject=
function(N,L){L=this._objectToBoundingSphere(L);return 0<L[3]?r.intersectsRay(L,N):!0};T._intersectsObjectWithOffset=function(N,L,K){L=this._objectToBoundingSphere(L);return 0<L[3]?r.intersectsRay(K.applyToBoundingSphere(L),N):!0};T._forEachNode=function(N,L){N=H.acquire().init(N);const K=[N];for(;0!==K.length;){N=K.pop();if(L(N)&&!N.isLeaf())for(let y=0;y<N.node.children.length;y++)N.node.children[y]&&K.push(H.acquire().init(N).advance(y));H.release(N)}};T._forEachNodeDepthOrdered=function(N,L,K,
y=R.DepthOrder.FRONT_TO_BACK){N=H.acquire().init(N);const n=[N];for(D(K,y,W);0!==n.length;){N=n.pop();if(L(N)&&!N.isLeaf())for(K=7;0<=K;--K)y=W[K],N.node.children[y]&&n.push(H.acquire().init(N).advance(y));H.release(N)}};T._remove=function(N,L,K){I.clear();L=K.advanceTo(L,(y,n)=>{I.push(y.node);I.push(n)})?K.node.terminals:K.node.residents;L.removeUnordered(N);if(0===L.length)for(N=I.length-2;0<=N&&this._purge(I.data[N],I.data[N+1]);N-=2);};T._nodeIsEmpty=function(N){if(0!==N.terminals.length)return!1;
if(null!==N.residents)return 0===N.residents.length;for(let L=0;L<N.children.length;L++)if(N.children[L])return!1;return!0};T._purge=function(N,L){0<=L&&(N.children[L]=null);return this._nodeIsEmpty(N)?(null===N.residents&&(N.residents=new u({shrink:!0})),!0):!1};T._add=function(N,L){L.advanceTo(this._objectToBoundingSphere(N))?L.node.terminals.push(N):(L.node.residents.push(N),L.node.residents.length>this._maximumObjectsPerNode&&L.depth<this._maximumDepth&&this._split(L))};T._split=function(N){const L=
N.node.residents;N.node.residents=null;for(let K=0;K<L.length;K++){const y=H.acquire().init(N);this._add(L.getItemAt(K),y);H.release(y)}};T._grow=function(N,L){0!==L&&(w(N,L,K=>this._objectToBoundingSphere(K),B),t(B[3])&&!this._fitsInsideTree(B)&&(this._nodeIsEmpty(this._root.node)?(r.copy(B,this._root.bounds),this._root.halfSize=1.25*B[3]):(N=this._rootBoundsForRootAsSubNode(B),this._placingRootViolatesMaxDepth(N)?this._rebuildTree(B,N):this._growRootAsSubNode(N),H.release(N))))};T._rebuildTree=
function(N,L){l.copy(M,L.bounds);M[3]=L.halfSize;w([N,M],2,K=>K,Q);N=H.acquire().init(this._root);this._root.initFrom(null,Q,1.25*Q[3]);this._forEachNode(N,K=>{this.add(K.node.terminals.data,K.node.terminals.length);null!==K.node.residents&&this.add(K.node.residents.data,K.node.residents.length);return!0});H.release(N)};T._placingRootViolatesMaxDepth=function(N){const L=Math.log(N.halfSize/this._root.halfSize)*Math.LOG2E;let K=0;this._forEachNode(this._root,y=>{K=Math.max(K,y.depth);return K+L<=this._maximumDepth});
return K+L>this._maximumDepth};T._rootBoundsForRootAsSubNode=function(N){var L=N[3];let K=-Infinity;const y=this._root.bounds,n=this._root.halfSize;for(var A=0;3>A;A++){var O=Math.max(0,Math.ceil((y[A]-n-(N[A]-L))/(2*n)));const S=Math.max(0,Math.ceil((N[A]+L-(y[A]+n))/(2*n)))+1;K=Math.max(K,2**Math.ceil(Math.log(O+S)*Math.LOG2E));U[A].min=O;U[A].max=S}for(N=0;3>N;N++)L=U[N].min,A=U[N].max,O=(K-(L+A))/2,L+=Math.ceil(O),A+=Math.floor(O),h[N]=y[N]-n-L*n*2+(A+L)*n;h[3]=K*n*J;return H.acquire().initFrom(null,
h,K*n,0)};T._growRootAsSubNode=function(N){const L=this._root.node;l.copy(B,this._root.bounds);B[3]=this._root.halfSize;this._root.init(N);N.advanceTo(B,null,!0);N.node.children=L.children;N.node.residents=L.residents;N.node.terminals=L.terminals};T._shrink=function(){for(;;){const N=this._findShrinkIndex();if(-1===N)break;this._root.advance(N);this._root.depth=0}};T._findShrinkIndex=function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let N=null;const L=this._root.node.children;
let K=0,y=0;for(;y<L.length&&null==N;)K=y++,N=L[K];for(;y<L.length;)if(L[y++])return-1;return K};T._isDegenerate=function(N){N=this._objectToBoundingSphere(N)[3];return!t(N)};T._fitsInsideTree=function(N){const L=this._root.bounds,K=this._root.halfSize;return N[3]<=K&&N[0]>=L[0]-K&&N[0]<=L[0]+K&&N[1]>=L[1]-K&&N[1]<=L[1]+K&&N[2]>=L[2]-K&&N[2]<=L[2]+K};b._createClass(R,[{key:"bounds",get:function(){return this._root.bounds}},{key:"halfSize",get:function(){return this._root.halfSize}},{key:"root",get:function(){return this._root.node}},
{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},{key:"maximumDepth",get:function(){return this._maximumDepth}},{key:"objectCount",get:function(){return this._objectCount}}]);return R}(),H=function(){function R(){this.bounds=r.create();this.halfSize=0;this.initFrom(null,null,0,0)}var T=R.prototype;T.init=function(N){return this.initFrom(N.node,N.bounds,N.halfSize,N.depth)};T.initFrom=function(N,L,K,y=this.depth){this.node=a.isSome(N)?N:R.createEmptyNode();a.isSome(L)&&
r.copy(L,this.bounds);this.halfSize=K;this.depth=y;return this};T.advance=function(N){let L=this.node.children[N];L||(L=R.createEmptyNode(),this.node.children[N]=L);this.node=L;this.halfSize/=2;this.depth++;N=v[N];this.bounds[0]+=N[0]*this.halfSize;this.bounds[1]+=N[1]*this.halfSize;this.bounds[2]+=N[2]*this.halfSize;this.bounds[3]=this.halfSize*J;return this};T.advanceTo=function(N,L,K=!1){for(;;){if(this.isTerminalFor(N))return L&&L(this,-1),!0;if(this.isLeaf()){if(!K)return L&&L(this,-1),!1;this.node.residents=
null}const y=this._childIndex(N);L&&L(this,y);this.advance(y)}};T.isLeaf=function(){return null!=this.node.residents};T.isTerminalFor=function(N){return N[3]>this.halfSize/2};T._childIndex=function(N){const L=this.bounds;return(L[0]<N[0]?1:0)+(L[1]<N[1]?2:0)+(L[2]<N[2]?4:0)};R.createEmptyNode=function(){return{children:[null,null,null,null,null,null,null,null],terminals:new u({shrink:!0}),residents:new u({shrink:!0})}};R.acquire=function(){return R._pool.acquire()};R.release=function(N){R._pool.release(N)};
R.clearPool=function(){R._pool.prune()};return R}();H._pool=new g(H);(function(R){R=R.DepthOrder||(R.DepthOrder={});R[R.FRONT_TO_BACK=1]="FRONT_TO_BACK";R[R.BACK_TO_FRONT=-1]="BACK_TO_FRONT"})(z||(z={}));const v=[k.fromValues(-1,-1,-1),k.fromValues(1,-1,-1),k.fromValues(-1,1,-1),k.fromValues(1,1,-1),k.fromValues(-1,-1,1),k.fromValues(1,-1,1),k.fromValues(-1,1,1),k.fromValues(1,1,1)],F=[k.fromValues(-1,-1,-1),k.fromValues(-1,-1,1),k.fromValues(-1,1,-1),k.fromValues(-1,1,1),k.fromValues(1,-1,-1),k.fromValues(1,
-1,1),k.fromValues(1,1,-1),k.fromValues(1,1,1)],J=Math.sqrt(3),c=[null],h=r.create(),q=k.create(),E=k.create(),C=k.create(),I=new u,e=r.create(),B=r.create(),M=r.create(),Q=r.create(),U=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],P=new u,W=[0,0,0,0,0,0,0,0];return z})},"esri/views/3d/webgl-engine/materials/RibbonLineMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../geometry/support/frustum ../../../../geometry/support/lineSegment ../../../../geometry/support/plane ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutputOptions ../lib/geometryDataUtils ../lib/GLMaterial ../lib/GLMaterials ../lib/Material ../lib/RenderSlot ../lib/Util ../lib/VertexAttribute ./VisualVariablePassParameters ./renderers/utils ../../../../chunks/RibbonLine.glsl ../shaders/RibbonLineTechnique ../shaders/RibbonLineTechniqueConfiguration".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p,w,D,G,x,t,z,H,v,F,J,c,h,q,E,C,I){function e(ja,ta,X,V,Z){for(let fa=0;fa<Z;fa++)X[V++]=ja[ta++];return V}function B(ja,ta,X){ta=ta.get(c.VertexAttribute.POSITION).data;X=X?X.get(c.VertexAttribute.POSITION):null;return ja.isClosed?X?2<X.length:6<ta.length:!1}const M=g.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial");var Q;(function(ja){ja[ja.LEFT_JOIN_START=-2]="LEFT_JOIN_START";ja[ja.LEFT_JOIN_END=-1]="LEFT_JOIN_END";ja[ja.LEFT_CAP_START=-4]="LEFT_CAP_START";
ja[ja.LEFT_CAP_END=-5]="LEFT_CAP_END";ja[ja.RIGHT_JOIN_START=2]="RIGHT_JOIN_START";ja[ja.RIGHT_JOIN_END=1]="RIGHT_JOIN_END";ja[ja.RIGHT_CAP_START=4]="RIGHT_CAP_START";ja[ja.RIGHT_CAP_END=5]="RIGHT_CAP_END"})(Q||(Q={}));g=function(ja){function ta(V){V=ja.call(this,V,new P)||this;V._vertexAttributeLocations=C.ribbonVertexAttributeLocations;V.techniqueConfig=new I.RibbonLineTechniqueConfiguration;V.layout=V.createLayout();return V}a._inheritsLoose(ta,ja);var X=ta.prototype;X.isClosed=function(V,Z){return this.parameters.isClosed?
Z?2<Z.length:6<V.length:!1};X.getConfiguration=function(V,Z){this.techniqueConfig.output=V;this.techniqueConfig.draped=Z.slot===F.RenderSlot.DRAPED_MATERIAL;V=l.isSome(this.parameters.stipplePattern)&&V!==x.ShaderOutput.Highlight;this.techniqueConfig.stippleEnabled=V;this.techniqueConfig.stippleOffColorEnabled=V&&l.isSome(this.parameters.stippleOffColor);this.techniqueConfig.stippleScaleWithLineWidth=V&&this.parameters.stippleScaleWithLineWidth;this.techniqueConfig.stipplePreferContinuous=V&&this.parameters.stipplePreferContinuous;
this.techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane;this.techniqueConfig.hasOccludees=this.parameters.hasOccludees;this.techniqueConfig.roundJoins="round"===this.parameters.join;this.techniqueConfig.capType=this.parameters.cap;this.techniqueConfig.hasPolygonOffset=this.parameters.hasPolygonOffset;this.techniqueConfig.writeDepth=this.parameters.writeDepth;this.techniqueConfig.vvColor=this.parameters.vvColorEnabled;this.techniqueConfig.vvOpacity=this.parameters.vvOpacityEnabled;this.techniqueConfig.vvSize=
this.parameters.vvSizeEnabled;this.techniqueConfig.innerColorEnabled=0<this.parameters.innerWidth&&l.isSome(this.parameters.innerColor);this.techniqueConfig.falloffEnabled=0<this.parameters.falloff;this.techniqueConfig.occluder=this.parameters.renderOccluded===v.RenderOccludedFlag.OccludeAndTransparentStencil;this.techniqueConfig.transparencyPassType=Z.transparencyPassType;this.techniqueConfig.hasMultipassTerrain=Z.multipassTerrain.enabled;this.techniqueConfig.cullAboveGround=Z.multipassTerrain.cullAboveGround;
this.techniqueConfig.wireframe=this.parameters.wireframe;return this.techniqueConfig};X.intersect=function(V,Z,fa,ka,sa,ca,da,ha,ia){l.isSome(ia)?this._intersectDrapedLineGeometry(V,ka,ia,ca,da):this._intersectLineGeometry(V,Z,fa,ka,da)};X._intersectDrapedLineGeometry=function(V,Z,fa,ka,sa){if(Z.options.selectionMode){Z=V.vertexAttributes.get(c.VertexAttribute.POSITION).data;var ca=V.vertexAttributes.get(c.VertexAttribute.SIZE),da=this.parameters.width;this.parameters.vvSizeEnabled?(ca=V.vertexAttributes.get(c.VertexAttribute.SIZEFEATUREATTRIBUTE).data[0],
da*=u.clamp(this.parameters.vvSizeOffset[0]+ca*this.parameters.vvSizeFactor[0],this.parameters.vvSizeMinSize[0],this.parameters.vvSizeMaxSize[0])):ca&&(da*=ca.data[0]);ca=ka[0];ka=ka[1];V=(da/2+4)*V.screenToWorldRatio;da=Number.MAX_VALUE;var ha=0;for(let xa=0;xa<Z.length-5;xa+=3){var ia=Z[xa],va=Z[xa+1],za=ca-ia,ma=ka-va;ia=Z[xa+3]-ia;va=Z[xa+4]-va;const Ga=u.clamp((ia*za+va*ma)/(ia*ia+va*va),0,1);za=ia*Ga-za;ma=va*Ga-ma;ma=za*za+ma*ma;ma<da&&(da=ma,ha=xa/3)}da<V*V&&sa(fa.dist,fa.normal,ha,!1)}};
X._intersectLineGeometry=function(V,Z,fa,ka,sa){if(ka.options.selectionMode&&!q.isInstanceHidden(Z))if(J.isTranslationMatrix(fa)){var ca=V.vertexAttributes,da=ca.get(c.VertexAttribute.POSITION).data;Z=this.parameters.width;if(this.parameters.vvSizeEnabled){var ha=ca.get(c.VertexAttribute.SIZEFEATUREATTRIBUTE).data[0];Z*=u.clamp(this.parameters.vvSizeOffset[0]+ha*this.parameters.vvSizeFactor[0],this.parameters.vvSizeMinSize[0],this.parameters.vvSizeMaxSize[0])}else ca.has(c.VertexAttribute.SIZE)&&
(Z*=ca.get(c.VertexAttribute.SIZE).data[0]);var ia=ka.camera,va=K;f.copy(va,ka.point);ha=Z*ia.pixelRatio/2+4*ia.pixelRatio;d.set(na[0],va[0]-ha,va[1]+ha,0);d.set(na[1],va[0]+ha,va[1]+ha,0);d.set(na[2],va[0]+ha,va[1]-ha,0);d.set(na[3],va[0]-ha,va[1]-ha,0);for(Z=0;4>Z;Z++)if(!ia.unprojectFromRenderScreen(na[Z],pa[Z]))return;D.fromPoints(ia.eye,pa[0],pa[1],la);D.fromPoints(ia.eye,pa[1],pa[2],qa);D.fromPoints(ia.eye,pa[2],pa[3],wa);D.fromPoints(ia.eye,pa[3],pa[0],Ca);var za=Number.MAX_VALUE;Z=0;V=B(this.parameters,
ca,V.indices)?da.length-2:da.length-5;for(ca=0;ca<V;ca+=3){R[0]=da[ca]+fa[12];R[1]=da[ca+1]+fa[13];R[2]=da[ca+2]+fa[14];var ma=(ca+3)%da.length;T[0]=da[ma]+fa[12];T[1]=da[ma+1]+fa[13];T[2]=da[ma+2]+fa[14];if(!(0>D.signedDistance(la,R)&&0>D.signedDistance(la,T)||0>D.signedDistance(qa,R)&&0>D.signedDistance(qa,T)||0>D.signedDistance(wa,R)&&0>D.signedDistance(wa,T)||0>D.signedDistance(Ca,R)&&0>D.signedDistance(Ca,T))){ia.projectToRenderScreen(R,y);ia.projectToRenderScreen(T,n);if(0>y[2]&&0<n[2])d.subtract(N,
R,T),ma=ia.frustum,ma=-D.signedDistance(ma[p.PlaneIndex.NEAR],R)/d.dot(N,D.normal(ma[p.PlaneIndex.NEAR])),d.scale(N,N,ma),d.add(R,R,N),ia.projectToRenderScreen(R,y);else if(0<y[2]&&0>n[2])d.subtract(N,T,R),ma=ia.frustum,ma=-D.signedDistance(ma[p.PlaneIndex.NEAR],T)/d.dot(N,D.normal(ma[p.PlaneIndex.NEAR])),d.scale(N,N,ma),d.add(T,T,N),ia.projectToRenderScreen(T,n);else if(0>y[2]&&0>n[2])continue;y[2]=0;n[2]=0;ma=w.distance2(w.fromPoints(y,n,S),va);ma<za&&(za=ma,d.copy(A,R),d.copy(O,T),Z=ca/3)}}fa=
ka.rayBegin;ka=ka.rayEnd;za<ha*ha&&(da=Number.MAX_VALUE,w.closestLineSegmentPoint(w.fromPoints(A,O,S),w.fromPoints(fa,ka,Y),L)&&(d.subtract(L,L,fa),da=d.length(L),d.scale(L,L,1/da),da/=d.distance(fa,ka)),sa(da,L,Z,!1))}else M.error("intersection assumes a translation-only matrix")};X.computeAttachmentOrigin=function(V,Z){const fa=V.vertexAttributes;if(!fa)return null;V=V.indices;const ka=fa.get(c.VertexAttribute.POSITION);return t.computeAttachmentOriginLines(ka,V?V.get(c.VertexAttribute.POSITION):
null,V&&B(this.parameters,fa,V),Z)};X.createLayout=function(){const V=G.newLayout().vec3f(c.VertexAttribute.POSITION).f32(c.VertexAttribute.SUBDIVISIONFACTOR).vec2f(c.VertexAttribute.UV0).vec3f(c.VertexAttribute.AUXPOS1).vec3f(c.VertexAttribute.AUXPOS2);this.parameters.vvSizeEnabled?V.f32(c.VertexAttribute.SIZEFEATUREATTRIBUTE):V.f32(c.VertexAttribute.SIZE);this.parameters.vvColorEnabled?V.f32(c.VertexAttribute.COLORFEATUREATTRIBUTE):V.vec4f(c.VertexAttribute.COLOR);this.parameters.vvOpacityEnabled&&
V.f32(c.VertexAttribute.OPACITYFEATUREATTRIBUTE);return V};X.createBufferWriter=function(){return new W(this.layout,this.parameters)};X.requiresSlot=function(V,Z){if(V===F.RenderSlot.DRAPED_MATERIAL)return!0;if(this.parameters.renderOccluded===v.RenderOccludedFlag.OccludeAndTransparentStencil)return V===F.RenderSlot.OPAQUE_MATERIAL||V===F.RenderSlot.OCCLUDER_MATERIAL||V===F.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL;Z=H.outputFromPass(Z);return Z===x.ShaderOutput.Color||Z===x.ShaderOutput.Alpha?V===
(this.parameters.writeDepth?F.RenderSlot.TRANSPARENT_MATERIAL:F.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL):V===F.RenderSlot.OPAQUE_MATERIAL};X.createGLMaterial=function(V){return V.output===x.ShaderOutput.Color||V.output===x.ShaderOutput.Alpha||V.output===x.ShaderOutput.Highlight||V.output===x.ShaderOutput.Depth?new U(V):null};X.validateParameters=function(V){"miter"!==V.join&&(V.miterLimit=0)};return ta}(v.Material);let U=function(ja){function ta(){return ja.apply(this,arguments)||this}
a._inheritsLoose(ta,ja);var X=ta.prototype;X._updateOccludeeState=function(V){V.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:V.hasOccludees})};X.beginSlot=function(V){this._output!==x.ShaderOutput.Color&&this._output!==x.ShaderOutput.Alpha||this._updateOccludeeState(V);return this.ensureTechnique(C.RibbonLineTechnique,V)};return ta}(z),P=function(ja){function ta(){var X=ja.apply(this,arguments)||this;X.width=0;X.color=m.ONES;X.join="miter";X.cap=
I.CapType.BUTT;X.miterLimit=5;X.writeDepth=!0;X.hasPolygonOffset=!1;X.stippleScaleWithLineWidth=!1;X.stipplePreferContinuous=!0;X.hasSlicePlane=!1;X.vvFastUpdate=!1;X.isClosed=!1;X.falloff=0;X.innerWidth=0;X.hasOccludees=!1;X.wireframe=!1;return X}a._inheritsLoose(ta,ja);return ta}(h.VisualVariablePassParameters),W=function(){function ja(X,V){this.parameters=V;this.numJoinSubdivisions=0;this.vertexBufferLayout=X;X=V.stipplePattern?1:0;switch(this.parameters.join){case "miter":case "bevel":this.numJoinSubdivisions=
X;break;case "round":this.numJoinSubdivisions=E.NUM_ROUND_JOIN_SUBDIVISIONS+X}}var ta=ja.prototype;ta._isClosed=function(X){return B(this.parameters,X.vertexAttributes,X.indices)};ta.allocate=function(X){return this.vertexBufferLayout.createBuffer(X)};ta.elementCount=function(X){var V=X.indices.get(c.VertexAttribute.POSITION).length/2+1;X=this._isClosed(X);V=(X?2:4)+((X?V:V-1)-(X?0:1))*(2*this.numJoinSubdivisions+4);V+=2;this.parameters.wireframe&&(V=2+4*(V-2));return V};ta.write=function(X,V,Z,fa){var ka;
const sa=ba,ca=aa,da=ea,ha=V.vertexAttributes.get(c.VertexAttribute.POSITION).data;var ia=V.indices&&V.indices.get(c.VertexAttribute.POSITION);const va=null==(ka=V.vertexAttributes.get(c.VertexAttribute.DISTANCETOSTART))?void 0:ka.data;ia&&ia.length!==2*(ha.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");let za=1,ma=0;this.parameters.vvSizeEnabled?ma=V.vertexAttributes.get(c.VertexAttribute.SIZEFEATUREATTRIBUTE).data[0]:V.vertexAttributes.has(c.VertexAttribute.SIZE)&&(za=
V.vertexAttributes.get(c.VertexAttribute.SIZE).data[0]);let xa=[1,1,1,1],Ga=0;this.parameters.vvColorEnabled?Ga=V.vertexAttributes.get(c.VertexAttribute.COLORFEATUREATTRIBUTE).data[0]:V.vertexAttributes.has(c.VertexAttribute.COLOR)&&(xa=V.vertexAttributes.get(c.VertexAttribute.COLOR).data);let Ja=0;this.parameters.vvOpacityEnabled&&(Ja=V.vertexAttributes.get(c.VertexAttribute.OPACITYFEATUREATTRIBUTE).data[0]);ka=ha.length/3;X=X.transformation;const ra=new Float32Array(Z.buffer);ia=this.vertexBufferLayout.stride/
4;let oa=fa*ia;fa=oa;let ya=0;const Ia=va?(ua,Ba,Da)=>ya=va[Da]:(ua,Ba,Da)=>ya+=d.distance(ua,Ba),Aa=(ua,Ba,Da,Ka,La,Ma,Na)=>{ra[oa++]=Ba[0];ra[oa++]=Ba[1];ra[oa++]=Ba[2];ra[oa++]=Ka;ra[oa++]=Na;ra[oa++]=La;ra[oa++]=ua[0];ra[oa++]=ua[1];ra[oa++]=ua[2];ra[oa++]=Da[0];ra[oa++]=Da[1];ra[oa++]=Da[2];this.parameters.vvSizeEnabled?ra[oa++]=ma:ra[oa++]=za;this.parameters.vvColorEnabled?ra[oa++]=Ga:(ua=Math.min(4*Ma,xa.length-4),ra[oa++]=xa[ua+0],ra[oa++]=xa[ua+1],ra[oa++]=xa[ua+2],ra[oa++]=xa[ua+3]);this.parameters.vvOpacityEnabled&&
(ra[oa++]=Ja)};oa+=ia;d.set(ca,ha[0],ha[1],ha[2]);X&&d.transformMat4(ca,ca,X);if(V=this._isClosed(V)){var Ea=ha.length-3;d.set(sa,ha[Ea],ha[Ea+1],ha[Ea+2]);X&&d.transformMat4(sa,sa,X)}else d.set(da,ha[3],ha[4],ha[5]),X&&d.transformMat4(da,da,X),Aa(ca,ca,da,1,Q.LEFT_CAP_START,0,0),Aa(ca,ca,da,1,Q.RIGHT_CAP_START,0,0),d.copy(sa,ca),d.copy(ca,da);Ea=V?0:1;const Ha=V?ka:ka-1;for(let ua=Ea;ua<Ha;ua++){var Fa=(ua+1)%ka*3;d.set(da,ha[Fa+0],ha[Fa+1],ha[Fa+2]);X&&d.transformMat4(da,da,X);Ia(sa,ca,ua);Aa(sa,
ca,da,0,Q.LEFT_JOIN_END,ua,ya);Aa(sa,ca,da,0,Q.RIGHT_JOIN_END,ua,ya);Fa=this.numJoinSubdivisions;for(let Ba=0;Ba<Fa;++Ba){const Da=(Ba+1)/(Fa+1);Aa(sa,ca,da,Da,Q.LEFT_JOIN_END,ua,ya);Aa(sa,ca,da,Da,Q.RIGHT_JOIN_END,ua,ya)}Aa(sa,ca,da,1,Q.LEFT_JOIN_START,ua,ya);Aa(sa,ca,da,1,Q.RIGHT_JOIN_START,ua,ya);d.copy(sa,ca);d.copy(ca,da)}V?(d.set(da,ha[3],ha[4],ha[5]),X&&d.transformMat4(da,da,X),ya=Ia(sa,ca,Ha),Aa(sa,ca,da,0,Q.LEFT_JOIN_END,Ea,ya),Aa(sa,ca,da,0,Q.RIGHT_JOIN_END,Ea,ya)):(ya=Ia(sa,ca,Ha),Aa(sa,
ca,ca,0,Q.LEFT_CAP_END,Ha,ya),Aa(sa,ca,ca,0,Q.RIGHT_CAP_END,Ha,ya));e(ra,fa+ia,ra,fa,ia);oa=e(ra,oa-ia,ra,oa,ia);this.parameters.wireframe&&this._addWireframeVertices(Z,fa,oa,ia)};ta._addWireframeVertices=function(X,V,Z,fa){const ka=new Float32Array(X.buffer,Z*Float32Array.BYTES_PER_ELEMENT);X=new Float32Array(X.buffer,V*Float32Array.BYTES_PER_ELEMENT,Z-V);V=0;for(Z=0;Z<X.length-1;Z+=2*fa)V=e(X,Z,ka,V,fa),V=e(X,Z+2*fa,ka,V,fa),V=e(X,Z+1*fa,ka,V,fa),V=e(X,Z+2*fa,ka,V,fa),V=e(X,Z+1*fa,ka,V,fa),V=e(X,
Z+3*fa,ka,V,fa)};return ja}();const R=r.create(),T=r.create(),N=r.create(),L=r.create(),K=r.create(),y=k.createRenderScreenPointArray3(),n=k.createRenderScreenPointArray3(),A=r.create(),O=r.create(),S=w.create(),Y=w.create(),ba=r.create(),aa=r.create(),ea=r.create(),na=[k.createRenderScreenPointArray3(),k.createRenderScreenPointArray3(),k.createRenderScreenPointArray3(),k.createRenderScreenPointArray3()],pa=[r.create(),r.create(),r.create(),r.create()],la=D.create(),qa=D.create(),wa=D.create(),Ca=
D.create();b.Parameters=P;b.RibbonLineMaterial=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/buffer/BufferView","../../../../geometry/support/buffer/types"],function(b,a,g,u){let l=function(){function f(r,m){this.layout=r;this.buffer="number"===typeof m?new ArrayBuffer(m*r.stride):m;for(const p of r.fieldNames)m=
r.fields.get(p),this[p]=new m.constructor(this.buffer,m.offset,this.stride)}var d=f.prototype;d.getField=function(r,m){return(r=this[r])&&r.elementCount===m.ElementCount&&r.elementType===m.ElementType?r:null};d.slice=function(r,m){return new f(this.layout,this.buffer.slice(r*this.stride,m*this.stride))};d.copyFrom=function(r,m,p,w){const D=this.stride;0===D%4?(r=new Uint32Array(r.buffer,m*D,w*D/4),(new Uint32Array(this.buffer,p*D,w*D/4)).set(r)):(r=new Uint8Array(r.buffer,m*D,w*D),(new Uint8Array(this.buffer,
p*D,w*D)).set(r))};a._createClass(f,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}}]);return f}(),k=function(){function f(){this.stride=0;this.fields=new Map;this.fieldNames=[]}var d=f.prototype;d.vec2f=function(r,m){this._appendField(r,g.BufferViewVec2f,m);return this};d.vec2f64=function(r,m){this._appendField(r,g.BufferViewVec2f64,m);return this};d.vec3f=
function(r,m){this._appendField(r,g.BufferViewVec3f,m);return this};d.vec3f64=function(r,m){this._appendField(r,g.BufferViewVec3f64,m);return this};d.vec4f=function(r,m){this._appendField(r,g.BufferViewVec4f,m);return this};d.vec4f64=function(r,m){this._appendField(r,g.BufferViewVec4f64,m);return this};d.mat3f=function(r,m){this._appendField(r,g.BufferViewMat3f,m);return this};d.mat3f64=function(r,m){this._appendField(r,g.BufferViewMat3f64,m);return this};d.mat4f=function(r,m){this._appendField(r,
g.BufferViewMat4f,m);return this};d.mat4f64=function(r,m){this._appendField(r,g.BufferViewMat4f64,m);return this};d.vec4u8=function(r,m){this._appendField(r,g.BufferViewVec4u8,m);return this};d.f32=function(r,m){this._appendField(r,g.BufferViewFloat,m);return this};d.f64=function(r,m){this._appendField(r,g.BufferViewFloat64,m);return this};d.u8=function(r,m){this._appendField(r,g.BufferViewUint8,m);return this};d.u16=function(r,m){this._appendField(r,g.BufferViewUint16,m);return this};d.i8=function(r,
m){this._appendField(r,g.BufferViewInt8,m);return this};d.vec2i8=function(r,m){this._appendField(r,g.BufferViewVec2i8,m);return this};d.vec2i16=function(r,m){this._appendField(r,g.BufferViewVec2i16,m);return this};d.vec2u8=function(r,m){this._appendField(r,g.BufferViewVec2u8,m);return this};d.vec4u16=function(r,m){this._appendField(r,g.BufferViewVec4u16,m);return this};d.u32=function(r,m){this._appendField(r,g.BufferViewUint32,m);return this};d._appendField=function(r,m,p){const w=m.ElementCount*
u.elementTypeSize(m.ElementType);this.fields.set(r,{size:w,constructor:m,offset:this.stride,optional:p});this.stride+=w;this.fieldNames.push(r)};d.alignTo=function(r){this.stride=Math.floor((this.stride+r-1)/r)*r;return this};d.hasField=function(r){return this.fieldNames.includes(r)};d.createBuffer=function(r){return new l(this,r)};d.createView=function(r){return new l(this,r)};d.clone=function(){const r=new f;r.stride=this.stride;r.fields=new Map;this.fields.forEach((m,p)=>r.fields.set(p,m));r.fieldNames=
this.fieldNames.slice();r.BufferType=this.BufferType;return r};return f}();b.InterleavedBuffer=l;b.InterleavedLayout=k;b.newLayout=function(){return new k};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/BufferView":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),function(b,a,g,u,l,k,f,d){let r=
function(K){function y(n,A=0,O,S){n=K.call(this,Float32Array,n,A,O,S)||this;n.elementType="f32";return n}a._inheritsLoose(y,K);y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(l.BufferViewScalarImpl);r.ElementType="f32";let m=function(K){function y(n,A=0,O,S){n=K.call(this,Float32Array,n,A,O,S)||this;n.elementType="f32";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,
A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(k.BufferViewVec2Impl);m.ElementType="f32";let p=function(K){function y(n,A=0,O,S){n=K.call(this,Float32Array,n,A,O,S)||this;n.elementType="f32";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(f.BufferViewVec3Impl);p.ElementType="f32";let w=function(K){function y(n,A=0,O,
S){n=K.call(this,Float32Array,n,A,O,S)||this;n.elementType="f32";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(d.BufferViewVec4Impl);w.ElementType="f32";let D=function(K){function y(n,A=0,O,S){n=K.call(this,Float32Array,n,A,O,S)||this;n.elementType="f32";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,
A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(g.BufferViewMat3Impl);D.ElementType="f32";g=function(K){function y(n,A=0,O,S){n=K.call(this,Float64Array,n,A,O,S)||this;n.elementType="f64";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(g.BufferViewMat3Impl);g.ElementType="f64";let G=function(K){function y(n,
A=0,O,S){n=K.call(this,Float32Array,n,A,O,S)||this;n.elementType="f32";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(u.BufferViewMat4Impl);G.ElementType="f32";u=function(K){function y(n,A=0,O,S){n=K.call(this,Float64Array,n,A,O,S)||this;n.elementType="f64";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,
n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(u.BufferViewMat4Impl);u.ElementType="f64";let x=function(K){function y(n,A=0,O,S){n=K.call(this,Float64Array,n,A,O,S)||this;n.elementType="f64";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(l.BufferViewScalarImpl);x.ElementType="f64";
let t=function(K){function y(n,A=0,O,S){n=K.call(this,Float64Array,n,A,O,S)||this;n.elementType="f64";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(k.BufferViewVec2Impl);t.ElementType="f64";let z=function(K){function y(n,A=0,O,S){n=K.call(this,Float64Array,n,A,O,S)||this;n.elementType="f64";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,
A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(f.BufferViewVec3Impl);z.ElementType="f64";let H=function(K){function y(n,A=0,O,S){n=K.call(this,Float64Array,n,A,O,S)||this;n.elementType="f64";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(d.BufferViewVec4Impl);
H.ElementType="f64";let v=function(K){function y(n,A=0,O,S){n=K.call(this,Uint8Array,n,A,O,S)||this;n.elementType="u8";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(l.BufferViewScalarImpl);v.ElementType="u8";let F=function(K){function y(n,A=0,O,S){n=K.call(this,Uint8Array,n,A,O,S)||this;n.elementType="u8";return n}a._inheritsLoose(y,K);y.prototype.slice=
function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(k.BufferViewVec2Impl);F.ElementType="u8";let J=function(K){function y(n,A=0,O,S){n=K.call(this,Uint8Array,n,A,O,S)||this;n.elementType="u8";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(f.BufferViewVec3Impl);
J.ElementType="u8";let c=function(K){function y(n,A=0,O,S){n=K.call(this,Uint8Array,n,A,O,S)||this;n.elementType="u8";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(d.BufferViewVec4Impl);c.ElementType="u8";let h=function(K){function y(n,A=0,O,S){n=K.call(this,Uint16Array,n,A,O,S)||this;n.elementType="u16";return n}a._inheritsLoose(y,K);y.prototype.slice=
function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(l.BufferViewScalarImpl);h.ElementType="u16";let q=function(K){function y(n,A=0,O,S){n=K.call(this,Uint16Array,n,A,O,S)||this;n.elementType="u16";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(k.BufferViewVec2Impl);
q.ElementType="u16";let E=function(K){function y(n,A=0,O,S){n=K.call(this,Uint16Array,n,A,O,S)||this;n.elementType="u16";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(f.BufferViewVec3Impl);E.ElementType="u16";let C=function(K){function y(n,A=0,O,S){n=K.call(this,Uint16Array,n,A,O,S)||this;n.elementType="u16";return n}a._inheritsLoose(y,K);y.prototype.slice=
function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(d.BufferViewVec4Impl);C.ElementType="u16";let I=function(K){function y(n,A=0,O,S){n=K.call(this,Uint32Array,n,A,O,S)||this;n.elementType="u32";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(l.BufferViewScalarImpl);
I.ElementType="u32";let e=function(K){function y(n,A=0,O,S){n=K.call(this,Uint32Array,n,A,O,S)||this;n.elementType="u32";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(k.BufferViewVec2Impl);e.ElementType="u32";let B=function(K){function y(n,A=0,O,S){n=K.call(this,Uint32Array,n,A,O,S)||this;n.elementType="u32";return n}a._inheritsLoose(y,K);y.prototype.slice=
function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(f.BufferViewVec3Impl);B.ElementType="u32";let M=function(K){function y(n,A=0,O,S){n=K.call(this,Uint32Array,n,A,O,S)||this;n.elementType="u32";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(d.BufferViewVec4Impl);
M.ElementType="u32";let Q=function(K){function y(n,A=0,O,S){n=K.call(this,Int8Array,n,A,O,S)||this;n.elementType="i8";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(l.BufferViewScalarImpl);Q.ElementType="i8";let U=function(K){function y(n,A=0,O,S){n=K.call(this,Int8Array,n,A,O,S)||this;n.elementType="i8";return n}a._inheritsLoose(y,K);y.prototype.slice=
function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(k.BufferViewVec2Impl);U.ElementType="i8";let P=function(K){function y(n,A=0,O,S){n=K.call(this,Int8Array,n,A,O,S)||this;n.elementType="i8";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(f.BufferViewVec3Impl);
P.ElementType="i8";let W=function(K){function y(n,A=0,O,S){n=K.call(this,Int8Array,n,A,O,S)||this;n.elementType="i8";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(d.BufferViewVec4Impl);W.ElementType="i8";let R=function(K){function y(n,A=0,O,S){n=K.call(this,Int16Array,n,A,O,S)||this;n.elementType="i16";return n}a._inheritsLoose(y,K);y.prototype.slice=
function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(l.BufferViewScalarImpl);R.ElementType="i16";let T=function(K){function y(n,A=0,O,S){n=K.call(this,Int16Array,n,A,O,S)||this;n.elementType="i16";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(k.BufferViewVec2Impl);
T.ElementType="i16";let N=function(K){function y(n,A=0,O,S){n=K.call(this,Int16Array,n,A,O,S)||this;n.elementType="i16";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(f.BufferViewVec3Impl);N.ElementType="i16";let L=function(K){function y(n,A=0,O,S){n=K.call(this,Int16Array,n,A,O,S)||this;n.elementType="i16";return n}a._inheritsLoose(y,K);y.prototype.slice=
function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(d.BufferViewVec4Impl);L.ElementType="i16";l=function(K){function y(n,A=0,O,S){n=K.call(this,Int32Array,n,A,O,S)||this;n.elementType="i32";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(l.BufferViewScalarImpl);
l.ElementType="i32";k=function(K){function y(n,A=0,O,S){n=K.call(this,Int32Array,n,A,O,S)||this;n.elementType="i32";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(k.BufferViewVec2Impl);k.ElementType="i32";f=function(K){function y(n,A=0,O,S){n=K.call(this,Int32Array,n,A,O,S)||this;n.elementType="i32";return n}a._inheritsLoose(y,K);y.prototype.slice=
function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(f.BufferViewVec3Impl);f.ElementType="i32";d=function(K){function y(n,A=0,O,S){n=K.call(this,Int32Array,n,A,O,S)||this;n.elementType="i32";return n}a._inheritsLoose(y,K);y.prototype.slice=function(n,A){return this.sliceBuffer(y,n,A)};y.fromTypedArray=function(n,A){return new y(n.buffer,n.byteOffset,A,n.byteOffset+n.byteLength)};return y}(d.BufferViewVec4Impl);
d.ElementType="i32";b.BufferViewFloat=r;b.BufferViewFloat64=x;b.BufferViewInt16=R;b.BufferViewInt32=l;b.BufferViewInt8=Q;b.BufferViewMat3f=D;b.BufferViewMat3f64=g;b.BufferViewMat4f=G;b.BufferViewMat4f64=u;b.BufferViewUint16=h;b.BufferViewUint32=I;b.BufferViewUint8=v;b.BufferViewVec2f=m;b.BufferViewVec2f64=t;b.BufferViewVec2i16=T;b.BufferViewVec2i32=k;b.BufferViewVec2i8=U;b.BufferViewVec2u16=q;b.BufferViewVec2u32=e;b.BufferViewVec2u8=F;b.BufferViewVec3f=p;b.BufferViewVec3f64=z;b.BufferViewVec3i16=
N;b.BufferViewVec3i32=f;b.BufferViewVec3i8=P;b.BufferViewVec3u16=E;b.BufferViewVec3u32=B;b.BufferViewVec3u8=J;b.BufferViewVec4f=w;b.BufferViewVec4f64=H;b.BufferViewVec4i16=L;b.BufferViewVec4i32=d;b.BufferViewVec4i8=W;b.BufferViewVec4u16=C;b.BufferViewVec4u32=M;b.BufferViewVec4u8=c;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/internals/Mat3":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(b,
a){let g=function(){function u(k,f,d=0,r,m){this.TypedArrayConstructor=k;this.elementCount=9;k=this.TypedArrayConstructor;void 0===r&&(r=9*k.BYTES_PER_ELEMENT);const p=0===f.byteLength?0:d;this.typedBuffer=null==m?new k(f,p):new k(f,p,(m-d)/k.BYTES_PER_ELEMENT);this.typedBufferStride=r/k.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var l=u.prototype;l.sliceBuffer=function(k,f,
d=this.count-f){f=this.typedBuffer.byteOffset+f*this.stride;return new k(this.buffer,f,this.stride,f+d*this.stride)};l.getMat=function(k,f){k*=this.typedBufferStride;for(let d=0;9>d;d++)f[d]=this.typedBuffer[k++];return f};l.setMat=function(k,f){k*=this.typedBufferStride;for(let d=0;9>d;d++)this.typedBuffer[k++]=f[d]};l.get=function(k,f){return this.typedBuffer[k*this.typedBufferStride+f]};l.set=function(k,f,d){this.typedBuffer[k*this.typedBufferStride+f]=d};l.copyFrom=function(k,f,d){const r=this.typedBuffer,
m=f.typedBuffer;k*=this.typedBufferStride;f=d*f.typedBufferStride;for(d=0;9>d;++d)r[k++]=m[f++]};a._createClass(u,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return u}();g.ElementCount=9;b.BufferViewMat3Impl=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/internals/Mat4":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(b,a){let g=function(){function u(k,f,d=0,r,m){this.TypedArrayConstructor=
k;this.elementCount=16;k=this.TypedArrayConstructor;void 0===r&&(r=16*k.BYTES_PER_ELEMENT);const p=0===f.byteLength?0:d;this.typedBuffer=null==m?new k(f,p):new k(f,p,(m-d)/k.BYTES_PER_ELEMENT);this.typedBufferStride=r/k.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var l=u.prototype;l.sliceBuffer=function(k,f,d=this.count-f){f=this.typedBuffer.byteOffset+f*this.stride;return new k(this.buffer,
f,this.stride,f+d*this.stride)};l.getMat=function(k,f){k*=this.typedBufferStride;for(let d=0;16>d;d++)f[d]=this.typedBuffer[k++];return f};l.setMat=function(k,f){k*=this.typedBufferStride;for(let d=0;16>d;d++)this.typedBuffer[k++]=f[d]};l.get=function(k,f){return this.typedBuffer[k*this.typedBufferStride+f]};l.set=function(k,f,d){this.typedBuffer[k*this.typedBufferStride+f]=d};l.copyFrom=function(k,f,d){const r=this.typedBuffer,m=f.typedBuffer;k*=this.typedBufferStride;f=d*f.typedBufferStride;for(d=
0;16>d;++d)r[k++]=m[f++]};a._createClass(u,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return u}();g.ElementCount=16;b.BufferViewMat4Impl=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/internals/Scalar":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(b,a){let g=function(){function u(k,f,d=0,r,m){this.TypedArrayConstructor=k;this.elementCount=1;k=this.TypedArrayConstructor;
void 0===r&&(r=k.BYTES_PER_ELEMENT);const p=0===f.byteLength?0:d;this.typedBuffer=null==m?new k(f,p):new k(f,p,(m-d)/k.BYTES_PER_ELEMENT);this.typedBufferStride=r/k.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var l=u.prototype;l.sliceBuffer=function(k,f,d=this.count-f){f=this.typedBuffer.byteOffset+f*this.stride;return new k(this.buffer,f,this.stride,f+d*this.stride)};l.get=function(k){return this.typedBuffer[k*
this.typedBufferStride]};l.set=function(k,f){this.typedBuffer[k*this.typedBufferStride]=f};a._createClass(u,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return u}();g.ElementCount=1;b.BufferViewScalarImpl=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/internals/Vec2":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec2"],function(b,a,g){let u=function(){function l(f,
d,r=0,m,p){this.TypedArrayConstructor=f;this.elementCount=2;f=this.TypedArrayConstructor;void 0===m&&(m=2*f.BYTES_PER_ELEMENT);const w=0===d.byteLength?0:r;this.typedBuffer=null==p?new f(d,w):new f(d,w,(p-r)/f.BYTES_PER_ELEMENT);this.typedBufferStride=m/f.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var k=l.prototype;k.sliceBuffer=function(f,d,r=this.count-d){d=this.typedBuffer.byteOffset+
d*this.stride;return new f(this.buffer,d,this.stride,d+r*this.stride)};k.getVec=function(f,d){f*=this.typedBufferStride;return g.set(d,this.typedBuffer[f],this.typedBuffer[f+1])};k.setVec=function(f,d){f*=this.typedBufferStride;this.typedBuffer[f++]=d[0];this.typedBuffer[f]=d[1]};k.get=function(f,d){return this.typedBuffer[f*this.typedBufferStride+d]};k.set=function(f,d,r){this.typedBuffer[f*this.typedBufferStride+d]=r};k.setValues=function(f,d,r){f*=this.typedBufferStride;this.typedBuffer[f++]=d;
this.typedBuffer[f]=r};k.copyFrom=function(f,d,r){const m=this.typedBuffer,p=d.typedBuffer;f*=this.typedBufferStride;d=r*d.typedBufferStride;m[f++]=p[d++];m[f]=p[d]};a._createClass(l,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return l}();u.ElementCount=2;b.BufferViewVec2Impl=u;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/internals/Vec3":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../../../../chunks/vec3"],function(b,a,g){let u=function(){function l(f,d,r=0,m,p){this.TypedArrayConstructor=f;this.elementCount=3;f=this.TypedArrayConstructor;void 0===m&&(m=3*f.BYTES_PER_ELEMENT);const w=0===d.byteLength?0:r;this.typedBuffer=null==p?new f(d,w):new f(d,w,(p-r)/f.BYTES_PER_ELEMENT);this.typedBufferStride=m/f.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var k=
l.prototype;k.sliceBuffer=function(f,d,r=this.count-d){d=this.typedBuffer.byteOffset+d*this.stride;return new f(this.buffer,d,this.stride,d+r*this.stride)};k.getVec=function(f,d){f*=this.typedBufferStride;return g.set(d,this.typedBuffer[f],this.typedBuffer[f+1],this.typedBuffer[f+2])};k.setVec=function(f,d){f*=this.typedBufferStride;this.typedBuffer[f++]=d[0];this.typedBuffer[f++]=d[1];this.typedBuffer[f]=d[2]};k.get=function(f,d){return this.typedBuffer[f*this.typedBufferStride+d]};k.set=function(f,
d,r){this.typedBuffer[f*this.typedBufferStride+d]=r};k.setValues=function(f,d,r,m){f*=this.typedBufferStride;this.typedBuffer[f++]=d;this.typedBuffer[f++]=r;this.typedBuffer[f]=m};k.copyFrom=function(f,d,r){const m=this.typedBuffer,p=d.typedBuffer;f*=this.typedBufferStride;d=r*d.typedBufferStride;m[f++]=p[d++];m[f++]=p[d++];m[f]=p[d]};a._createClass(l,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return l}();u.ElementCount=3;b.BufferViewVec3Impl=u;Object.defineProperties(b,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/internals/Vec4":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec4"],function(b,a,g){let u=function(){function l(f,d,r=0,m,p){this.TypedArrayConstructor=f;this.elementCount=4;f=this.TypedArrayConstructor;void 0===m&&(m=4*f.BYTES_PER_ELEMENT);const w=0===d.byteLength?0:r;this.typedBuffer=null==p?new f(d,w):new f(d,w,(p-r)/f.BYTES_PER_ELEMENT);this.typedBufferStride=m/f.BYTES_PER_ELEMENT;
this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var k=l.prototype;k.sliceBuffer=function(f,d,r=this.count-d){d=this.typedBuffer.byteOffset+d*this.stride;return new f(this.buffer,d,this.stride,d+r*this.stride)};k.getVec=function(f,d){f*=this.typedBufferStride;return g.set(d,this.typedBuffer[f++],this.typedBuffer[f++],this.typedBuffer[f++],this.typedBuffer[f])};k.setVec=function(f,d){f*=this.typedBufferStride;
this.typedBuffer[f++]=d[0];this.typedBuffer[f++]=d[1];this.typedBuffer[f++]=d[2];this.typedBuffer[f]=d[3]};k.get=function(f,d){return this.typedBuffer[f*this.typedBufferStride+d]};k.set=function(f,d,r){this.typedBuffer[f*this.typedBufferStride+d]=r};k.setValues=function(f,d,r,m,p){f*=this.typedBufferStride;this.typedBuffer[f++]=d;this.typedBuffer[f++]=r;this.typedBuffer[f++]=m;this.typedBuffer[f]=p};k.copyFrom=function(f,d,r){const m=this.typedBuffer,p=d.typedBuffer;f*=this.typedBufferStride;d=r*
d.typedBufferStride;m[f++]=p[d++];m[f++]=p[d++];m[f++]=p[d++];m[f]=p[d]};a._createClass(l,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return l}();u.ElementCount=4;b.BufferViewVec4Impl=u;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/types":function(){define(["exports","../../../core/has"],function(b,a){b.elementTypeSize=function(g){switch(g){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;
case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8}};b.isInteger=function(g){switch(g){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;case "f32":case "f64":return!1}};b.isSigned=function(g){switch(g){case "u8":case "u16":case "u32":return!1;case "i8":case "i16":case "i32":case "f32":case "f64":return!0}};b.maximumValue=function(g){switch(g){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;
case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308}};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions":function(){define(["exports"],function(b){b.ShaderOutput=void 0;var a=b.ShaderOutput||(b.ShaderOutput={});a[a.Color=0]="Color";a[a.Depth=1]="Depth";a[a.Normal=2]="Normal";a[a.Shadow=3]="Shadow";a[a.Highlight=4]="Highlight";a[a.Draped=5]="Draped";a[a.Occlusion=
6]="Occlusion";a[a.Alpha=7]="Alpha";a[a.COUNT=8]="COUNT";Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/GLMaterial":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","./basicInterfaces"],function(b,a){return function(){function g(l){this._material=l.material;this._techniqueRepository=l.techniqueRep;this._output=l.output}var u=g.prototype;u.dispose=function(){this._techniqueRepository.release(this._technique)};
u.ensureTechnique=function(l,k,f=this._output){return this._technique=this._techniqueRepository.releaseAndAcquire(l,this._material.getConfiguration(f,k),this._technique)};u.ensureResources=function(l){return a.ResourceState.LOADED};b._createClass(g,[{key:"technique",get:function(){return this._technique}}]);return g}()})},"esri/views/3d/webgl-engine/lib/GLMaterials":function(){define(["exports","../../../../core/maybe","../core/shaderLibrary/ShaderOutputOptions","./basicInterfaces","./RenderPass"],
function(b,a,g,u,l){function k(d){switch(d){case l.RenderPass.MATERIAL:return g.ShaderOutput.Color;case l.RenderPass.MATERIAL_ALPHA:return g.ShaderOutput.Alpha;case l.RenderPass.MATERIAL_DEPTH:return g.ShaderOutput.Depth;case l.RenderPass.MATERIAL_NORMAL:return g.ShaderOutput.Normal;case l.RenderPass.MATERIAL_DEPTH_SHADOWMAP_ALL:return g.ShaderOutput.Shadow;case l.RenderPass.MATERIAL_HIGHLIGHT:return g.ShaderOutput.Highlight;case l.RenderPass.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT:return g.ShaderOutput.Shadow;
case l.RenderPass.MATERIAL_DEPTH_SHADOWMAP_DEFAULT:return g.ShaderOutput.Shadow}}let f=function(){function d(m,p){this._material=m;this._repository=p;this._map=new Map}var r=d.prototype;r.destroy=function(){this._map.forEach((m,p)=>{a.isSome(m)&&this._repository.release(this._material,k(p))})};r.load=function(m,p){this._map.has(p)||this._map.set(p,this._repository.acquire(this._material,k(p)));p=this._map.get(p);if(a.isSome(p)){if(p.ensureResources(m)===u.ResourceState.LOADED)return p;this._repository.requestRender()}return null};
return d}();b.GLMaterials=f;b.outputFromPass=k;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/Material":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../core/shaderModules/interfaces ./ContentObject ./ContentObjectType ./DefaultVertexAttributeLocations ../materials/internal/MaterialUtil".split(" "),function(b,a,g,u,l,k,f,d){l=function(r){function m(w,D){var G=r.call(this)||
this;G.type=k.ContentObjectType.Material;G.supportsEdges=!1;G._visible=!0;G._renderPriority=0;G._insertOrder=0;G._vertexAttributeLocations=f.Default3D;G._parameters=d.copyParameters(w,D);G.validateParameters(G._parameters);return G}a._inheritsLoose(m,r);var p=m.prototype;p.dispose=function(){};p.update=function(w){return!1};p.setParameters=function(w,D=!0){d.updateParameters(this._parameters,w)&&(this.validateParameters(this._parameters),D&&this.parametersChanged())};p.validateParameters=function(w){};
p.shouldRender=function(w){return this.isVisible()&&this.isVisibleInPass(w.pass)&&0!==(this.renderOccluded&w.renderOccludedMask)};p.isVisibleInPass=function(w){return!0};p.isVisible=function(){return this._visible};p.parametersChanged=function(){g.isSome(this.repository)&&this.repository.materialChanged(this)};a._createClass(m,[{key:"parameters",get:function(){return this._parameters}},{key:"visible",get:function(){return this._visible},set:function(w){w!==this._visible&&(this._visible=w,this.parametersChanged())}},
{key:"renderOccluded",get:function(){return this.parameters.renderOccluded}},{key:"renderPriority",get:function(){return this._renderPriority},set:function(w){w!==this._renderPriority&&(this._renderPriority=w,this.parametersChanged())}},{key:"insertOrder",get:function(){return this._insertOrder},set:function(w){w!==this._insertOrder&&(this._insertOrder=w,this.parametersChanged())}},{key:"vertexAttributeLocations",get:function(){return this._vertexAttributeLocations}}]);return m}(l.ContentObject);
b.RenderOccludedFlag=void 0;(function(r){r[r.Occlude=1]="Occlude";r[r.Transparent=2]="Transparent";r[r.OccludeAndTransparent=4]="OccludeAndTransparent";r[r.OccludeAndTransparentStencil=8]="OccludeAndTransparentStencil";r[r.Opaque=16]="Opaque"})(b.RenderOccludedFlag||(b.RenderOccludedFlag={}));u=function(r){function m(){var p=r.apply(this,arguments)||this;p.renderOccluded=b.RenderOccludedFlag.Occlude;return p}a._inheritsLoose(m,r);return m}(u.NoParameters);b.Material=l;b.MaterialParameters=u;Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/interfaces":function(){define(["exports"],function(b){function a(g,...u){let l="";for(let k=0;k<u.length;k++)l+=g[k]+u[k];return l+=g[g.length-1]}(function(g){g.int=function(u){return Math.round(u).toString()};g.float=function(u){return u.toPrecision(8)}})(a||(a={}));b.NoParameters=function(){};b.glsl=a;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations":function(){define(["exports","./VertexAttribute"],function(b,a){a=new Map([[a.VertexAttribute.POSITION,0],[a.VertexAttribute.NORMAL,1],[a.VertexAttribute.UV0,2],[a.VertexAttribute.COLOR,3],[a.VertexAttribute.SIZE,4],[a.VertexAttribute.TANGENT,4],[a.VertexAttribute.AUXPOS1,5],[a.VertexAttribute.SYMBOLCOLOR,5],[a.VertexAttribute.AUXPOS2,6],[a.VertexAttribute.FEATUREATTRIBUTE,6],[a.VertexAttribute.INSTANCEFEATUREATTRIBUTE,6],[a.VertexAttribute.INSTANCECOLOR,
7],[a.VertexAttribute.MODEL,8],[a.VertexAttribute.MODELNORMAL,12],[a.VertexAttribute.MODELORIGINHI,11],[a.VertexAttribute.MODELORIGINLO,15]]);b.Default3D=a;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/materials/internal/MaterialUtil":function(){define("exports ../../../../../core/arrayUtils ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/aaBoundingBox ../../lib/basicInterfaces ../../lib/screenSizePerspectiveUtils ../../lib/Util ../../lib/VertexAttribute ../renderers/utils".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p,w){function D(C,I,e,B,M,Q){if(!u.isNone(C)){var U=t(I,e,c);f.setMin(J,C.getBBMin());f.setMax(J,C.getBBMax());u.isSome(M)&&M.applyToAabb(J);if(z(J,I,U,B)){const {primitiveIndices:P,indices:W,position:R}=C;U=P?P.length:W.length/3;if(1E3<U&&(C=C.getChildren(),void 0!==C)){for(U=0;8>U;++U)void 0!==C[U]&&D(C[U],I,e,B,M,Q);return}G(I,e,0,U,W,R,P,M,Q)}}}function G(C,I,e,B,M,Q,U,P,W){if(U){var R=Q.data;Q=Q.stride||Q.size;var T=C[0],N=C[1];C=C[2];var L=I[0]-T,K=I[1]-N;for(I=
I[2]-C;e<B;++e){var y=U[e],n=3*y,A=Q*M[n++],O=R[A++],S=R[A++],Y=R[A];A=Q*M[n++];var ba=R[A++],aa=R[A++],ea=R[A];A=Q*M[n];n=R[A++];var na=R[A++];A=R[A];u.isSome(P)&&([O,S,Y]=P.applyToVertex(O,S,Y,e),[ba,aa,ea]=P.applyToVertex(ba,aa,ea,e),[n,na,A]=P.applyToVertex(n,na,A,e));ba-=O;aa-=S;ea-=Y;n-=O;na-=S;A-=Y;var pa=K*A-na*I,la=I*n-A*L;const wa=L*na-n*K;var qa=ba*pa+aa*la+ea*wa;if(!(Math.abs(qa)<=Number.EPSILON)){O=T-O;S=N-S;Y=C-Y;pa=O*pa+S*la+Y*wa;if(0<qa){if(0>pa||pa>qa)continue}else if(0<pa||pa<qa)continue;
la=S*ea-aa*Y;Y=Y*ba-ea*O;S=O*aa-ba*S;O=L*la+K*Y+I*S;if(0<qa){if(0>O||pa+O>qa)continue}else if(0<O||pa+O<qa)continue;Y=(n*la+na*Y+A*S)/qa;0<=Y&&(ba=x(ba,aa,ea,n,na,A,h),W(Y,ba,y,!1))}}}else{U=Q.data;R=Q.stride||Q.size;Q=C[0];T=C[1];N=C[2];C=I[0]-Q;L=I[1]-T;K=I[2]-N;for(let wa=e,Ca=3*e;wa<B;++wa)if(n=R*M[Ca++],S=U[n++],Y=U[n++],ea=U[n],n=R*M[Ca++],I=U[n++],e=U[n++],y=U[n],n=R*M[Ca++],ba=U[n++],aa=U[n++],n=U[n],u.isSome(P)&&([S,Y,ea]=P.applyToVertex(S,Y,ea,wa),[I,e,y]=P.applyToVertex(I,e,y,wa),[ba,aa,
n]=P.applyToVertex(ba,aa,n,wa)),I-=S,e-=Y,y-=ea,ba-=S,aa-=Y,n-=ea,A=L*n-aa*K,O=K*ba-n*C,qa=C*aa-ba*L,na=I*A+e*O+y*qa,!(Math.abs(na)<=Number.EPSILON)){S=Q-S;Y=T-Y;ea=N-ea;A=S*A+Y*O+ea*qa;if(0<na){if(0>A||A>na)continue}else if(0<A||A<na)continue;O=Y*y-e*ea;ea=ea*I-y*S;Y=S*e-I*Y;S=C*O+L*ea+K*Y;if(0<na){if(0>S||A+S>na)continue}else if(0<S||A+S<na)continue;ea=(ba*O+aa*ea+n*Y)/na;0<=ea&&(I=x(I,e,y,ba,aa,n,h),W(ea,I,wa,!1))}}}function x(C,I,e,B,M,Q,U){l.set(q,C,I,e);l.set(E,B,M,Q);l.cross(U,q,E);l.normalize(U,
U);return U}function t(C,I,e){return l.set(e,1/(I[0]-C[0]),1/(I[1]-C[1]),1/(I[2]-C[2]))}function z(C,I,e,B){return H(C,I,e,B,Infinity)}function H(C,I,e,B,M){var Q=(C[0]-B-I[0])*e[0],U=(C[3]+B-I[0])*e[0];let P=Math.min(Q,U);Q=Math.max(Q,U);U=(C[1]-B-I[1])*e[1];const W=(C[4]+B-I[1])*e[1];Q=Math.min(Q,Math.max(U,W));if(0>Q)return!1;P=Math.max(P,Math.min(U,W));if(P>Q)return!1;U=(C[2]-B-I[2])*e[2];C=(C[5]+B-I[2])*e[2];Q=Math.min(Q,Math.max(U,C));if(0>Q)return!1;P=Math.max(P,Math.min(U,C));return P>Q?!1:
P<M}function v(C,I){I=I?v(I):{};for(const e in C){let B=C[e];B&&B.forEach&&(B=F(B));null==B&&e in I||(I[e]=B)}return I}function F(C){const I=[];C.forEach(e=>I.push(e));return I}const J=f.create(),c=k.create(),h=k.create(),q=k.create(),E=k.create();b.colorMixModes={multiply:1,ignore:2,replace:3,tint:4};b.computeInvDir=t;b.computeNormal=x;b.copyParameters=v;b.intersectAabbInvDir=z;b.intersectAabbInvDirBefore=H;b.intersectDrapedRenderLineGeometry=function(C,I,e,B,M,Q){if(I.options.selectionMode){I=C.vertexAttributes.get(p.VertexAttribute.POSITION).data;
var U=C.vertexAttributes.get(p.VertexAttribute.SIZE),P=B[0];B=B[1];C=(((U&&U.data[0])+M)/2+4)*C.screenToWorldRatio;M=Number.MAX_VALUE;U=0;for(let L=0;L<I.length-5;L+=3){var W=I[L],R=I[L+1],T=P-W,N=B-R;W=I[L+3]-W;R=I[L+4]-R;const K=g.clamp((W*T+R*N)/(W*W+R*R),0,1);T=W*K-T;N=R*K-N;N=T*T+N*N;N<M&&(M=N,U=L/3)}M<C*C&&Q(e.dist,e.normal,U,!1)}};b.intersectTriangleGeometry=function(C,I,e,B,M,Q,U){w.isInstanceHidden(I)||(C.boundingInfo?(m.assert(C.primitiveType===d.PrimitiveType.Triangle),D(C.boundingInfo,
B,M,e.tolerance,Q,U)):(I=C.indices.get(p.VertexAttribute.POSITION),C=C.vertexAttributes.get(p.VertexAttribute.POSITION),G(B,M,0,I.length/3,I,C,void 0,Q,U)))};b.intersectTriangles=G;b.updateParameters=function(C,I){let e=!1;for(const B in I){const M=I[B];void 0!==M&&(Array.isArray(M)?null===C[B]?(C[B]=M.slice(),e=!0):a.update(C[B],M)&&(e=!0):C[B]!==M&&(e=!0,C[B]=M))}return e};b.verticalOffsetAtDistance=function(C,I,e,B,M){let Q=(e.screenLength||0)*C.pixelRatio;u.isSome(M)&&(Q=r.scale(Q,B,I,M));return g.clamp(Q*
Math.tan(.5*C.fovY)/(.5*C.fullHeight)*I,e.minWorldLength||0,null!=e.maxWorldLength?e.maxWorldLength:Infinity)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/screenSizePerspectiveUtils":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/mathUtils","../../../ViewingMode"],function(b,a,g,u){function l(G,x,t){const z=t.parameters;t=t.paddingPixelsOverride;w.scale=Math.min(z.divisor/
(x-z.offset),1);w.factor=Math.abs(G*G*G);w.minPixelSize=z.minPixelSize;w.paddingPixels=t;return w}function k(G,x){return 0===G?x.minPixelSize:x.minPixelSize*(1+2*x.paddingPixels/G)}function f(G,x){return Math.max(g.lerp(G*x.scale,G,x.factor),k(G,x))}let d=function(){function G(t,z,H,v={camera:{distance:0,fovY:0},divisor:0,offset:0,minPixelSize:0,paddingPixels:0},F){this.viewingMode=t;this.description=z;this.ellipsoidRadius=H;this.parameters=v;this._paddingPixelsOverride=F;this.viewingMode===u.ViewingMode.Local?
(this.coverageCompensation=this._surfaceCoverageCompensationLocal,this.calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersLocal):(this.coverageCompensation=this._surfaceCoverageCompensationGlobal,this.calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersGlobal)}var x=G.prototype;x.update=function(t){if(this.parameters&&this.parameters.camera.fovY===t.fovY&&this.parameters.camera.distance===t.distance)return!1;this._calculateParameters(t,this.ellipsoidRadius,
this.parameters);return!0};x.overridePadding=function(t){return t!==this.paddingPixelsOverride?new G(this.viewingMode,this.description,this.ellipsoidRadius,this.parameters,t):this};x._calculateParameters=function(t,z,H){const {scaleStart:v,scaleFallOffRange:F,minPixelSize:J}=this.description,{fovY:c,distance:h}=t;var q=this.calculateCurvatureDependentParameters(t,z);z=this.coverageCompensation(t,z,q);const {tiltAngle:E,scaleFallOffFactor:C}=q,I=Math.sin(E)*h,e=.5*Math.PI-E-c*(.5-v*z);q=I/Math.cos(e);
z=(q-I/Math.cos(e+c*F*z)*C)/(1-C);H.camera.fovY=t.fovY;H.camera.distance=t.distance;H.offset=z;H.divisor=q-z;H.minPixelSize=J;return H};x._calculateCurvatureDependentParametersLocal=function(t,z,H=D){H.tiltAngle=this.description.curvatureDependent.min.tiltAngle;H.scaleFallOffFactor=this.description.curvatureDependent.min.scaleFallOffFactor;return H};x._calculateCurvatureDependentParametersGlobal=function(t,z,H=D){const v=this.description.curvatureDependent;t=1+t.distance/z;t=Math.sqrt(t*t-1);const [F,
J]=[v.min.curvature,v.max.curvature];t=g.clamp((t-F)/(J-F),0,1);const [c,h]=[v.min,v.max];H.tiltAngle=g.lerp(c.tiltAngle,h.tiltAngle,t);H.scaleFallOffFactor=g.lerp(c.scaleFallOffFactor,h.scaleFallOffFactor,t);return H};x._surfaceCoverageCompensationLocal=function(t,z,H){return(t.fovY-H.tiltAngle)/t.fovY};x._surfaceCoverageCompensationGlobal=function(t,z,H){const v=z*z;H=H.tiltAngle+.5*Math.PI;const {fovY:F,distance:J}=t;t=J*J+v-2*Math.cos(H)*J*z;const c=Math.sqrt(t);return(Math.acos(Math.sqrt(t-v)/
c)-Math.asin(z/(c/Math.sin(H)))+.5*F)/F};a._createClass(G,[{key:"paddingPixelsOverride",get:function(){return this._paddingPixelsOverride||this.parameters.paddingPixels}}]);return G}();const r={curvatureDependent:{min:{curvature:g.deg2rad(10),tiltAngle:g.deg2rad(12),scaleFallOffFactor:.5},max:{curvature:g.deg2rad(70),tiltAngle:g.deg2rad(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0};var m=.7,p=.95;const w={scale:0,factor:0,minPixelSize:0,paddingPixels:0},D={tiltAngle:0,
scaleFallOffFactor:0};b.applyPrecomputedScaleFactor=function(G,x,t=[0,0]){x=Math.min(Math.max(x.scale,k(G[1],x)/Math.max(1E-5,G[1])),1);t[0]=G[0]*x;t[1]=G[1]*x;return t};b.applyScaleFactor=f;b.getLabelSettings=function(G,x){const {curvatureDependent:t,scaleStart:z,scaleFallOffRange:H}=r;return new d(G,{curvatureDependent:{min:{curvature:t.min.curvature,tiltAngle:t.min.tiltAngle,scaleFallOffFactor:m},max:{curvature:t.max.curvature,tiltAngle:t.max.tiltAngle,scaleFallOffFactor:p}},scaleStart:z,scaleFallOffRange:H,
minPixelSize:14},x)};b.getSettings=function(G,x){return new d(G,r,x)};b.precomputeScaleFactor=function(G,x,t,z){G=l(G,x,t);G.minPixelSize=0;G.paddingPixels=0;G=f(1,G);z.scale=G;z.factor=0;z.minPixelSize=t.parameters.minPixelSize;z.paddingPixels=t.paddingPixelsOverride};b.scale=function(G,x,t,z){return f(G,l(x,t,z))};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/materials/VisualVariablePassParameters":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/mat3f64","../../../../chunks/vec3f64","../lib/Material"],function(b,a,g,u,l){l=function(k){function f(){var d=k.apply(this,arguments)||this;d.vvSizeEnabled=!1;d.vvSizeMinSize=u.fromValues(1,1,1);d.vvSizeMaxSize=u.fromValues(100,100,100);d.vvSizeOffset=u.fromValues(0,0,0);d.vvSizeFactor=u.fromValues(1,1,1);d.vvSizeValue=u.fromValues(1,1,1);d.vvColorEnabled=!1;d.vvColorValues=[0,0,0,0,0,0,0,0];d.vvColorColors=[1,0,0,0,1,0,0,0,1,0,0,
0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0];d.vvOpacityEnabled=!1;d.vvOpacityValues=[0,0,0,0,0,0,0,0];d.vvOpacityOpacities=[1,1,1,1,1,1,1,1];d.vvSymbolAnchor=[0,0,0];d.vvSymbolRotationMatrix=g.create();return d}a._inheritsLoose(f,k);return f}(l.MaterialParameters);b.VisualVariablePassParameters=l;b.vvColorNumber=8;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/RibbonLine.glsl":function(){define("exports ../core/maybe ../views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl ../views/3d/webgl-engine/core/shaderModules/Float2PassUniform ../views/3d/webgl-engine/core/shaderModules/Float4PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/lib/basicInterfaces ../views/3d/webgl-engine/lib/VertexAttribute ../views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p,w,D,G,x,t,z,H,v,F,J){function c(q){const E=new H.ShaderBuilder,C=q.hasMultipassTerrain&&(q.output===g.ShaderOutput.Color||q.output===g.ShaderOutput.Alpha);E.include(r.PiUtils);E.include(l.RibbonVertexPosition,q);E.include(f.LineStipple,q);q.output===g.ShaderOutput.Depth&&E.include(k.OutputDepth,q);w.addProjViewLocalOrigin(E,q);const {vertex:I,fragment:e}=E;I.uniforms.add([new z.Matrix4PassUniform("inverseProjectionMatrix",(R,T)=>T.camera.inverseProjectionMatrix),new D.Float2PassUniform("nearFar",
(R,T)=>T.camera.nearFar),new x.FloatPassUniform("miterLimit",R=>"miter"!==R.join?0:R.miterLimit),new G.Float4PassUniform("viewport",(R,T)=>T.camera.fullViewport)]);I.constants.add("LARGE_HALF_FLOAT","float",65500);E.attributes.add(F.VertexAttribute.POSITION,"vec3");E.attributes.add(F.VertexAttribute.SUBDIVISIONFACTOR,"float");E.attributes.add(F.VertexAttribute.UV0,"vec2");E.attributes.add(F.VertexAttribute.AUXPOS1,"vec3");E.attributes.add(F.VertexAttribute.AUXPOS2,"vec3");E.varyings.add("vColor",
"vec4");E.varyings.add("vpos","vec3");E.varyings.add("linearDepth","float");C&&E.varyings.add("depth","float");const B=q.capType===J.CapType.ROUND,M=q.stippleEnabled&&q.stippleScaleWithLineWidth||B;M&&E.varyings.add("vLineWidth","float");const Q=q.stippleEnabled&&q.stippleScaleWithLineWidth;Q&&E.varyings.add("vLineSizeInv","float");const U=q.innerColorEnabled||B;U&&E.varyings.add("vLineDistance","float");const P=q.stippleEnabled&&B,W=q.falloffEnabled||P;W&&E.varyings.add("vLineDistanceNorm","float");
B&&(E.varyings.add("vSegmentSDF","float"),E.varyings.add("vReverseSegmentSDF","float"));I.code.add(t.glsl`#define PERPENDICULAR(v) vec2(v.y, -v.x);
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}
vec2 rotate(vec2 v, float a) {
float s = sin(a);
float c = cos(a);
mat2 m = mat2(c, -s, s, c);
return m * v;
}`);I.code.add(t.glsl`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= viewport.zw / posNdc.w;
return posNdc;
}`);I.code.add(t.glsl`
    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
      float vnp = nearFar[0] * 0.99;

      if(pos.z > -nearFar[0]) {
        //current pos behind ncp --> we need to clip
        if (!isStartVertex) {
          if(prev.z < -nearFar[0]) {
            //previous in front of ncp
            pos = mix(prev, pos, interp(vnp, prev, pos));
            next = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        } else {
          if(next.z < -nearFar[0]) {
            //next in front of ncp
            pos = mix(pos, next, interp(vnp, pos, next));
            prev = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
      } else {
        //current position visible
        if (prev.z > -nearFar[0]) {
          //previous behind ncp
          prev = mix(pos, prev, interp(vnp, pos, prev));
        }
        if (next.z > -nearFar[0]) {
          //next behind ncp
          next = mix(next, pos, interp(vnp, next, pos));
        }
      }

      ${C?"depth \x3d pos.z;":""}
      linearDepth = (-pos.z - nearFar[0]) / (nearFar[1] - nearFar[0]);

      pos = projectAndScale(pos);
      next = projectAndScale(next);
      prev = projectAndScale(prev);
    }
  `);I.uniforms.add(new x.FloatPassUniform("pixelRatio",(R,T)=>T.camera.pixelRatio));I.code.add(t.glsl`
  void main(void) {
    // unpack values from uv0.y
    bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;

    float coverage = 1.0;

    // Check for special value of uv0.y which is used by the Renderer when graphics
    // are removed before the VBO is recompacted. If this is the case, then we just
    // project outside of clip space.
    if (uv0.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isJoin = abs(uv0.y) < 3.0;

      float lineSize = getSize();
      float lineWidth = lineSize * pixelRatio;

      ${M?t.glsl`vLineWidth = lineWidth;`:""}
      ${Q?t.glsl`vLineSizeInv = 1.0 / lineSize;`:""}

      // convert sub-pixel coverage to alpha
      if (lineWidth < 1.0) {
        coverage = lineWidth;
        lineWidth = 1.0;
      }else{
        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if
        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly
        // so we only really care to round anything larger than 1.
        lineWidth = floor(lineWidth + 0.5);
      }

      vec4 pos  = view * vec4(position.xyz, 1.0);
      vec4 prev = view * vec4(auxpos1.xyz, 1.0);
      vec4 next = view * vec4(auxpos2.xyz, 1.0);

      clipAndTransform(pos, prev, next, isStartVertex);

      vec2 left = (pos.xy - prev.xy);
      vec2 right = (next.xy - pos.xy);

      float leftLen = length(left);
      float rightLen = length(right);
  `);(q.stippleEnabled||B)&&I.code.add(t.glsl`
      float isEndVertex = float(!isStartVertex);
      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);
      vec2 segment = mix(right, left, isEndVertex);
      ${B?t.glsl`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:""}
    `);I.code.add(t.glsl`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);
vec2 capDisplacementDir = vec2(0, 0);
vec2 joinDisplacementDir = vec2(0, 0);
float displacementLen = lineWidth;
if (isJoin) {
bool isOutside = (left.x * right.y - left.y * right.x) * uv0.y > 0.0;
joinDisplacementDir = normalize(left + right);
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
if (leftLen > 0.001 && rightLen > 0.001) {
float nDotSeg = dot(joinDisplacementDir, left);
displacementLen /= length(nDotSeg * left - joinDisplacementDir);
if (!isOutside) {
displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
}
}
if (isOutside && (displacementLen > miterLimit * lineWidth)) {`);q.roundJoins?I.code.add(t.glsl`
        vec2 startDir = leftLen < 0.001 ? right : left;
        startDir = PERPENDICULAR(startDir);

        vec2 endDir = rightLen < 0.001 ? left : right;
        endDir = PERPENDICULAR(endDir);

        float factor = ${q.stippleEnabled?t.glsl`min(1.0, subdivisionFactor * ${t.glsl.float(1.5)})`:t.glsl`subdivisionFactor`};

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * factor * rotationAngle);
      `):I.code.add(t.glsl`if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;
}
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);`);I.code.add(t.glsl`
        displacementLen = lineWidth;
      }
    } else {
      // CAP handling ---------------------------------------------------
      joinDisplacementDir = isStartVertex ? right : left;
      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);

      ${q.capType!==J.CapType.BUTT?t.glsl`capDisplacementDir = isStartVertex ? -right : left;`:""}
    }
  `);I.code.add(t.glsl`
    // Displacement (in pixels) caused by join/or cap
    vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;

    ${W||U?t.glsl`float lineDistNorm = sign(uv0.y) * pos.w;`:""}

    ${U?t.glsl`vLineDistance = lineWidth * lineDistNorm;`:""}
    ${W?t.glsl`vLineDistanceNorm = lineDistNorm;`:""}

    pos.xy += dpos;
  `);B&&I.code.add(t.glsl`vec2 segmentDir = normalize(segment);
vSegmentSDF = (isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir) * pos.w) ;
vReverseSegmentSDF = (isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir) * pos.w);`);q.stippleEnabled&&(q.draped?I.uniforms.add(new x.FloatPassUniform("worldToScreenRatio",(R,T)=>1/T.screenToPCSRatio)):I.code.add(t.glsl`vec3 segmentCenter = mix((auxpos2 + position) * 0.5, (position + auxpos1) * 0.5, isEndVertex);
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),I.code.add(t.glsl`float segmentLengthScreenDouble = length(segment);
float segmentLengthScreen = segmentLengthScreenDouble * 0.5;
float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);
float segmentLengthRender = length(mix(auxpos2 - position, position - auxpos1, isEndVertex));
vStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),q.draped?I.code.add(t.glsl`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;
float startPseudoScreen = uv0.x * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`):I.code.add(t.glsl`float startPseudoScreen = mix(uv0.x, uv0.x - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),I.code.add(t.glsl`
      float patternLength = ${q.stippleScaleWithLineWidth?"lineSize * ":""} stipplePatternPixelSize;

      // Compute the coordinates at both start and end of the line segment, because we need both to clamp to in the fragment shader
      vStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);

      vStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);

      // Adjust the coordinate to the displaced position (the pattern is shortened/overextended on the in/outside of joins)
      if (segmentLengthScreenDouble >= 0.001) {
        // Project the actual vertex position onto the line segment. Note that the resulting factor is within [0..1] at the
        // original vertex positions, and slightly outside of that range at the displaced positions
        vec2 stippleDisplacement = pos.xy - segmentOrigin;
        float stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);

        // Apply this offset to the actual vertex coordinate (can be screen or pseudo-screen space)
        vStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);
      }

      // Cancel out perspective correct interpolation because we want this length the really represent the screen distance
      vStippleDistanceLimits *= pos.w;
      vStippleDistance *= pos.w;

      // Disable stipple distance limits on caps
      vStippleDistanceLimits = isJoin ?
                                 vStippleDistanceLimits :
                                 isStartVertex ?
                                  vec2(-1e038, vStippleDistanceLimits.y) :
                                  vec2(vStippleDistanceLimits.x, 1e038);
    `));I.code.add(t.glsl`
      // Convert back into NDC
      pos.xy = (pos.xy / viewport.zw) * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      ${q.wireframe&&!q.draped?"pos.z -\x3d 0.001 * pos.w;":""}

      // transform final position to camera space for slicing
      vpos = (inverseProjectionMatrix * pos).xyz;
      gl_Position = pos;
    }
  }
  `);C&&E.include(d.multipassTerrainTest,q);E.include(u.SliceDraw,q);e.include(p.ColorConversion);e.code.add(t.glsl`
  void main() {
    discardBySlice(vpos);
    ${C?"terrainDepthTest(gl_FragCoord, depth);":""}
  `);q.wireframe?e.code.add(t.glsl`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(B&&e.code.add(t.glsl`
      float sdf = min(vSegmentSDF, vReverseSegmentSDF);
      vec2 fragmentPosition = vec2(
        min(sdf, 0.0),
        vLineDistance
      ) * gl_FragCoord.w;

      float fragmentRadius = length(fragmentPosition);
      float fragmentCapSDF = (fragmentRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);

      if (capCoverage < ${t.glsl.float(m.symbolAlphaCutoff)}) {
        discard;
      }
    `),P?e.code.add(t.glsl`
      vec2 stipplePosition = vec2(
        min(getStippleSDF() * 2.0 - 1.0, 0.0),
        vLineDistanceNorm * gl_FragCoord.w
      );
      float stippleRadius = length(stipplePosition * vLineWidth);
      float stippleCapSDF = (stippleRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);
      float stippleAlpha = step(${t.glsl.float(m.symbolAlphaCutoff)}, stippleCoverage);
      `):e.code.add(t.glsl`float stippleAlpha = getStippleAlpha();`),e.uniforms.add(new G.Float4PassUniform("intrinsicColor",R=>R.color)),e.code.add(t.glsl`discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);
vec4 color = intrinsicColor * vColor;`),q.innerColorEnabled&&(e.uniforms.add(new G.Float4PassUniform("innerColor",R=>a.unwrapOr(R.innerColor,R.color))),e.uniforms.add(new x.FloatPassUniform("innerWidth",(R,T)=>R.innerWidth*T.camera.pixelRatio)),e.code.add(t.glsl`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`)),e.code.add(t.glsl`vec4 finalColor = blendStipple(color, stippleAlpha);`),q.falloffEnabled&&(e.uniforms.add(new x.FloatPassUniform("falloff",R=>R.falloff)),e.code.add(t.glsl`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`)));e.code.add(t.glsl`
    if (finalColor.a < ${t.glsl.float(m.symbolAlphaCutoff)}) {
      discard;
    }

    ${q.output===g.ShaderOutput.Alpha?t.glsl`gl_FragColor = vec4(finalColor.a);`:""}
    ${q.output===g.ShaderOutput.Color?t.glsl`gl_FragColor = highlightSlice(finalColor, vpos);`:""}
    ${q.output===g.ShaderOutput.Color&&q.transparencyPassType===v.TransparencyPassType.Color?"gl_FragColor \x3d premultiplyAlpha(gl_FragColor);":""}
    ${q.output===g.ShaderOutput.Highlight?t.glsl`gl_FragColor = vec4(1.0);`:""}
    ${q.output===g.ShaderOutput.Depth?t.glsl`outputDepth(linearDepth);`:""}
  }
  `);return E}const h=Object.freeze(Object.defineProperty({__proto__:null,NUM_ROUND_JOIN_SUBDIVISIONS:1,build:c},Symbol.toStringTag,{value:"Module"}));b.NUM_ROUND_JOIN_SUBDIVISIONS=1;b.RibbonLine=h;b.build=c})},"esri/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../shaderModules/Float3DrawUniform ../shaderModules/Float3PassUniform ../shaderModules/interfaces".split(" "),
function(b,a,g,u,l,k,f,d,r,m){function p(c,h,q){if(h.hasSlicePlane){c.extensions.add("GL_OES_standard_derivatives");h.hasSliceInVertexProgram&&c.vertex.uniforms.add(q);c.fragment.uniforms.add(q);q=m.glsl`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
#define rejectBySlice(_pos_) sliceByPlane(_pos_)
#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`;var E=m.glsl`vec4 applySliceHighlight(vec4 color, vec3 pos) {
SliceFactors factors = calculateSliceFactors(pos);
const float HIGHLIGHT_WIDTH = 1.0;
const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);
factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);
if (sliceByFactors(factors)) {
return color;
}
float highlightFactor = (1.0 - step(0.5, factors.front))
* (1.0 - step(0.5, factors.side0))
* (1.0 - step(0.5, factors.side1))
* (1.0 - step(0.5, factors.side2))
* (1.0 - step(0.5, factors.side3));
return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
}`;E=h.hasSliceHighlight?m.glsl`
        ${E}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `:m.glsl`#define highlightSlice(_color_, _pos_) (_color_)`;h.hasSliceInVertexProgram&&c.vertex.code.add(q);c.fragment.code.add(q);c.fragment.code.add(E)}else q=m.glsl`#define rejectBySlice(_pos_) false
#define discardBySlice(_pos_) {}
#define highlightSlice(_color_, _pos_) (_color_)`,h.hasSliceInVertexProgram&&c.vertex.code.add(q),c.fragment.code.add(q)}function w(c,h,q){return c.instancedDoublePrecision?k.set(H,q.camera.viewInverseTransposeMatrix[3],q.camera.viewInverseTransposeMatrix[7],q.camera.viewInverseTransposeMatrix[11]):h.slicePlaneLocalOrigin}function D(c,h){return g.isSome(c)?k.subtract(v,h.origin,c):h.origin}function G(c,h,q){return c.hasSliceTranslatedView?g.isSome(h)?u.translate(J,q.camera.viewMatrix,h):q.camera.viewMatrix:
null}function x(c,h,q){if(g.isNone(q.slicePlane))return f.ZEROS;const E=w(c,h,q);h=D(E,q.slicePlane);c=G(c,E,q);return g.isSome(c)?k.transformMat4(v,h,c):h}function t(c,h,q,E){if(g.isNone(E)||g.isNone(q.slicePlane))return f.ZEROS;const C=w(c,h,q);h=D(C,q.slicePlane);c=G(c,C,q);return g.isSome(c)?(k.add(F,E,h),k.transformMat4(v,h,c),k.transformMat4(F,F,c),k.subtract(F,F,v)):E}let z=function(c){function h(q){var E=c.call(this)||this;E.slicePlaneLocalOrigin=q;return E}a._inheritsLoose(h,c);return h}(m.NoParameters);
const H=f.create(),v=f.create(),F=f.create(),J=l.create();b.SliceDraw=function(c,h){p(c,h,[new d.Float3DrawUniform("slicePlaneOrigin",(q,E)=>x(h,q,E)),new d.Float3DrawUniform("slicePlaneBasis1",(q,E)=>{var C;return t(h,q,E,null==(C=g.unwrap(E.slicePlane))?void 0:C.basis1)}),new d.Float3DrawUniform("slicePlaneBasis2",(q,E)=>{var C;return t(h,q,E,null==(C=g.unwrap(E.slicePlane))?void 0:C.basis2)})])};b.SlicePass=function(c,h){p(c,h,[new r.Float3PassUniform("slicePlaneOrigin",(q,E)=>x(h,q,E)),new r.Float3PassUniform("slicePlaneBasis1",
(q,E)=>{var C;return t(h,q,E,null==(C=g.unwrap(E.slicePlane))?void 0:C.basis1)}),new r.Float3PassUniform("slicePlaneBasis2",(q,E)=>{var C;return t(h,q,E,null==(C=g.unwrap(E.slicePlane))?void 0:C.basis2)})])};b.SlicePlaneParameters=z;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/Float3DrawUniform":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Uniform","../shaderTechnique/BindType"],
function(b,a,g,u){g=function(l){function k(f,d){return l.call(this,f,"vec3",u.BindType.Draw,(r,m,p)=>r.setUniform3fv(f,d(m,p)))||this}a._inheritsLoose(k,l);return k}(g.Uniform);b.Float3DrawUniform=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/Uniform":function(){define(["exports","../../../../../core/maybe","../shaderTechnique/BindType"],function(b,a,g){let u=function(){function l(k,f,d,r,m=null){this.name=
k;this.type=f;this.arraySize=m;this.bind={[g.BindType.Pass]:null,[g.BindType.Draw]:null};a.isSome(d)&&a.isSome(r)&&(this.bind[d]=r)}l.prototype.equals=function(k){return this.type===k.type&&this.name===k.name&&this.arraySize===k.arraySize};return l}();b.Uniform=u;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderTechnique/BindType":function(){define(["exports"],function(b){b.BindType=void 0;var a=b.BindType||(b.BindType=
{});a[a.Pass=0]="Pass";a[a.Draw=1]="Draw";Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/Float3PassUniform":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Uniform","../shaderTechnique/BindType"],function(b,a,g,u){g=function(l){function k(f,d){return l.call(this,f,"vec3",u.BindType.Pass,(r,m,p)=>r.setUniform3fv(f,d(m,p)))||this}a._inheritsLoose(k,l);return k}(g.Uniform);b.Float3PassUniform=
g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl":function(){define("exports ../../shaderModules/Float3PassUniform ../../shaderModules/Float4sPassUniform ../../shaderModules/FloatPassUniform ../../shaderModules/FloatsPassUniform ../../shaderModules/interfaces ../../../lib/VertexAttribute ../../../materials/VisualVariablePassParameters".split(" "),function(b,a,g,u,l,k,f,
d){b.RibbonVertexPosition=function(r,m){const p=r.vertex;p.uniforms.add(new u.FloatPassUniform("intrinsicWidth",w=>w.width));m.vvSize?(r.attributes.add(f.VertexAttribute.SIZEFEATUREATTRIBUTE,"float"),p.uniforms.add(new a.Float3PassUniform("vvSizeMinSize",w=>w.vvSizeMinSize)),p.uniforms.add(new a.Float3PassUniform("vvSizeMaxSize",w=>w.vvSizeMaxSize)),p.uniforms.add(new a.Float3PassUniform("vvSizeOffset",w=>w.vvSizeOffset)),p.uniforms.add(new a.Float3PassUniform("vvSizeFactor",w=>w.vvSizeFactor)),p.code.add(k.glsl`float getSize() {
return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
}`)):(r.attributes.add(f.VertexAttribute.SIZE,"float"),p.code.add(k.glsl`float getSize(){
return intrinsicWidth * size;
}`));m.vvOpacity?(r.attributes.add(f.VertexAttribute.OPACITYFEATUREATTRIBUTE,"float"),p.constants.add("vvOpacityNumber","int",8),p.uniforms.add([new l.FloatsPassUniform("vvOpacityValues",w=>w.vvOpacityValues,8),new l.FloatsPassUniform("vvOpacityOpacities",w=>w.vvOpacityOpacities,8)]),p.code.add(k.glsl`float interpolateOpacity( float value ){
if (value <= vvOpacityValues[0]) {
return vvOpacityOpacities[0];
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
}
}
return vvOpacityOpacities[vvOpacityNumber - 1];
}
vec4 applyOpacity( vec4 color ){
return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
}`)):p.code.add(k.glsl`vec4 applyOpacity( vec4 color ){
return color;
}`);m.vvColor?(r.attributes.add(f.VertexAttribute.COLORFEATUREATTRIBUTE,"float"),p.constants.add("vvColorNumber","int",d.vvColorNumber),p.uniforms.add(new l.FloatsPassUniform("vvColorValues",w=>w.vvColorValues,d.vvColorNumber)),p.uniforms.add(new g.Float4sPassUniform("vvColorColors",w=>w.vvColorColors,d.vvColorNumber)),p.code.add(k.glsl`vec4 interpolateColor( float value ) {
if (value <= vvColorValues[0]) {
return vvColorColors[0];
}
for (int i = 1; i < vvColorNumber; ++i) {
if (vvColorValues[i] >= value) {
float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
return mix(vvColorColors[i-1], vvColorColors[i], f);
}
}
return vvColorColors[vvColorNumber - 1];
}
vec4 getColor(){
return applyOpacity(interpolateColor(colorFeatureAttribute));
}`)):(r.attributes.add(f.VertexAttribute.COLOR,"vec4"),p.code.add(k.glsl`vec4 getColor(){
return applyOpacity(color);
}`))};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/Float4sPassUniform":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Uniform","../shaderTechnique/BindType"],function(b,a,g,u){g=function(l){function k(f,d,r){return l.call(this,f,"vec4",u.BindType.Pass,(m,p,w)=>m.setUniform4fv(f,d(p,w)),r)||this}a._inheritsLoose(k,l);return k}(g.Uniform);b.Float4sPassUniform=g;Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/FloatPassUniform":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Uniform","../shaderTechnique/BindType"],function(b,a,g,u){g=function(l){function k(f,d){return l.call(this,f,"float",u.BindType.Pass,(r,m,p)=>r.setUniform1f(f,d(m,p)))||this}a._inheritsLoose(k,l);return k}(g.Uniform);b.FloatPassUniform=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/3d/webgl-engine/core/shaderModules/FloatsPassUniform":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Uniform","../shaderTechnique/BindType"],function(b,a,g,u){g=function(l){function k(f,d,r){return l.call(this,f,"float",u.BindType.Pass,(m,p,w)=>m.setUniform1fv(f,d(p,w)),r)||this}a._inheritsLoose(k,l);return k}(g.Uniform);b.FloatsPassUniform=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl":function(){define(["exports",
"../ShaderOutputOptions","../util/RgbaFloatEncoding.glsl","../../shaderModules/interfaces"],function(b,a,g,u){b.OutputDepth=function(l,k){l.fragment.include(g.RgbaFloatEncoding);k.output===a.ShaderOutput.Shadow?(l.extensions.add("GL_OES_standard_derivatives"),l.fragment.code.add(u.glsl`float _calculateFragDepth(const in float depth) {
const float SLOPE_SCALE = 2.0;
const float BIAS = 2.0 * .000015259;
float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
float result = depth + SLOPE_SCALE * m + BIAS;
return clamp(result, .0, .999999);
}
void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
}`)):k.output===a.ShaderOutput.Depth&&l.fragment.code.add(u.glsl`void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_linearDepth);
}`)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(b,a){b.RgbaFloatEncoding=function(g){g.code.add(a.glsl`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}
const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl":function(){define("exports ../util/RgbaFloatEncoding.glsl ../util/View.glsl ../../shaderModules/Float4PassUniform ../../shaderModules/FloatPassUniform ../../shaderModules/FloatUniform ../../shaderModules/interfaces ../../shaderModules/Texture2DUniform ../../../shaders/ensureColor4".split(" "),function(b,a,g,u,l,k,f,d,r){function m(w,
D){const G=!(D.draped&&D.stipplePreferContinuous),{vertex:x,fragment:t}=w;t.include(a.RgbaFloatEncoding);x.uniforms.add(new k.FloatUniform("stipplePatternPixelSize"));D.draped||(g.addCameraPosition(x,D),x.uniforms.add(new l.FloatPassUniform("worldToScreenPerDistanceRatio",(z,H)=>1/H.camera.perScreenPixelRatio)),x.code.add(f.glsl`float computeWorldToScreenRatio(vec3 segmentCenter) {
float segmentDistanceToCamera = length(segmentCenter - cameraPosition);
return worldToScreenPerDistanceRatio / segmentDistanceToCamera;
}`));w.varyings.add("vStippleDistance","float");D.stippleRequiresClamp&&w.varyings.add("vStippleDistanceLimits","vec2");D.stippleRequiresStretchMeasure&&w.varyings.add("vStipplePatternStretch","float");x.code.add(f.glsl`
    float discretizeWorldToScreenRatio(float worldToScreenRatio) {
      float step = ${p};

      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);
      return discreteWorldToScreenRatio;
    }
  `);x.code.add(f.glsl`vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {`);x.code.add(f.glsl`
    if (segmentLengthPseudoScreen >= ${G?"patternLength":"1e4"}) {
  `);x.uniforms.add(new l.FloatPassUniform("pixelRatio",(z,H)=>H.camera.pixelRatio));x.code.add(f.glsl`
        // Round the screen length to get an integer number of pattern repetitions (minimum 1).
        float repetitions = segmentLengthScreen / (patternLength * pixelRatio);
        float flooredRepetitions = max(1.0, floor(repetitions + 0.5));
        float segmentLengthScreenRounded = flooredRepetitions * patternLength;

        ${D.stippleRequiresStretchMeasure?f.glsl`
              float stretch = repetitions / flooredRepetitions;

              // We need to impose a lower bound on the stretch factor to prevent the dots from merging together when there is only 1 repetition.
              // 0.75 is the lowest possible stretch value for flooredRepetitions > 1, so it makes sense as lower bound.
              vStipplePatternStretch = max(0.75, stretch);`:""}

        return vec2(0.0, segmentLengthScreenRounded);
      }
      return vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);
    }
  `);t.uniforms.add(new d.Texture2DUniform("stipplePatternTexture"));t.uniforms.add(new k.FloatUniform("stipplePatternSDFNormalizer"));t.uniforms.add(new k.FloatUniform("stipplePatternTextureSize"));t.uniforms.add(new k.FloatUniform("stipplePatternPixelSizeInv"));t.code.add(f.glsl`float padTexture(float u) {
return (u * stipplePatternTextureSize + 1.0)/(stipplePatternTextureSize + 2.0);
}`);t.code.add(f.glsl`
    float getStippleSDF(out bool isClamped) {
      ${D.stippleRequiresClamp?f.glsl`
          float stippleDistanceClamped = clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y);
          vec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;
          isClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;`:f.glsl`
          float stippleDistanceClamped = vStippleDistance;
          isClamped = false;`}

      float u = stippleDistanceClamped * gl_FragCoord.w * stipplePatternPixelSizeInv;
      ${D.stippleScaleWithLineWidth?f.glsl`u *= vLineSizeInv;`:""}
      u = padTexture(fract(u));

      float encodedSDF = rgba2float(texture2D(stipplePatternTexture, vec2(u, 0.5)));
      float sdf = (encodedSDF * 2.0 - 1.0) * stipplePatternSDFNormalizer;

      ${D.stippleRequiresStretchMeasure?f.glsl`return (sdf - 0.5) * vStipplePatternStretch + 0.5;`:f.glsl`return sdf;`}
    }

    float getStippleSDF() {
      bool ignored;
      return getStippleSDF(ignored);
    }

    float getStippleAlpha() {
      bool isClamped;
      float stippleSDF = getStippleSDF(isClamped);

      float antiAliasedResult = ${D.stippleScaleWithLineWidth?f.glsl`clamp(stippleSDF * vLineWidth + 0.5, 0.0, 1.0);`:f.glsl`clamp(stippleSDF + 0.5, 0.0, 1.0);`}

      return isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;
    }
  `);D.stippleOffColorEnabled?(t.uniforms.add(new u.Float4PassUniform("stippleOffColor",z=>r.ensureColor4(z.stippleOffColor))),t.code.add(f.glsl`#define discardByStippleAlpha(stippleAlpha, threshold) {}
#define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)`)):t.code.add(f.glsl`#define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }
#define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)`)}const p=f.glsl.float(.4);b.LineStipple=function(w,D){w.constants.add("stippleAlphaColorDiscard","float",.001);w.constants.add("stippleAlphaHighlightDiscard","float",.5);D.stippleEnabled?m(w,D):w.fragment.code.add(f.glsl`float getStippleAlpha() { return 1.0; }
#define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}
#define blendStipple(color, _stippleAlpha_) color`)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl":function(){define("exports ../../../../../../chunks/mat4 ../../../../../../chunks/mat4f32 ../../../../../../chunks/vec3 ../../../../../../chunks/vec3f64 ../../shaderModules/Float3DrawUniform ../../shaderModules/Float3PassUniform ../../shaderModules/Matrix4DrawUniform ../../shaderModules/Matrix4PassUniform".split(" "),
function(b,a,g,u,l,k,f,d,r){const m=g.create(),p=l.create();b.addCameraPosition=function(w,D){D.instancedDoublePrecision?w.constants.add("cameraPosition","vec3",l.ZEROS):w.uniforms.add(new k.Float3DrawUniform("cameraPosition",(G,x)=>u.set(p,x.camera.viewInverseTransposeMatrix[3]-G.origin[0],x.camera.viewInverseTransposeMatrix[7]-G.origin[1],x.camera.viewInverseTransposeMatrix[11]-G.origin[2])))};b.addProjViewLocalOrigin=function(w,D){w.vertex.uniforms.add(new r.Matrix4PassUniform("proj",(G,x)=>x.camera.projectionMatrix));
if(D.instancedDoublePrecision){const G=(x,t)=>u.set(p,t.camera.viewInverseTransposeMatrix[3],t.camera.viewInverseTransposeMatrix[7],t.camera.viewInverseTransposeMatrix[11]);w.vertex.uniforms.add(new r.Matrix4PassUniform("view",(x,t)=>a.translate(m,t.camera.viewMatrix,G(x,t))));D=new f.Float3PassUniform("localOrigin",G);w.vertex.uniforms.add(D);return D}w.vertex.uniforms.add(new d.Matrix4DrawUniform("view",(G,x)=>a.translate(m,x.camera.viewMatrix,G.origin)));D=new k.Float3DrawUniform("localOrigin",
G=>G.origin);w.vertex.uniforms.add(D);return D};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix4DrawUniform":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Uniform","../shaderTechnique/BindType"],function(b,a,g,u){g=function(l){function k(f,d){return l.call(this,f,"mat4",u.BindType.Draw,(r,m,p)=>r.setUniformMatrix4fv(f,d(m,p)))||this}a._inheritsLoose(k,l);return k}(g.Uniform);
b.Matrix4DrawUniform=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Uniform","../shaderTechnique/BindType"],function(b,a,g,u){g=function(l){function k(f,d){return l.call(this,f,"mat4",u.BindType.Pass,(r,m,p)=>r.setUniformMatrix4fv(f,d(m,p)))||this}a._inheritsLoose(k,l);return k}(g.Uniform);b.Matrix4PassUniform=
g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/Float4PassUniform":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Uniform","../shaderTechnique/BindType"],function(b,a,g,u){g=function(l){function k(f,d){return l.call(this,f,"vec4",u.BindType.Pass,(r,m,p)=>r.setUniform4fv(f,d(m,p)))||this}a._inheritsLoose(k,l);return k}(g.Uniform);b.Float4PassUniform=g;Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/FloatUniform":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Uniform"],function(b,a,g){g=function(u){function l(k){return u.call(this,k,"float")||this}a._inheritsLoose(l,u);return l}(g.Uniform);b.FloatUniform=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/Texture2DUniform":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","./Uniform"],function(b,a,g){g=function(u){function l(k){return u.call(this,k,"sampler2D")||this}a._inheritsLoose(l,u);return l}(g.Uniform);b.Texture2DUniform=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/shaders/ensureColor4":function(){define(["exports","../../../../core/maybe","../../../../chunks/vec4","../../../../chunks/vec4f64"],function(b,a,g,u){const l=u.create();b.ensureColor4=
function(k){return a.isNone(k)?u.ZEROS:4===k.length?k:g.set(l,k[0],k[1],k[2],1)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl":function(){define(["exports","../output/ReadLinearDepth.glsl","../../shaderModules/Float2PassUniform","../../shaderModules/interfaces","../../shaderModules/Texture2DPassUniform"],function(b,a,g,u,l){b.MultipassTerrainUniforms=function(){this.cullAboveGround=
this.enabled=!1};b.multipassTerrainTest=function(k,f){f.hasMultipassTerrain&&(k.fragment.include(a.ReadLinearDepth),k.fragment.uniforms.add(new l.Texture2DPassUniform("terrainDepthTexture",(d,r)=>r.multipassTerrain.linearDepthTexture)),k.fragment.uniforms.add(new g.Float2PassUniform("nearFar",(d,r)=>r.camera.nearFar)),k.fragment.uniforms.add(new g.Float2PassUniform("inverseViewport",(d,r)=>r.inverseViewport)),k.fragment.code.add(u.glsl`
    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){
      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, nearFar);
      if(fragmentDepth ${f.cullAboveGround?"\x3e":"\x3c\x3d"} terrainDepth){
        discard;
      }
    }
  `))};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl":function(){define(["exports","../util/RgbaFloatEncoding.glsl","../../shaderModules/interfaces"],function(b,a,g){b.ReadLinearDepth=function(u){u.include(a.RgbaFloatEncoding);u.code.add(g.glsl`float linearDepthFromFloat(float depth, vec2 nearFar) {
return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
}
float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);
}`)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/Float2PassUniform":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Uniform","../shaderTechnique/BindType"],function(b,a,g,u){g=function(l){function k(f,d){return l.call(this,f,"vec2",u.BindType.Pass,(r,m,p)=>r.setUniform2fv(f,d(m,p)))||this}a._inheritsLoose(k,l);return k}(g.Uniform);b.Float2PassUniform=g;Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../chunks/vec2 ../../../../../chunks/vec2f64 ./Float2PassUniform ./Uniform ../shaderTechnique/BindType".split(" "),function(b,a,g,u,l,k,f,d){let r=function(p){function w(D,G){return p.call(this,D,"sampler2D",d.BindType.Pass,(x,t,z)=>x.bindTexture(D,G(t,
z)))||this}a._inheritsLoose(w,p);return w}(f.Uniform);const m=l.create();b.Texture2DPassUniform=r;b.createTexture2DPassSizeUniforms=function(p,w,D){const G=[new r(p,w)];D&&G.push(new k.Float2PassUniform(p+"Size",(x,t)=>{x=w(x,t);return g.isSome(x)?u.set(m,x.descriptor.width,x.descriptor.height):l.ZEROS}));return G};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl":function(){define(["exports",
"../../shaderModules/interfaces"],function(b,a){b.PiUtils=function(g){g.vertex.code.add(a.glsl`const float PI = 3.141592653589793;`);g.fragment.code.add(a.glsl`const float PI = 3.141592653589793;
const float LIGHT_NORMALIZATION = 1.0 / PI;
const float INV_PI = 0.3183098861837907;
const float HALF_PI = 1.570796326794897;`)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff":function(){define(["exports"],function(b){b.defaultMaskAlphaCutoff=.1;b.symbolAlphaCutoff=.001;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl":function(){define(["exports","../../shaderModules/interfaces"],
function(b,a){b.ColorConversion=function(g){g.code.add(a.glsl`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderModules/ShaderBuilder":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Error","../../../../../core/Logger","../../../../../core/maybe"],function(b,a,g,u,l){const k=u.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");u=function(){function x(){this.includedModules=new Map}x.prototype.include=
function(t,z){if(this.includedModules.has(t)){const H=this.includedModules.get(t);if(H!==z){k.error("Trying to include shader module multiple times with different sets of options.");z=new Set;for(const v of Object.keys(H))H[v]!==t[v]&&z.add(v);for(const v of Object.keys(t))H[v]!==t[v]&&z.add(v);z.forEach(v=>console.error(`  ${v}: current ${H[v]} new ${t[v]}`))}}else this.includedModules.set(t,z),t(this.builder,z)};return x}();let f=function(x){function t(){var H=x.apply(this,arguments)||this;H.vertex=
new m;H.fragment=new m;H.attributes=new p;H.varyings=new w;H.extensions=new D;H.constants=new G;return H}a._inheritsLoose(t,x);var z=t.prototype;z.generate=function(H){const v=this.extensions.generateSource(H),F=this.attributes.generateSource(H),J=this.varyings.generateSource();var c="vertex"===H?this.vertex:this.fragment;const h=c.uniforms.generateSource(),q=c.code.generateSource();H="vertex"===H?"precision highp float;\nprecision highp sampler2D;":"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif";
c=this.constants.generateSource().concat(c.constants.generateSource());return`\n${v.join("\n")}\n\n${H}\n\n${c.join("\n")}\n\n${h.join("\n")}\n\n${F.join("\n")}\n\n${J.join("\n")}\n\n${q.join("\n")}`};z.generateBind=function(H,v){const F=new Map;this.vertex.uniforms.entries.forEach(h=>{const q=h.bind[H];l.isSome(q)&&F.set(h.name,q)});this.fragment.uniforms.entries.forEach(h=>{const q=h.bind[H];l.isSome(q)&&F.set(h.name,q)});const J=Array.from(F.values()),c=J.length;return(h,q)=>{for(let E=0;E<c;++E)J[E](v,
h,q)}};a._createClass(t,[{key:"fragmentUniforms",get:function(){return this.fragment.uniforms.entries}},{key:"builder",get:function(){return this}}]);return t}(u),d=function(){function x(){this._entries=new Map}var t=x.prototype;t.add=function(z){if(!Array.isArray(z))return this._add(z);for(const H of z)this._add(H)};t._add=function(z){if(this._entries.has(z.name)&&!this._entries.get(z.name).equals(z))throw new g(`Duplicate uniform name ${z.name} for different uniform type`);this._entries.set(z.name,
z)};t.generateSource=function(){return Array.from(this._entries.values()).map(z=>l.isSome(z.arraySize)?`uniform ${z.type} ${z.name}[${z.arraySize}];`:`uniform ${z.type} ${z.name};`)};a._createClass(x,[{key:"entries",get:function(){return Array.from(this._entries.values())}}]);return x}(),r=function(){function x(){this._entries=[]}var t=x.prototype;t.add=function(z){this._entries.push(z)};t.generateSource=function(){return this._entries};return x}(),m=function(x){function t(){var z=x.apply(this,arguments)||
this;z.uniforms=new d;z.code=new r;z.constants=new G;return z}a._inheritsLoose(t,x);a._createClass(t,[{key:"builder",get:function(){return this}}]);return t}(u),p=function(){function x(){this._entries=[]}var t=x.prototype;t.add=function(z,H){this._entries.push([z,H])};t.generateSource=function(z){return"fragment"===z?[]:this._entries.map(H=>`attribute ${H[1]} ${H[0]};`)};return x}(),w=function(){function x(){this._entries=[]}var t=x.prototype;t.add=function(z,H){this._entries.push([z,H])};t.generateSource=
function(){return this._entries.map(z=>`varying ${z[1]} ${z[0]};`)};return x}(),D=function(){function x(){this._entries=new Set}var t=x.prototype;t.add=function(z){this._entries.add(z)};t.generateSource=function(z){const H="vertex"===z?x.ALLOWLIST_VERTEX:x.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(v=>H.includes(v)).map(v=>`#extension ${v} : enable`)};return x}();D.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"];D.ALLOWLIST_VERTEX=[];let G=function(){function x(){this._entries=
new Set}var t=x.prototype;t.add=function(z,H,v){let F="ERROR_CONSTRUCTOR_STRING";switch(H){case "float":F=x._numberToFloatStr(v);break;case "int":F=x._numberToIntStr(v);break;case "bool":F=v.toString();break;case "vec2":F=`vec2(${x._numberToFloatStr(v[0])},                            ${x._numberToFloatStr(v[1])})`;break;case "vec3":F=`vec3(${x._numberToFloatStr(v[0])},                            ${x._numberToFloatStr(v[1])},                            ${x._numberToFloatStr(v[2])})`;break;case "vec4":F=
`vec4(${x._numberToFloatStr(v[0])},                            ${x._numberToFloatStr(v[1])},                            ${x._numberToFloatStr(v[2])},                            ${x._numberToFloatStr(v[3])})`;break;case "ivec2":F=`ivec2(${x._numberToIntStr(v[0])},                             ${x._numberToIntStr(v[1])})`;break;case "ivec3":F=`ivec3(${x._numberToIntStr(v[0])},                             ${x._numberToIntStr(v[1])},                             ${x._numberToIntStr(v[2])})`;break;case "ivec4":F=
`ivec4(${x._numberToIntStr(v[0])},                             ${x._numberToIntStr(v[1])},                             ${x._numberToIntStr(v[2])},                             ${x._numberToIntStr(v[3])})`;break;case "mat2":case "mat3":case "mat4":F=`${H}(${Array.prototype.map.call(v,J=>x._numberToFloatStr(J)).join(", ")})`}this._entries.add(`const ${H} ${z} = ${F};`);return this};x._numberToIntStr=function(z){return z.toFixed(0)};x._numberToFloatStr=function(z){return Number.isInteger(z)?z.toFixed(1):
z.toString()};t.generateSource=function(){return Array.from(this._entries)};return x}();b.Code=r;b.Includes=u;b.ShaderBuilder=f;b.Stage=m;b.Uniforms=d;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderLibrary/ShaderOutputOptions ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/basicInterfaces ../materials/DefaultTechniqueConfiguration".split(" "),
function(b,a,g,u,l,k,f){b.CapType=void 0;(function(d){d[d.BUTT=0]="BUTT";d[d.SQUARE=1]="SQUARE";d[d.ROUND=2]="ROUND";d[d.COUNT=3]="COUNT"})(b.CapType||(b.CapType={}));f=function(d){function r(){var m=d.apply(this,arguments)||this;m.output=u.ShaderOutput.Color;m.capType=b.CapType.BUTT;m.transparencyPassType=k.TransparencyPassType.NONE;m.occluder=!1;m.hasSlicePlane=!1;m.hasPolygonOffset=!1;m.writeDepth=!1;m.draped=!1;m.stippleEnabled=!1;m.stippleOffColorEnabled=!1;m.stippleScaleWithLineWidth=!1;m.stipplePreferContinuous=
!0;m.roundJoins=!1;m.vvSize=!1;m.vvColor=!1;m.vvOpacity=!1;m.falloffEnabled=!1;m.innerColorEnabled=!1;m.hasOccludees=!1;m.hasMultipassTerrain=!1;m.cullAboveGround=!1;m.wireframe=!1;return m}a._inheritsLoose(r,d);return r}(f.DefaultTechniqueConfiguration);g.__decorate([l.parameter({count:u.ShaderOutput.COUNT})],f.prototype,"output",void 0);g.__decorate([l.parameter({count:b.CapType.COUNT})],f.prototype,"capType",void 0);g.__decorate([l.parameter({count:k.TransparencyPassType.COUNT})],f.prototype,"transparencyPassType",
void 0);g.__decorate([l.parameter()],f.prototype,"occluder",void 0);g.__decorate([l.parameter()],f.prototype,"hasSlicePlane",void 0);g.__decorate([l.parameter()],f.prototype,"hasPolygonOffset",void 0);g.__decorate([l.parameter()],f.prototype,"writeDepth",void 0);g.__decorate([l.parameter()],f.prototype,"draped",void 0);g.__decorate([l.parameter()],f.prototype,"stippleEnabled",void 0);g.__decorate([l.parameter()],f.prototype,"stippleOffColorEnabled",void 0);g.__decorate([l.parameter()],f.prototype,
"stippleScaleWithLineWidth",void 0);g.__decorate([l.parameter()],f.prototype,"stipplePreferContinuous",void 0);g.__decorate([l.parameter()],f.prototype,"roundJoins",void 0);g.__decorate([l.parameter()],f.prototype,"vvSize",void 0);g.__decorate([l.parameter()],f.prototype,"vvColor",void 0);g.__decorate([l.parameter()],f.prototype,"vvOpacity",void 0);g.__decorate([l.parameter()],f.prototype,"falloffEnabled",void 0);g.__decorate([l.parameter()],f.prototype,"innerColorEnabled",void 0);g.__decorate([l.parameter()],
f.prototype,"hasOccludees",void 0);g.__decorate([l.parameter()],f.prototype,"hasMultipassTerrain",void 0);g.__decorate([l.parameter()],f.prototype,"cullAboveGround",void 0);g.__decorate([l.parameter()],f.prototype,"wireframe",void 0);g.__decorate([l.parameter({constValue:!0})],f.prototype,"stippleRequiresClamp",void 0);g.__decorate([l.parameter({constValue:!0})],f.prototype,"stippleRequiresStretchMeasure",void 0);g.__decorate([l.parameter({constValue:!0})],f.prototype,"hasVvInstancing",void 0);g.__decorate([l.parameter({constValue:!0})],
f.prototype,"hasSliceTranslatedView",void 0);b.RibbonLineTechniqueConfiguration=f;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(b,a){let g=function(){function u(){this._key="";this._keyDirty=!1;this._parameterBits=this._parameterBits?this._parameterBits.map(()=>0):[];this._parameterNames||
(this._parameterNames=[])}u.prototype.snapshot=function(){const l=this._parameterNames,k={key:this.key};for(const f of l)k[f]=this[f];return k};a._createClass(u,[{key:"key",get:function(){this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits));return this._key}}]);return u}();b.ShaderTechniqueConfiguration=g;b.parameter=function(u={}){return(l,k)=>{var f;l._parameterNames=null!=(f=l._parameterNames)?f:[];l._parameterNames.push(k);if(null!=u.constValue)Object.defineProperty(l,
k,{get(){return u.constValue}});else{var d;const r=l._parameterNames.length-1;f=Math.ceil(Math.log2(u.count||2));const m=null!=(d=l._parameterBits)?d:[0];let p=0;for(;16<m[p]+f;)p++,p>=m.length&&m.push(0);l._parameterBits=m;const w=m[p],D=(1<<f)-1<<w;m[p]+=f;Object.defineProperty(l,k,{get(){return this[r]},set(G){if(this[r]!==G&&(this[r]=G,this._keyDirty=!0,this._parameterBits[p]=this._parameterBits[p]&~D|+G<<w&D,"number"!==typeof G&&"boolean"!==typeof G))throw"Configuration value for "+k+" must be boolean or number, got "+
typeof G;}})}}};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../core/shaderTechnique/BindType","../core/shaderTechnique/ShaderTechniqueConfiguration"],function(b,a,g,u,l){let k=function(f){function d(){return f.apply(this,arguments)||this}a._inheritsLoose(d,f);return d}(l.ShaderTechniqueConfiguration);
g.__decorate([l.parameter({constValue:!0})],k.prototype,"hasSliceHighlight",void 0);g.__decorate([l.parameter({constValue:!1})],k.prototype,"hasSliceInVertexProgram",void 0);g.__decorate([l.parameter({constValue:!1})],k.prototype,"instancedDoublePrecision",void 0);g.__decorate([l.parameter({constValue:!1})],k.prototype,"isGround",void 0);g.__decorate([l.parameter({constValue:u.BindType.Pass})],k.prototype,"pbrTextureBindType",void 0);b.DefaultTechniqueConfiguration=k;Object.defineProperties(b,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/shaders/RibbonLineTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../core/shaderLibrary/ShaderOutputOptions ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/basicInterfaces ../lib/OrderIndependentTransparency ../lib/Program ../lib/RenderSlot ../lib/StencilUtils ../lib/VertexAttribute ../../../../chunks/RibbonLine.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(b,a,g,u,l,k,f,d,r,m,p,w,D,G,x,t){const z=new Map([[D.VertexAttribute.POSITION,0],[D.VertexAttribute.SUBDIVISIONFACTOR,1],[D.VertexAttribute.UV0,2],[D.VertexAttribute.AUXPOS1,3],[D.VertexAttribute.AUXPOS2,4],[D.VertexAttribute.COLOR,5],[D.VertexAttribute.COLORFEATUREATTRIBUTE,5],[D.VertexAttribute.SIZE,6],[D.VertexAttribute.SIZEFEATUREATTRIBUTE,6],[D.VertexAttribute.OPACITYFEATUREATTRIBUTE,7]]);f=function(v){function F(c,h,q){h=v.call(this,c,h,q)||this;h.stippleTextureRepository=c.stippleTextureRepository;
return h}g._inheritsLoose(F,v);var J=F.prototype;J.initializeProgram=function(c){const h=F.shader.get().build(this.configuration);return new m.Program(c.rctx,h,z)};J.destroy=function(){v.prototype.destroy.call(this);this.stippleTextureRepository.release(this.stipplePattern);this.stippleTextureBind=this.stipplePattern=null};J.bindPass=function(c,h){this.program.bindPass(c,h);this.stipplePattern!==c.stipplePattern&&(c=c.stipplePattern,this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,
c),this.stipplePattern=c);if(this.configuration.stippleEnabled){const {pixelSize:q,sdfNormalizer:E,pixels:C}=u.isSome(this.stippleTextureBind)?this.stippleTextureBind(this.program):{pixelSize:1,sdfNormalizer:1,pixels:1};this.program.setUniform1f("stipplePatternSDFNormalizer",E);this.program.setUniform1f("stipplePatternTextureSize",C);this.program.setUniform1f("stipplePatternPixelSize",q);this.program.setUniform1f("stipplePatternPixelSizeInv",1/q)}};J._makePipelineState=function(c,h){const q=this.configuration,
E=c===d.TransparencyPassType.NONE,C=c===d.TransparencyPassType.FrontFace;return t.makePipelineState({blending:q.output===l.ShaderOutput.Color||q.output===l.ShaderOutput.Alpha?E?r.blendingDefault:r.oitBlending(c):null,depthTest:{func:r.oitDepthTest(c)},depthWrite:E?q.writeDepth&&t.defaultDepthWriteParams:r.oitDepthWrite(c),colorWrite:t.defaultColorWriteParams,stencilWrite:q.hasOccludees?w.stencilWriteMaskOn:null,stencilTest:q.hasOccludees?h?w.stencilToolMaskBaseParams:w.stencilBaseAllZerosParams:null,
polygonOffset:E||C?q.hasPolygonOffset&&H:r.OITPolygonOffset})};J.initializePipeline=function(){var c=this.configuration;c.occluder&&(c=c.hasPolygonOffset&&H,this._occluderPipelineTransparent=t.makePipelineState({blending:r.blendingDefault,polygonOffset:c,depthTest:w.depthCompareAlways,depthWrite:null,colorWrite:t.defaultColorWriteParams,stencilWrite:null,stencilTest:w.stencilToolTransparentOccluderParams}),this._occluderPipelineOpaque=t.makePipelineState({blending:r.blendingDefault,polygonOffset:c,
depthTest:w.depthCompareAlways,depthWrite:null,colorWrite:t.defaultColorWriteParams,stencilWrite:w.stencilWriteMaskOff,stencilTest:w.stencilToolMaskOccluderParams}),this._occluderPipelineMaskWrite=t.makePipelineState({blending:null,polygonOffset:c,depthTest:w.depthCompareLess,depthWrite:null,colorWrite:null,stencilWrite:w.stencilWriteMaskOn,stencilTest:w.stencilToolMaskBaseParams}));this._occludeePipelineState=this._makePipelineState(this.configuration.transparencyPassType,!0);return this._makePipelineState(this.configuration.transparencyPassType,
!1)};J.getPipelineState=function(c,h){return h?this._occludeePipelineState:this.configuration.occluder?c===p.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent:c===p.RenderSlot.OCCLUDER_MATERIAL?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:v.prototype.getPipelineState.call(this,c,h)};g._createClass(F,[{key:"primitiveType",get:function(){return this.configuration.wireframe?x.PrimitiveType.LINES:x.PrimitiveType.TRIANGLE_STRIP}}]);return F}(f.ShaderTechnique);
f.shader=new k.ReloadableShaderModule(G.RibbonLine,()=>new Promise((v,F)=>b(["./RibbonLine.glsl"],v,F)));const H={factor:0,units:-4};a.RibbonLineTechnique=f;a.ribbonVertexAttributeLocations=z;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(b,a){let g=function(){function u(k,f){this._module=k;this._loadModule=
f}var l=u.prototype;l.get=function(){return this._module};l.reload=function(){var k=a._asyncToGenerator(function*(){return this._module=yield this._loadModule()});return function(){return k.apply(this,arguments)}}();return u}();b.ReloadableShaderModule=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe",
"../../../../webgl/enums"],function(b,a,g,u){let l=function(){function k(d,r,m){this.release=m;r&&(this.initializeConfiguration(d,r),this._configuration=r.snapshot());this._program=this.initializeProgram(d);this._pipeline=this.initializePipeline(d.rctx.capabilities)}var f=k.prototype;f.destroy=function(){this._program=g.disposeMaybe(this._program);this._pipeline=this._configuration=null};f.reload=function(d){g.disposeMaybe(this._program);this._program=this.initializeProgram(d);this._pipeline=this.initializePipeline(d.rctx.capabilities)};
f.bindPass=function(d,r){this.program.bindPass(d,r)};f.bindDraw=function(d,r){this.program.bindDraw(d,r);this.program.rebindTextures()};f.bindPipelineState=function(d,r=null,m){d.setPipelineState(this.getPipelineState(r,m))};f.ensureAttributeLocations=function(d){this.program.assertCompatibleVertexAttributeLocations(d)};f.getPipelineState=function(d,r){return this._pipeline};f.initializeConfiguration=function(d,r){};a._createClass(k,[{key:"program",get:function(){return this._program}},{key:"compiled",
get:function(){return this.program.isCompiled}},{key:"key",get:function(){return this._configuration.key}},{key:"configuration",get:function(){return this._configuration}},{key:"primitiveType",get:function(){return u.PrimitiveType.TRIANGLES}}]);return k}();b.ShaderTechnique=l;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/enums":function(){define(["exports"],function(b){b.ClearBufferBit=void 0;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT";
a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT";a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"})(b.ClearBufferBit||(b.ClearBufferBit={}));b.PrimitiveType=void 0;(function(a){a[a.POINTS=0]="POINTS";a[a.LINES=1]="LINES";a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(b.PrimitiveType||(b.PrimitiveType={}));b.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.ONE=1]="ONE";a[a.SRC_COLOR=
768]="SRC_COLOR";a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA";a[a.DST_COLOR=774]="DST_COLOR";a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA";
a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(b.BlendFactor||(b.BlendFactor={}));b.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(b.BlendOperation||(b.BlendOperation={}));b.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=
35052]="PIXEL_UNPACK_BUFFER";a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"})(b.BufferType||(b.BufferType={}));b.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(b.Face||(b.Face={}));b.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(b.CullMode||(b.CullMode={}));b.DataType=void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=
5122]="SHORT";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT"})(b.DataType||(b.DataType={}));b.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=514]="EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=519]="ALWAYS"})(b.CompareFunction||(b.CompareFunction={}));b.StencilOperation=void 0;(function(a){a[a.ZERO=0]=
"ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=7681]="REPLACE";a[a.INCR=7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";a[a.INCR_WRAP=34055]="INCR_WRAP";a[a.DECR_WRAP=34056]="DECR_WRAP"})(b.StencilOperation||(b.StencilOperation={}));b.TextureSamplingMode=void 0;(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST";a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";
a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(b.TextureSamplingMode||(b.TextureSamplingMode={}));b.TextureWrapMode=void 0;(function(a){a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(b.TextureWrapMode||(b.TextureWrapMode={}));b.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";
a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(b.TextureType||(b.TextureType={}));b.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";
a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.ALPHA=6406]="ALPHA";a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=36244]="RED_INTEGER";a[a.RG_INTEGER=33320]="RG_INTEGER";a[a.RGB_INTEGER=36248]="RGB_INTEGER";a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(b.PixelFormat||(b.PixelFormat={}));b.SizedPixelFormat=void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=
33327]="RG16F";a[a.RGB32F=34837]="RGB32F";a[a.RGBA16F=34842]="RGBA16F";a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=33321]="R8";a[a.RG8=33323]="RG8";a[a.R8I=33329]="R8I";a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=
33337]="RG16I";a[a.RG16UI=33338]="RG16UI";a[a.RG32I=33339]="RG32I";a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";a[a.RGBA32UI=36208]="RGBA32UI";a[a.RGB32UI=36209]="RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";
a[a.RGB16I=36233]="RGB16I";a[a.RGBA8I=36238]="RGBA8I";a[a.RGB8I=36239]="RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(b.SizedPixelFormat||(b.SizedPixelFormat={}));b.PixelType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]=
"UNSIGNED_SHORT_4_4_4_4";a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1";a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";
a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(b.PixelType||(b.PixelType={}));b.RenderbufferFormat=void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(b.RenderbufferFormat||
(b.RenderbufferFormat={}));b.Usage=void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]="DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(b.Usage||(b.Usage={}));b.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=
35633]="VERTEX_SHADER"})(b.ShaderType||(b.ShaderType={}));b.FramebufferTarget=void 0;(function(a){a[a.FRAMEBUFFER=36160]="FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(b.FramebufferTarget||(b.FramebufferTarget={}));b.TargetType=void 0;(function(a){a[a.TEXTURE=0]="TEXTURE";a[a.RENDER_BUFFER=1]="RENDER_BUFFER";a[a.CUBEMAP=2]="CUBEMAP"})(b.TargetType||(b.TargetType={}));b.DepthStencilTargetType=void 0;(function(a){a[a.NONE=0]="NONE";a[a.DEPTH_RENDER_BUFFER=
1]="DEPTH_RENDER_BUFFER";a[a.STENCIL_RENDER_BUFFER=2]="STENCIL_RENDER_BUFFER";a[a.DEPTH_STENCIL_RENDER_BUFFER=3]="DEPTH_STENCIL_RENDER_BUFFER";a[a.DEPTH_STENCIL_TEXTURE=4]="DEPTH_STENCIL_TEXTURE"})(b.DepthStencilTargetType||(b.DepthStencilTargetType={}));b.ResourceType=void 0;(function(a){a[a.Texture=0]="Texture";a[a.BufferObject=1]="BufferObject";a[a.VertexArrayObject=2]="VertexArrayObject";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.FramebufferObject=5]="FramebufferObject";a[a.Renderbuffer=
6]="Renderbuffer";a[a.Sync=7]="Sync";a[a.COUNT=8]="COUNT"})(b.ResourceType||(b.ResourceType={}));b.ColorAttachment=void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]=
"COLOR_ATTACHMENT7";a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9";a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"})(b.ColorAttachment||(b.ColorAttachment={}));b.CompressedTextureFormat=void 0;
(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";a[a.COMPRESSED_SIGNED_RG11_EAC=
37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(b.CompressedTextureFormat||
(b.CompressedTextureFormat={}));b.UniformType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=
35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]="SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";
a[a.SAMPLER_3D=35679]="SAMPLER_3D";a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=
36307]="UNSIGNED_INT_SAMPLER_3D";a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(b.UniformType||(b.UniformType={}));b.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]="SYNC_FLAGS"})(b.SyncParameter||(b.SyncParameter={}));b.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";
a[a.SIGNALED=37145]="SIGNALED"})(b.SyncStatus||(b.SyncStatus={}));b.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=37149]="WAIT_FAILED"})(b.ClientWaitSyncStatus||(b.ClientWaitSyncStatus={}));b.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(b.SyncCondition||(b.SyncCondition={}));b.SyncFlag=
void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(b.SyncFlag||(b.SyncFlag={}));b.BASE_TEXTURE_UNIT=33984;b.DepthStencilAttachment=33306;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/OrderIndependentTransparency":function(){define(["exports","./basicInterfaces","../../../webgl/enums","../../../webgl/renderState"],function(b,a,g,u){const l=u.separateBlendingParams(g.BlendFactor.SRC_ALPHA,g.BlendFactor.ONE,
g.BlendFactor.ONE_MINUS_SRC_ALPHA,g.BlendFactor.ONE_MINUS_SRC_ALPHA),k=u.simpleBlendingParams(g.BlendFactor.ONE,g.BlendFactor.ONE),f=u.simpleBlendingParams(g.BlendFactor.ZERO,g.BlendFactor.ONE_MINUS_SRC_ALPHA),d={factor:-1,units:-2};b.OITPolygonOffset=d;b.OITPolygonOffsetLimit=5E5;b.blendingAlpha=f;b.blendingColor=k;b.blendingDefault=l;b.getOITPolygonOffset=function(r){return r?d:null};b.oitBlending=function(r){return r===a.TransparencyPassType.FrontFace?null:r===a.TransparencyPassType.Alpha?f:k};
b.oitDepthTest=function(r,m=g.CompareFunction.LESS){return r===a.TransparencyPassType.NONE||r===a.TransparencyPassType.FrontFace?m:g.CompareFunction.LEQUAL};b.oitDepthWrite=function(r){return r===a.TransparencyPassType.FrontFace?u.defaultDepthWriteParams:null};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/renderState":function(){define(["exports","../3d/webgl-engine/lib/basicInterfaces","./enums"],function(b,a,g){function u(P){return q.intern(P)}
function l(P){return E.intern(P)}function k(P){return C.intern(P)}function f(P){return I.intern(P)}function d(P){return e.intern(P)}function r(P){return B.intern(P)}function m(P){return M.intern(P)}function p(P){return Q.intern(P)}function w(P){return"["+P.join(",")+"]"}function D(P){return P?w([P.srcRgb,P.srcAlpha,P.dstRgb,P.dstAlpha,P.opRgb,P.opAlpha,P.color.r,P.color.g,P.color.b,P.color.a]):null}function G(P){return P?w([P.face,P.mode]):null}function x(P){return P?w([P.factor,P.units]):null}function t(P){return P?
w([P.func]):null}function z(P){return P?w([P.function.func,P.function.ref,P.function.mask,P.operation.fail,P.operation.zFail,P.operation.zPass]):null}function H(P){return P?w([P.zNear,P.zFar]):null}function v(P){return P?w([P.r,P.g,P.b,P.a]):null}function F(P){return P?w([P.mask]):null}const J={face:g.Face.BACK,mode:g.CullMode.CCW},c={face:g.Face.FRONT,mode:g.CullMode.CCW};var h=function(){function P(W,R){this.makeKey=W;this.makeRef=R;this.interns=new Map}P.prototype.intern=function(W){if(!W)return null;
const R=this.makeKey(W),T=this.interns;T.has(R)||T.set(R,this.makeRef(W));return T.get(R)};return P}();const q=new h(D,P=>({__tag:"Blending",...P})),E=new h(G,P=>({__tag:"Culling",...P})),C=new h(x,P=>({__tag:"PolygonOffset",...P})),I=new h(t,P=>({__tag:"DepthTest",...P})),e=new h(z,P=>({__tag:"StencilTest",...P})),B=new h(H,P=>({__tag:"DepthWrite",...P})),M=new h(v,P=>({__tag:"ColorWrite",...P})),Q=new h(F,P=>({__tag:"StencilWrite",...P})),U=new h(function(P){return P?w([D(P.blending),G(P.culling),
x(P.polygonOffset),t(P.depthTest),z(P.stencilTest),H(P.depthWrite),v(P.colorWrite),F(P.stencilWrite)]):null},P=>({blending:u(P.blending),culling:l(P.culling),polygonOffset:k(P.polygonOffset),depthTest:f(P.depthTest),stencilTest:d(P.stencilTest),depthWrite:r(P.depthWrite),colorWrite:m(P.colorWrite),stencilWrite:p(P.stencilWrite)}));h=function(){function P(R){this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=
this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=R}var W=P.prototype;W.setPipeline=function(R){if(this._pipelineInvalid||R!==this._pipeline)this._setBlending(R.blending),this._setCulling(R.culling),this._setPolygonOffset(R.polygonOffset),this._setDepthTest(R.depthTest),this._setStencilTest(R.stencilTest),this._setDepthWrite(R.depthWrite),this._setColorWrite(R.colorWrite),this._setStencilWrite(R.stencilWrite),this._pipeline=R;this._pipelineInvalid=!1};W.invalidateBlending=
function(){this._pipelineInvalid=this._blendingInvalid=!0};W.invalidateCulling=function(){this._pipelineInvalid=this._cullingInvalid=!0};W.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=!0};W.invalidateDepthTest=function(){this._pipelineInvalid=this._depthTestInvalid=!0};W.invalidateStencilTest=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};W.invalidateDepthWrite=function(){this._pipelineInvalid=this._depthWriteInvalid=!0};W.invalidateColorWrite=
function(){this._pipelineInvalid=this._colorWriteInvalid=!0};W.invalidateStencilWrite=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};W._setBlending=function(R){this._blending=this._setSubState(R,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1};W._setCulling=function(R){this._culling=this._setSubState(R,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1};W._setPolygonOffset=function(R){this._polygonOffset=
this._setSubState(R,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1};W._setDepthTest=function(R){this._depthTest=this._setSubState(R,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1};W._setStencilTest=function(R){this._stencilTest=this._setSubState(R,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1};W._setDepthWrite=function(R){this._depthWrite=
this._setSubState(R,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1};W._setColorWrite=function(R){this._colorWrite=this._setSubState(R,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1};W._setStencilWrite=function(R){this._stencilWrite=this._setSubState(R,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1};W._setSubState=function(R,T,N,
L){if(N||R!==T)L(R),this._pipelineInvalid=!0;return R};return P}();b.StateTracker=h;b.backFaceCullingParams=J;b.cullingParams=P=>P===a.CullFaceOptions.Back?J:P===a.CullFaceOptions.Front?c:null;b.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};b.defaultDepthWriteParams={zNear:0,zFar:1};b.frontFaceCullingParams=c;b.makeBlending=u;b.makeColorWrite=m;b.makeCulling=l;b.makeDepthTest=f;b.makeDepthWrite=r;b.makePipelineState=function(P){return U.intern(P)};b.makePolygonOffset=k;b.makeStencilTest=d;b.makeStencilWrite=
p;b.separateBlendingParams=function(P,W,R,T,N=g.BlendOperation.ADD,L=g.BlendOperation.ADD,K=[0,0,0,0]){return{srcRgb:P,srcAlpha:W,dstRgb:R,dstAlpha:T,opRgb:N,opAlpha:L,color:{r:K[0],g:K[1],b:K[2],a:K[3]}}};b.simpleBlendingParams=function(P,W,R=g.BlendOperation.ADD,T=[0,0,0,0]){return{srcRgb:P,srcAlpha:P,dstRgb:W,dstAlpha:W,opRgb:R,opAlpha:R,color:{r:T[0],g:T[1],b:T[2],a:T[3]}}};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/Program":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/PooledArray ../core/shaderTechnique/BindType ../../../webgl/checkWebGLError".split(" "),
function(b,a,g,u,l,k){let f=function(){function d(m,p,w){this._context=m;this._locations=w;this._textures=new Map;this._freeTextureUnits=new u({deallocator:null});this._glProgram=m.programCache.acquire(p.generate("vertex"),p.generate("fragment"),w);this._glProgram.stop=()=>{throw Error("Wrapped _glProgram used directly");};this.bindPass=p.generateBind(l.BindType.Pass,this);this.bindDraw=p.generateBind(l.BindType.Draw,this);this._fragmentUniforms=k.webglDebugEnabled()?p.fragmentUniforms:null}var r=
d.prototype;r.dispose=function(){this._glProgram.dispose()};r.setUniform1b=function(m,p){this._glProgram.setUniform1i(m,p?1:0)};r.setUniform1i=function(m,p){this._glProgram.setUniform1i(m,p)};r.setUniform1f=function(m,p){this._glProgram.setUniform1f(m,p)};r.setUniform2f=function(m,p,w){this._glProgram.setUniform2f(m,p,w)};r.setUniform2fv=function(m,p){this._glProgram.setUniform2fv(m,p)};r.setUniform3f=function(m,p,w,D){this._glProgram.setUniform3f(m,p,w,D)};r.setUniform3fv=function(m,p){this._glProgram.setUniform3fv(m,
p)};r.setUniform4f=function(m,p,w,D,G){this._glProgram.setUniform4f(m,p,w,D,G)};r.setUniform4fv=function(m,p){this._glProgram.setUniform4fv(m,p)};r.setUniformMatrix3fv=function(m,p){this._glProgram.setUniformMatrix3fv(m,p)};r.setUniformMatrix4fv=function(m,p){this._glProgram.setUniformMatrix4fv(m,p)};r.setUniform1fv=function(m,p){this._glProgram.setUniform1fv(m,p)};r.setUniform1iv=function(m,p){this._glProgram.setUniform1iv(m,p)};r.setUniform2iv=function(m,p){this._glProgram.setUniform3iv(m,p)};r.setUniform3iv=
function(m,p){this._glProgram.setUniform3iv(m,p)};r.setUniform4iv=function(m,p){this._glProgram.setUniform4iv(m,p)};r.assertCompatibleVertexAttributeLocations=function(m){m.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")};r.stop=function(){this._textures.clear();this._freeTextureUnits.clear()};r.bindTexture=function(m,p){if(g.isNone(p)||null==p.glName){if(p=this._textures.get(m))this._context.bindTexture(null,p.unit),this._freeTextureUnit(p),this._textures.delete(m);
return null}let w=this._textures.get(m);null==w?(w=this._allocTextureUnit(p),this._textures.set(m,w)):w.texture=p;this._context.useProgram(this);this.setUniform1i(m,w.unit);this._context.bindTexture(p,w.unit);return w.unit};r.rebindTextures=function(){this._context.useProgram(this);this._textures.forEach((m,p)=>{this._context.bindTexture(m.texture,m.unit);this.setUniform1i(p,m.unit)});g.isSome(this._fragmentUniforms)&&this._fragmentUniforms.forEach(m=>{"sampler2D"!==m.type&&"samplerCube"!==m.type||
this._textures.has(m.name)||console.error(`Texture sampler ${m.name} has no bound texture`)})};r._allocTextureUnit=function(m){return{texture:m,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}};r._freeTextureUnit=function(m){this._freeTextureUnits.push(m.unit)};a._createClass(d,[{key:"glName",get:function(){return this._glProgram.glName}},{key:"isCompiled",get:function(){return this._glProgram.isCompiled}}]);return d}();b.Program=f;Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/checkWebGLError":function(){define(["exports","../../core/Error","../../core/has","../../core/Logger"],function(b,a,g,u){function l(d,r){switch(r){case d.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case d.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case d.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";
case d.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case d.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case d.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const k=u.getLogger("esri/views/webgl"),f=!!g("enable-feature:webgl-debug");b.checkWebGLError=function(d){if(f){const r=d.getError();
r&&(d=l(d,r),k.error(new a("webgl-error","WebGL error occured",{message:d,stack:Error().stack})))}};b.hasFeatureFlagWebGLDebug=f;b.webglDebugEnabled=function(){return f};b.webglValidateShadersEnabled=function(){return f};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/StencilUtils":function(){define(["exports","./basicInterfaces","../../../webgl/enums"],function(b,a,g){const u={func:g.CompareFunction.LESS},l={function:{func:g.CompareFunction.ALWAYS,
ref:a.StencilBits.OutlineVisualElementMask,mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:g.StencilOperation.KEEP,zFail:g.StencilOperation.KEEP,zPass:g.StencilOperation.ZERO}},k={function:{func:g.CompareFunction.ALWAYS,ref:a.StencilBits.OutlineVisualElementMask,mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:g.StencilOperation.KEEP,zFail:g.StencilOperation.KEEP,zPass:g.StencilOperation.REPLACE}},f={function:{func:g.CompareFunction.EQUAL,ref:a.StencilBits.OutlineVisualElementMask,
mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:g.StencilOperation.KEEP,zFail:g.StencilOperation.KEEP,zPass:g.StencilOperation.KEEP}};a={function:{func:g.CompareFunction.NOTEQUAL,ref:a.StencilBits.OutlineVisualElementMask,mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:g.StencilOperation.KEEP,zFail:g.StencilOperation.KEEP,zPass:g.StencilOperation.KEEP}};b.depthCompareAlways={func:g.CompareFunction.ALWAYS};b.depthCompareLess=u;b.renderWhenBitIsNotSet=d=>({function:{func:g.CompareFunction.NOTEQUAL,
ref:d,mask:d},operation:{fail:g.StencilOperation.KEEP,zFail:g.StencilOperation.KEEP,zPass:g.StencilOperation.KEEP}});b.replaceBitWhenDepthTestPasses=d=>({function:{func:g.CompareFunction.ALWAYS,ref:d,mask:d},operation:{fail:g.StencilOperation.KEEP,zFail:g.StencilOperation.KEEP,zPass:g.StencilOperation.REPLACE}});b.stencilBaseAllZerosParams=l;b.stencilToolMaskBaseParams=k;b.stencilToolMaskOccluderParams=f;b.stencilToolTransparentOccluderParams=a;b.stencilWriteMaskOff={mask:0};b.stencilWriteMaskOn=
{mask:255};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"fx3d/views/3d/webgl-engine-extensions/GLVerTexture":function(){define(["dojo/_base/declare","../support/fx3dUtils"],function(b,a){var g=0;return b(null,{declaredClass:"esri.views.3d.webgl-engine-extensions.GLVerTexture",constructor:function(u){this.id=g++;this._gl=u;this._ready=!1;this._textureHandle=this._pixelDataType=this._pixelData=null;this._gl&&(this._textureHandle=this._gl.createTexture())},
_setTexParams:function(){this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST)},_reset:function(u,l){this._width=u;this._height=l;
this._pixelSize=window.parseInt(this._width*this._height*4);(this._isPowerOfTwo=a.isPowerOfTwo(u)&&a.isPowerOfTwo(l))||(console.warn("Width and height are not power of 2, and the rendering may be incorrect."),console.error("GLVerTexture ERROR 222"))},initTexture:function(u,l,k){if(k instanceof Uint8Array)this._pixelDataType=5121;else{if(!(k instanceof Float32Array))return;this._pixelDataType=5126}return this._reset(u,l),isNaN(this._pixelSize)||this._pixelSize!==k.length?(console.warn("The pixel size is invalid."),
void console.error("GLVerTexture ERROR 333")):(this._gl.bindTexture(this._gl.TEXTURE_2D,this._textureHandle),this._setTexParams(),void this._texImage2D())},setData:function(u,l,k){if(k instanceof Uint8Array)this._pixelDataType=5121;else{if(!(k instanceof Float32Array))return;this._pixelDataType=5126}return this._reset(u,l),isNaN(this._pixelSize)||this._pixelSize!==k.length?(console.warn("The pixel size is invalid."),void console.error("GLVerTexture ERROR 333")):(this._pixelData=k,this._gl.bindTexture(this._gl.TEXTURE_2D,
this._textureHandle),this._setTexParams(),void this._texImage2D())},updateTexture:function(u){this._pixelData=u;this._gl.bindTexture(this._gl.TEXTURE_2D,this._textureHandle);this._setTexParams();this._texImage2D();this._showError()},syncData:function(u){this._gl.bindTexture(this._gl.TEXTURE_2D,this._textureHandle);this._setTexParams();this._texImage2D();this._showError()},_showError:function(){var u=this._gl.getError();0!==u&&console.error("TEX Error \x3d\x3d\x3e "+u)},bind:function(u){return this._textureHandle?
("number"==typeof u&&this._gl.activeTexture(33984+u),this._gl.bindTexture(3553,this._textureHandle),void this.syncData()):void console.error("GLVerTexture ERROR 444")},unbind:function(){this._gl.bindTexture(3553,null)},release:function(){this._gl.bindTexture(3553,null)},getTextureHandle:function(){return this._textureHandle},dispose:function(){this._textureHandle.__deleted__=!0;this._gl.deleteTexture(this._textureHandle)},_texImage2D:function(){var u=this._gl.RGBA;this._gl instanceof WebGLRenderingContext||
this._gl instanceof WebGL2RenderingContext&&(u=this._gl.RGBA32F);this._gl.texImage2D(this._gl.TEXTURE_2D,0,u,this._width,this._height,0,this._gl.RGBA,this._pixelDataType,this._pixelData)}})})},"fx3d/views/3d/effects/FxEffectFactory":function(){define(["dojo/Deferred","../support/fx3dUtils"],function(b,a){return{make:function(g){var u=new b;if(g instanceof Object&&g.layer&&g.view&&g.layerView){var l=g.layer.vizType;if("string"!=typeof l)u.reject("No viz type specified.");else{var k=l+"Effect";l=g._test&&
a.enableAddTesting?"fx3d/views/3d/effects/_test/"+k:"fx3d/views/3d/effects/"+l+"/"+k;try{require([l],function(f){f=new f(g);u.resolve(f)})}catch(f){u.reject(f)}}}else u.reject("No FxLayer object found.");return u}}})},"url:fx3d/views/3d/effects/config.json":'{"point":[{"name":"Bounce","icon":"Bounce.png","requireTimeInfo": true,"status": null,"renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 1000,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 1,"scope":[1, 5],"unit":"esriSecond"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 30,"scope":[10, 50],"unit":"esriPixels"},{"name":"dashHeight","displayName":"DashHeight","dataType":"Size","defaultValue": 80000,"scope":[100, 500000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"haloColors","displayName":"HaloColors","dataType":"MultiRGBColors","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]},{"name":"PointExtrude","icon":"PointExtrude.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 5,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"shapeType","displayName":"Shape","dataType":"Shape","scope":["Cuboid","Cylinder","Hexahedron"],"defaultValue":"Cylinder"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 60000,"scope":[1, 120000],"unit":"esriMeters"},{"name":"height","displayName":"Height","dataType":"Size","defaultValue": 800000,"scope":[100, 2000000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"topColors","displayName":"TopColors","dataType":"MultiRGBColor","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]},{"name":"bottomColor","displayName":"BottomColor","dataType":"SingleRGBColor","defaultValue":[0, 255, 0]}]},{"name":"Pulse","icon":"Pulse.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 5,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"shapeType","displayName":"Shape","dataType":"Shape","scope":["Circle","Triangle","Square","Hexagon"],"defaultValue":"Circle"},{"name":"radius","displayName":"InnerRadius","dataType":"Size","defaultValue": 50000,"scope":[1, 120000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"solidColor","displayName":"SolidColor","dataType":"SingleRGBColor","defaultValue":[255, 255, 20]},{"name":"haloColors","displayName":"HaloColors","dataType":"MultiRGBColor","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]}],"polyline":[{"name":"Fireball","icon":"Fireball.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 10,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 40,"scope":[30, 120],"unit":"esriPixels"},{"name":"colors","displayName":"Colors","dataType":"MultiRGBColors","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]},{"name":"JetTrail","icon":"JetTrail.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 1000,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 20,"scope":[10, 50],"unit":"esriPixels"},{"name":"pulseRadius","displayName":"PulseRadius","dataType":"Size","defaultValue": 100000,"scope":[20000, 400000],"unit":"esriMeters"},{"name":"colors","displayName":"Colors","dataType":"MultiRGBColors","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]}],"polygon":[{"name":"AreaExtrude","icon":"AreaExtrude.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 5,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"height","displayName":"Height","dataType":"Size","defaultValue": 10000,"scope":[1, 3000000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"topColors","displayName":"TopColors","dataType":"MultiRGBColor","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]},{"name":"bottomColor","displayName":"BottomColor","dataType":"SingleRGBColor","defaultValue":[0, 255, 0]}]}]}',
"url:fx3d/views/3d/effects/CommonShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\x3c!-- Copyright @ 2022 Esri. All rights reserved under the copyright laws of the United States and applicable international laws, treaties, and conventions. --\x3e\x3csnippets\x3e\x3csnippet name\x3d"backEaseIn"\x3e\x3c![CDATA[float getBackEaseInValue(float a,float b,float c,float d){float e\x3dc-b;float f\x3d1.70158;float g\x3da/d;return e*(g*g)*((f+1.0)*g-f)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"bounceEaseOut"\x3e\x3c![CDATA[float getBounceEaseOutValue(float a,float b,float c,float d){float e\x3dc-b;if((a/\x3dd)\x3c(1.0/2.75)) return e*(7.5625*a*a)+b;else if(a\x3c(2.0/2.75)) return e*(7.5625*(a-\x3d(1.5/2.75))*a+0.75)+b;else if(a\x3c(2.5/2.75)) return e*(7.5625*(a-\x3d(2.25/2.75))*a+0.9375)+b;else return e*(7.5625*(a-\x3d(2.625/2.75))*a+0.984375)+b;}float getBounceEaseInValue(float a,float b,float c,float d){return c-getBounceEaseOutValue(d-a,0.0,c,d)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"circEaseOut"\x3e\x3c![CDATA[float getCircEaseOutValue(float a,float b,float c,float d){float e\x3dc-b;float f\x3da/d-1.0;return e*sqrt(1.0-f*f)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"convertHSLtoRGB"\x3e\x3c![CDATA[vec4 a(vec4 b){const float c\x3d1.0/3.0;const float d\x3d2.0/3.0;const float e\x3d6.0;float f\x3db.x;float g\x3db.y;float h\x3db.z;vec3 i\x3dvec3(e*(f-d),0.0,e*(1.0-f));if(f\x3cd){i.r\x3d0.0;i.g\x3de*(d-f);i.b\x3de*(f-c);}if(f\x3cc){i.r\x3de*(c-f);i.g\x3de*f;i.b\x3d0.0;}i\x3dmin(i,1.0);float j\x3d2.0*g;float k\x3d1.0-g;float l\x3d1.0-h;float m\x3d(2.0*h)-1.0;vec3 n\x3d(j*i)+k;vec3 o;if(h\x3e\x3d0.5) o\x3d(l*n)+m;else o\x3dh*n;return vec4(o,b.a);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"cubicEaseOut"\x3e\x3c![CDATA[float getCubicEaseInOutValue(float a,float b,float c,float d){float e\x3dc-b;if((a/\x3dd/2.0)\x3c1.0) return e/2.0*pow(a,3.0)+b;return e/2.0*((a-\x3d2.0)*pow(a,2.0)+2.0)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"curveInter"\x3e\x3c![CDATA[float b3p0(float a,float b){float c\x3d1.0-a;return pow(c,3.0)*b;}float b3p1(float a,float b){float c\x3d1.0-a;return 3.0*pow(c,2.0)*a*b;}float b3p2(float a,float b){float c\x3d1.0-a;return 3.0*c*pow(a,2.0)*b;}float b3p3(float a,float b){return pow(a,3.0)*b;}float b3(float a,float d,float e,float f,float g){return b3p0(a,d)+b3p1(a,e)+b3p2(a,f)+b3p3(a,g);}vec3 getPoint(float a,vec3 h,vec3 i,vec3 j,vec3 k){float l,m,n;l\x3db3(a,h.x,i.x,j.x,k.x);m\x3db3(a,h.y,i.y,j.y,k.y);n\x3db3(a,h.z,i.z,j.z,k.z);return vec3(l,m,n);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"defines"\x3e\x3c![CDATA[\r\n#ifdef GL_ES\r\nprecision mediump float;\r\n#endif\r\n#define Epsilon \t\t1e-6\r\n#define PI \t\t\t\t\t3.14159265358979323846264338327950288\r\n#define EarthRadius 6378137.0\r\n#define DegPerRad \t57.295779513082320\r\n#define RadPerDeg \t0.017453292519943\r\n]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"defines2"\x3e\x3c![CDATA[\r\n#ifdef GL_ES\r\nprecision mediump float;\r\n#endif\r\n]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"elasticEaseIn"\x3e\x3c![CDATA[float getElasticEaseInValue(float a,float b,float c,float d){float e\x3dc-b;float f\x3dd*0.3;float g\x3de;float h\x3df/4.0;float i\x3da-1.0;return -(g*pow(2.0,10.0*i)*sin((i*d-h)*(2.0*PI)/f))+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"expoEaseOut"\x3e\x3c![CDATA[float getExpoEaseOutValue(float a,float b,float c,float d){float e\x3dc-b;return (abs(a-d)\x3cEpsilon)?c:(e*(-pow(2.0,-10.0*a/d)+1.0)+b);}float getExpoEaseInValue(float a,float b,float c,float d){float e\x3dc-b;return (abs(a)\x3cEpsilon)?b:(e*pow(2.0,10.0*(a/d-1.0))+b);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"float2rgba"\x3e\x3c![CDATA[vec4 a(float v){float b\x3dfloor(v*256.0)/255.0;float c\x3dfloor(fract(v*256.0)*256.0)/255.0;float d\x3dfloor(fract(v*65536.0)*256.0)/255.0;float e\x3d1.0;return vec4(b,c,d,e);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"getHSVColor"\x3e\x3c![CDATA[vec4 getHSVColor(float a,float b,float c){vec3 d\x3dvec3(1.0,1.0,0.0);float e\x3da/60.0;float f\x3dfloor(e);float g\x3de-f;float h\x3dc*(1.0-b);float i\x3dc*(1.0-b*g);float j\x3dc*(1.0-b*(1.0-g));if(f\x3c0.5) d\x3dvec3(c,j,h);else if(f\x3c1.5) d\x3dvec3(i,c,h);else if(f\x3c2.5) d\x3dvec3(h,c,j);else if(f\x3c3.5) d\x3dvec3(h,i,c);else if(f\x3c4.5) d\x3dvec3(j,h,c);else d\x3dvec3(c,h,i);return vec4(d,0.7);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"linearInterpolator"\x3e\x3c![CDATA[float getLinearValue(vec2 a,float b){if(a[1]\x3d\x3da[0]) return 0.0;else{return (b-a[0])/(a[1]-a[0]);}}float getScope(vec2 c,float d){return c[0]+(c[1]-c[0])*d;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"localTrans"\x3e\x3c![CDATA[vec3 wgs84ToWebMerc(vec3 a){float b\x3d0.4999999*PI;float c\x3da[1]*RadPerDeg;c\x3dclamp(c,-b,b);float d\x3dsin(c);float e\x3dRadPerDeg*a[0]*EarthRadius;float f\x3dEarthRadius*0.5*log((1.0+d)/(1.0-d));float g\x3da[2];return vec3(e,f,g);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"lonlat2position"\x3e\x3c![CDATA[vec3 lonlat2position(vec3 a){float b\x3dRadPerDeg*(a.x);float c\x3dRadPerDeg*(a.y);float d\x3dcos(c);float e\x3dEarthRadius+a.z;float f\x3dcos(b)*d*e;float g\x3dsin(b)*d*e;float h\x3dsin(c)*e;return vec3(f,g,h);}vec3 position2lonlat(vec3 i){float j\x3dlength(i);float k\x3dasin(i.z/j);float d\x3dcos(k);float l\x3d-1.0;if(i.y\x3e0.0){l\x3d1.0;}float m\x3dl*acos(i.x/(d*j));float b\x3dDegPerRad*(m);float c\x3dDegPerRad*(k);return vec3(b,c,j-EarthRadius);}mat4 toRotationMat(mat4 n){mat4 o\x3dmat4(1.0);o[0]\x3dn[0];o[1]\x3dn[1];o[2]\x3dn[2];return o;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"lonlatDistance"\x3e\x3c![CDATA[float a(vec2 b,vec2 c){float d\x3dRadPerDeg*(b.y);float e\x3dRadPerDeg*(c.y);float f\x3dRadPerDeg*(c.y-b.y);float g\x3dRadPerDeg*(c.x-b.x);float h\x3dsin(f/2.0)*sin(f/2.0)+cos(d)*cos(e)*sin(g/2.0)*sin(g/2.0);float i\x3d2.0*atan2(sqrt(h),sqrt(1.0-h));return EarthRadius*i;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"packDepth"\x3e\x3c![CDATA[\r\n#ifdef GL_ES\r\nprecision mediump float;\r\n#endif\r\nvec4 packDepth(const in mediump float a){const mediump vec4 b\x3dvec4(256.0,256.0*256.0,256.0*256.0*256.0,256.0*256.0*256.0*256.0);vec4 c\x3da*b;c.x\x3dmin(c.x+1.0,255.0);c\x3dfract(floor(c)/256.0);return c;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"quintEaseOut"\x3e\x3c![CDATA[float getQuintEaseInOutValue(float a,float b,float c,float d){float e\x3dc-b;if((a/\x3d(d/2.0))\x3c1.0){return e/2.0*a*a*a*a*a+b;}return e/2.0*((a-\x3d2.0)*a*a*a*a+2.0)+b;}float getQuintEaseOut(float a,float b,float c,float d){float e\x3dc-b;return e*((a\x3da/d-1.0)*a*a*a*a+1.0)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"rotateFromToMat"\x3e\x3c![CDATA[mat4 rotateFromTo(vec3 a,vec3 b){mat4 c\x3dmat4(1.0);vec3 d\x3dnormalize(a);vec3 e\x3dnormalize(b);float f\x3ddot(d,e);float g\x3dsqrt(1.0-f*f);float h\x3d1.0-f;vec3 i\x3dcross(d,e);i\x3dnormalize(i);float j\x3di.x,k\x3di.y,l\x3di.z;float m\x3dc[0].x,n\x3dc[0].y,o\x3dc[0].z,p\x3dc[0].w,q\x3dc[1].x,r\x3dc[1].y,s\x3dc[1].z,t\x3dc[1].w,u\x3dc[2].x,v\x3dc[2].y,w\x3dc[2].z,x\x3dc[2].w;float y\x3dj*j*h+f,z\x3dk*j*h+l*g,A\x3dl*j*h-k*g,B\x3dj*k*h-l*g,C\x3dk*k*h+f,D\x3dl*k*h+j*g,E\x3dj*l*h+k*g,F\x3dk*l*h-j*g,G\x3dl*l*h+f;c[0].x\x3dm*y+q*z+u*A;c[0].y\x3dn*y+r*z+v*A;c[0].z\x3do*y+s*z+w*A;c[0].w\x3dp*y+t*z+x*A;c[1].x\x3dm*B+q*C+u*D;c[1].y\x3dn*B+r*C+v*D;c[1].z\x3do*B+s*C+w*D;c[1].w\x3dp*B+t*C+x*D;c[2].x\x3dm*E+q*F+u*G;c[2].y\x3dn*E+r*F+v*G;c[2].z\x3do*E+s*F+w*G;c[2].w\x3dp*E+t*F+x*G;return c;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"translationMat"\x3e\x3c![CDATA[mat4 rotateX(mat4 a,float b){mat4 c\x3da;float d\x3dsin(b);float e\x3dcos(b);float f\x3da[1].x,g\x3da[1].y,h\x3da[1].z,i\x3da[1].w,j\x3da[2].x,k\x3da[2].y,l\x3da[2].z,m\x3da[2].w;c[1].x\x3df*e+j*d;c[1].y\x3dg*e+k*d;c[1].z\x3dh*e+l*d;c[1].w\x3di*e+m*d;c[2].x\x3df*(-d)+j*e;c[2].y\x3dg*(-d)+k*e;c[2].z\x3dh*(-d)+l*e;c[2].w\x3di*(-d)+m*e;return c;}mat4 rotateY(mat4 a,float b){mat4 c\x3da;float d\x3dsin(b);float e\x3dcos(b);float n\x3da[0].x,o\x3da[0].y,p\x3da[0].z,q\x3da[0].w,j\x3da[2].x,k\x3da[2].y,l\x3da[2].z,m\x3da[2].w;c[0].x\x3dn*e+j*(-d);c[0].y\x3do*e+k*(-d);c[0].z\x3dp*e+l*(-d);c[0].w\x3dq*e+m*(-d);c[2].x\x3dn*d+j*e;c[2].y\x3do*d+k*e;c[2].z\x3dp*d+l*e;c[2].w\x3dq*d+m*e;return c;}mat4 getTransMat(vec3 r){mat4 s\x3dmat4(1.0);float t\x3dRadPerDeg*(r.x);float u\x3dRadPerDeg*(r.y);float v\x3dsin(t),w\x3dcos(t),x\x3dsin(u),y\x3dcos(u);s[0].x\x3d-v;s[1].x\x3d-x*w;s[2].x\x3dy*w;s[0].y\x3dw;s[1].y\x3d-x*v;s[2].y\x3dy*v;s[0].z\x3d0.0;s[1].z\x3dy;s[2].z\x3dx;s[0].w\x3d0.0;s[1].w\x3d0.0;s[2].w\x3d0.0;s[3].xyz\x3dlonlat2position(r);s[3].w\x3d1.0;return s;}vec3 rotateOnAxis(vec3 z,float b,vec3 A){vec3 B;float C\x3db*0.5;float d\x3dsin(C);float D\x3dcos(C);float E\x3dd*z[0];float F\x3dd*z[1];float G\x3dd*z[2];float H\x3dA[0],I\x3dA[1],J\x3dA[2];float K\x3dD*H+F*J-G*I,L\x3dD*I+G*H-E*J,M\x3dD*J+E*I-F*H,N\x3d-E*H-F*I-G*J;B[0]\x3dK*D+N*-E+L*-G-M*-F;B[1]\x3dL*D+N*-F+M*-E-K*-G;B[2]\x3dM*D+N*-G+K*-F-L*-E;return B;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"transparentFunc"\x3e\x3c![CDATA[\r\n#extension GL_OES_standard_derivatives : enable\r\nfloat edgeFactor(float a,float b){vec3 b\x3dfwidth(a);vec3 c\x3dsmoothstep(vec3(0.0),b*1.5,a);return min(min(c.x,c.y),c.z);}]]\x3e\x3c/snippet\x3e\x3c/snippets\x3e'}});
define("dojo/_base/lang esri/core/has dojo/_base/array esri/request esri/PopupTemplate esri/core/lang esri/rest/support/Query esri/layers/FeatureLayer esri/layers/support/fieldUtils esri/renderers/support/styleUtils esri/layers/support/arcgisLayerUrl esri/geometry/SpatialReference ../views/3d/support/fx3dUtils ../views/3d/layers/FxLayerView3D".split(" "),function(b,a,g,u,l,k,f,d,r,m,p,w,D,G){function x(t){var z=[],H=[],v=["small-integer","integer","single","long","double"],F="lat latitude y ycenter latitude83 latdecdeg POINT-Y lon lng long longitude x xcenter longitude83 longdecdeg POINT-X alt altitude z POINT-Z zcenter altitude83 altdecdeg".split(" ");
return g.forEach(t,function(J){z.push(J.name);var c=J.name.toLowerCase();-1<v.indexOf(J.type)&&-1===F.indexOf(c)&&H.push(J.name)}),{displayFields:z,vizFields:H}}u=d.createSubclass({declaredClass:"esri.layers.FxLayer",viewModulePaths:{"3d":"fx3d/views/3d/layers/FxLayerView3D"},properties:{renderingInfo:{value:null,set:function(t){var z=this._get("renderingInfo");b.isObject(t)&&!D.isEqual(t,z)&&this._set("renderingInfo",t)}},vizType:{value:null,set:function(t){var z=this._get("vizType");b.isString(t)&&
!D.isEqual(t,z)&&this._set("vizType",t)}},displayField:{type:String,value:null,json:{ignore:!0},set:function(t){var z=this._get("displayField");b.isString(t)&&!D.isEqual(t,z)&&this._set("displayField",t)}},vizFields:{value:null,set:function(t){t=b.isString(t)?[t]:t;var z=this._get("vizFields");b.isArray(t)&&!D.isEqual(t,z)&&this._set("vizFields",t)}},spinTag:{value:!1,set:function(t){var z=this._get("spinTag");"boolean"==typeof t&&t!==z&&this._set("spinTag",t)}},pauseTag:{value:!1,set:function(t){var z=
this._get("pauseTag");"boolean"==typeof t&&t!==z&&this._set("pauseTag",t)}}},constructor:function(t,z){this.importLayerViewModule(z.view);this.url=t;Object.keys(z).forEach(function(H){this[H]=z[H]}.bind(this));this.outFields=["*"];this.listMode="hide"},normalizeCtorArgs:function(t,z){return b.isString(t)&&D.isUrl(t)?(t=p.parse(t),t&&null!=t.sublayer&&null==this.layerId&&(this.layerId=t.sublayer),b.mixin({},{url:t.url.path},z)):(console.warn("Data source must be a FeatureService url."),null)},remove:function(){this.pauseAnimation();
this.pauseSpinning();this.emit("destroy-fxlayer");this.fxLayerView&&!1===this.fxLayerView.destroyed&&(this.fxLayerView.destroy(),this.fxLayerView=null)},_initLayerProperties:function(t){this.source||(this.source=t);t.url&&(this.url=t.url);var z=this.source.relatedFeaturesInfo,H=k.mixin({},t.sourceJSON,z?{objectIdField:z.joinField}:{});if(z&&(this.source.relatedFeaturesInfo.outFields=this.outFields?this.outFields.splice(0):null),this.sourceJSON=t.sourceJSON,this.read(H,{origin:"service",url:this.parsedUrl}),
z&&z.outFields&&"*"!==z.outFields[0]&&(z.outFields=z.outFields.map(function(h){return h.toLowerCase()})),this._verifySource(),this._verifyFields(),this.useQueryTimestamp=a("ie")||a("safari"),this.listMode="hide",this.disablePopup=!0,this.visible=!0,!b.isArray(this.fields))return void console.warn("Fileds from source is invalid.");t=x(this.fields);var v=t.vizFields;t=t.displayFields;var F=null,J=null;if(b.isString(this.displayField)&&0!==this.displayField.length?(J=null,F=g.some(t,function(h){if(h.toLowerCase()===
this.displayField.toLowerCase())return J=h,!0}.bind(this)),F?this.set("displayField",J):this.set("displayField",t[0])):this.set("displayField",t[0]),b.isArray(this.vizFields)&&0!==this.vizFields.length){var c=[];g.forEach(v,function(h){c.push(h.toLowerCase())});F=[];g.forEach(this.vizFields,function(h){h=c.indexOf(h.toLowerCase());-1<h&&F.push(v[h])}.bind(this));0<F.length?this.set("vizFields",F):this.set("vizFields",v[0])}else this.set("vizFields",v[0]);return this.availableVizTypes=D.availableVizTypes(this.geometryType,
this.timeInfo),b.isString(this.vizType)&&0!==this.vizType.length?(J=null,F=g.some(this.availableVizTypes,function(h){if(h.name.toLowerCase()===this.vizType.toLowerCase())return J=h.name,!0}.bind(this)),F?this.vizType=J:this.vizType=this.availableVizTypes[0]?this.availableVizTypes[0].name:null):this.vizType=this.availableVizTypes[0]?this.availableVizTypes[0].name:null,this.popupTemplate||(this.popupTemplate=new l({title:this.name,fieldInfos:this.fields?g.map(this.fields,function(h){return{fieldName:h.name,
label:h.name,visible:!0}}):[],content:"{*}"})),this.vizType&&0!=this.vizType.length&&this.displayField&&0!=this.displayField.length&&b.isArray(this.vizFields)&&0!=this.vizFields.length?(this.set("visible",!0),m.loadStyleRenderer(this,{origin:"service"})):(this.set("visible",!1),this.set("loaded",!1),this.emit("fxlayer-error",{msg:"Properties of vizType, displayField, vizFields, renderingInfo, or popupTemplate is missing."}),void console.warn("Properties of vizType, displayField, vizFields, renderingInfo, or popupTemplate is missing."))},
createQuery:function(){var t=new f,z=this.get("capabilities.data");return t.returnGeometry=!0,t.returnZ=z&&z.supportsZ&&this.returnZ||null,t.returnM=z&&z.supportsM&&this.returnM||null,t.outFields=this.outFields,t.where=this.definitionExpression||"1\x3d1",t.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,t.outFields=["*"],t},createQueryParameters:function(){var t=new f;return t.outSpatialReference=w.WGS84,Object.defineProperty(t,"outSpatialReference",{configurable:!0,writable:!1}),
t.returnGeometry=!0,t.returnZ=this.hasZ&&this.returnZ||null,t.returnM=this.hasM&&this.returnM||null,t.outFields=this.outFields,t.where=this.definitionExpression||"1\x3d1",t.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,queryParams.outFields=["*"],t},importLayerViewModule:function(t){"3d"===t.type&&(this.fxLayerView=new G({layer:this,view:t}))},showLabel:function(t){t&&this.emit("show-feature-label",{feature:t})},hideLabel:function(){this.emit("hide-feature-label")},startAnimation:function(){return this.visible?
void(this.pauseTag=!1):void console.warn("The FxLayer is invisible now.")},pauseAnimation:function(){this.pauseTag=!0},startSpinning:function(){return this.visible?void(this.spinTag=!0):void console.warn("The FxLayer is invisible now.")},pauseSpinning:function(){this.spinTag=!1},switchVizField:function(t,z){function H(J){-1<J&&J<v.vizFields.length?(v.emit("hide-feature-label"),v.emit("fx3d-active-viz-field",{currentVizPage:J,newRenderingInfo:z})):console.warn("invalid viz page in switchVizField(vizField).")}
if(!this.visible)return void console.warn("The FxLayer is invisible now.");var v=this;if(b.isString(t)){var F=[];g.forEach(this.vizFields,function(J){F.push(J.toLowerCase())});t=F.indexOf(t.toLowerCase());H(t)}else"number"==typeof t?H(t):console.warn("switchVizField(vizField) needs a integer id or string name as parameter.")}});return b.mixin(u,D.EffectType),u});